(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6604,956],{91054:function(){},61837:function(){},42147:function(e,t,a){Promise.resolve().then(a.bind(a,37304)),Promise.resolve().then(a.bind(a,98404)),Promise.resolve().then(a.bind(a,7350)),Promise.resolve().then(a.bind(a,1838)),Promise.resolve().then(a.bind(a,82939)),Promise.resolve().then(a.bind(a,16277)),Promise.resolve().then(a.bind(a,37229)),Promise.resolve().then(a.bind(a,43266)),Promise.resolve().then(a.bind(a,65339)),Promise.resolve().then(a.bind(a,77732)),Promise.resolve().then(a.bind(a,9948)),Promise.resolve().then(a.t.bind(a,11569,23)),Promise.resolve().then(a.t.bind(a,43517,23)),Promise.resolve().then(a.t.bind(a,52820,23)),Promise.resolve().then(a.bind(a,70290)),Promise.resolve().then(a.bind(a,40689)),Promise.resolve().then(a.bind(a,16990)),Promise.resolve().then(a.bind(a,7680)),Promise.resolve().then(a.bind(a,95704)),Promise.resolve().then(a.bind(a,54144)),Promise.resolve().then(a.bind(a,693))},40689:function(e,t,a){"use strict";a.r(t),a.d(t,{DefaultCheckout:function(){return DefaultCheckout}});var r=a(4190),n=a(25552),o=a(46760),i=a(88752),s=a(60956),d=a(37357),c=a(67743),l=a(63343),u=a(70290),p=a(83650),m=a(82380);function FormCheckoutOne(e){var t,a;let{typeProduct:h,colorPrimary:y,t:f,deliveryOptions:v,selectedDelivery:x,setSelectedDelivery:C,coin:g,requiredDocumentAndPhone:P}=e,[w,E]=(0,p.useState)(!1),{register:I,setValue:b,control:A,formState:{errors:N},watch:D}=(0,i.Gc)(),R=D("cep");(0,p.useEffect)(()=>{"pt-BR"!==f.locale&&(b("cpf","97465052033"),b("phone","99999999999"))},[f.locale,b]),(0,p.useEffect)(()=>{v.length>0&&C(v.find(e=>e.preSelected)||v[0])},[v]);let T=(0,p.useCallback)(async e=>{(0,c.Ds)(async()=>{try{let t=await l.default.get("https://viacep.com.br/ws/".concat(e,"/json/")),a=t.data;a.uf?(b("street",a.logradouro),b("district",a.bairro),b("city",a.localidade),b("state",a.uf)):u.default.error(f.errorCepNotFound)}catch(e){u.default.error(f.errorCep)}finally{E(!0)}},500)()},[b,f]);return(null==R?void 0:R.length)===9&&T(R),(0,r.jsxs)("div",{className:"mt-4 rounded border border-gray-300 bg-white",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 border-b-gray-200 p-4",children:[(0,r.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full text-xl font-bold text-white",style:{backgroundColor:y||"#0762d1"},children:"1"}),(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsx)("h3",{className:"text-gray-500",children:f.personalData}),(0,r.jsx)("p",{children:f.fillInfo})]})]}),(0,r.jsx)("hr",{}),(0,r.jsxs)("div",{className:"flex flex-col gap-3 p-4 sm:gap-4 lg:grid lg:grid-cols-2 lg:gap-5",children:[(0,r.jsx)(n.II,{className:"col-span-2",label:f.fullName,maxLength:30,error:null===(t=N.name)||void 0===t?void 0:t.message,...I("name")}),(0,r.jsx)(n.II,{className:"col-span-2",label:"E-mail",type:"email",error:null===(a=N.email)||void 0===a?void 0:a.message,...I("email")}),P&&"pt-BR"===f.locale&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Qr,{name:"phone",control:A,render:e=>{var t;let{field:a}=e;return(0,r.jsx)(o.C,{label:f.phone,mask:"(99) 99999-9999",type:"tel",placeholder:"(00) 00000-0000",onChange:e=>a.onChange(e.target.value),value:a.value,error:null===(t=N.phone)||void 0===t?void 0:t.message})}}),(0,r.jsx)(i.Qr,{name:"cpf",control:A,render:e=>{var t;let{field:a}=e;return(0,r.jsx)(o.C,{label:"CPF",mask:"999.999.999-99",placeholder:"000.000.000-00",type:"tel",onChange:e=>a.onChange(e.target.value),value:a.value,error:null===(t=N.cpf)||void 0===t?void 0:t.message})}})]}),"FISICO"===h&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"font-medium",children:f.deliveryInfo}),(0,r.jsx)(i.Qr,{name:"cep",control:A,render:e=>{var t;let{field:a}=e;return(0,r.jsx)(o.C,{className:"col-span-2",label:"CEP",mask:"99999-999",type:"tel",placeholder:"00000-000",onChange:a.onChange,value:a.value,error:null===(t=N.cep)||void 0===t?void 0:t.message})}}),w&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.II,{label:f.addressStreet,...I("street")}),(0,r.jsx)(n.II,{label:f.addressNumber,type:"tel",...I("number")}),(0,r.jsx)(n.II,{className:"col-span-1",label:f.addressDistrict,...I("district")}),(0,r.jsx)(n.II,{label:f.addressComplement,...I("complement")}),(0,r.jsx)(n.II,{label:f.addressCity,...I("city")}),(0,r.jsx)(i.Qr,{name:"state",control:A,render:e=>{let{field:t}=e;return(0,r.jsx)(d.default,{label:f.addressState,placeholder:f.enterAddressState,labelClassName:"font-normal",options:s.e5,onChange:e=>t.onChange(e.value),value:s.e5.find(e=>e.value===t.value)})}})]}),w&&0!==v.length&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"font-medium",children:f.chooseDeliveryMethod}),(0,r.jsx)(m.fC,{className:"col-span-2 flex flex-col gap-2.5",defaultValue:"default","aria-label":"View density",children:v.map((e,t)=>(0,r.jsxs)("div",{className:"relative flex items-center gap-1 rounded border p-3 text-sm font-bold",children:[(0,r.jsx)(m.ck,{value:e.id,className:"relative mr-1 flex h-5 w-5 items-center justify-center rounded-full border ".concat(e.id===x.id?'data-[state="checked"]:bg-green':""),style:{backgroundColor:e.id===x.id?y||"#22c55e":"transparent"},onClick:()=>C(e),checked:e.id===x.id,children:(0,r.jsx)(m.z$,{className:"absolute h-2 w-2 rounded-full bg-white"})}),(0,r.jsxs)("div",{className:"flex w-full justify-between px-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:e.description+(e.preSelected?" ".concat(f.recommended):"")}),(0,r.jsx)("label",{className:"flex items-center gap-1 text-sm font-normal",children:e.deliveryTime})]}),(0,r.jsx)("p",{children:0!==e.fareAmount?Intl.NumberFormat(f.locale,{currency:g,style:"currency"}).format(e.fareAmount/100):f.freeShipping})]})]},t))})]})]})]})]})}var h=a(4793),y=a(46234),f=a(6808),v=a(96704),x=a(90326),C=a(25797),g=a(32806),P=a(43925),w=a.n(P),E=a(85947),I=a.n(E);function FormCheckoutTwo(e){var t,a;let{t:s}=e,[c,l]=(0,p.useState)("CREDIT_CARD"),{register:u,setValue:m,control:P,formState:{errors:E}}=(0,i.Gc)();(0,p.useEffect)(()=>{if(e.checkout.pixEnabled){l("PIX");return}if(e.checkout.creditCardEnabled){l("CREDIT_CARD");return}if(e.checkout.billetEnabled){l("BILLET");return}},[]),(0,p.useEffect)(()=>{m("paymentMethod",c)},[c,m]);let b=[{icon:(0,r.jsx)(v.bfP,{size:25}),title:s.instant,description:s.instantText},{icon:(0,r.jsx)(x.qER,{size:25}),title:s.simplePayment,description:s.simplePaymentText},{icon:(0,r.jsx)(y.L3A,{size:25}),title:s.secure,description:s.secureText}],A=[s.billetText1,s.billetText2,s.billetText3],N=[{icon:(0,r.jsx)(h.zki,{size:20}),value:"PIX",title:"PIX"},{icon:(0,r.jsx)(y.UIg,{size:17}),value:"CREDIT_CARD",title:s.creditCard},{icon:(0,r.jsx)(f.jlz,{size:20}),value:"BILLET",title:s.bankSlip}];return(0,r.jsxs)("div",{className:"mt-4 rounded border border-gray-300 bg-white",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 border-b-gray-200 p-4",children:[(0,r.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full text-xl font-bold text-white",style:{backgroundColor:e.colorPrimary||"#0762d1"},children:"2"}),(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsx)("h3",{className:"text-gray-500",children:s.paymentData}),(0,r.jsx)("p",{children:s.paymentDataText})]})]}),(0,r.jsx)("hr",{}),(0,r.jsx)("div",{className:"flex flex-col gap-3 pl-4 pr-4 pt-4 sm:flex-row",children:N.map((t,a)=>{if(("CREDIT_CARD"!==t.value||e.checkout.creditCardEnabled)&&("PIX"!==t.value||e.checkout.pixEnabled)&&("BILLET"!==t.value||e.checkout.billetEnabled))return(0,r.jsxs)("button",{type:"button",className:"flex w-full items-center justify-center gap-1 rounded p-[0.65rem] text-[0.7rem] font-bold ".concat(c===t.value?"text-white":"text-gray-700"),style:{backgroundColor:c===t.value?e.colorPrimary||"#0762d1":"#e5e7eb"},onClick:()=>l(t.value),children:[t.icon,t.title]},a)})}),(0,r.jsxs)("div",{className:"flex flex-col gap-3 p-4 sm:grid sm:grid-cols-2 sm:gap-3 lg:gap-4",children:["CREDIT_CARD"===c&&e.checkout.creditCardEnabled&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.Qr,{name:"cardNumber",control:P,render:e=>{var t;let{field:a}=e;return(0,r.jsx)(o.C,{label:s.cardNumber,type:"tel",className:"col-span-2",mask:"9999 9999 9999 9999",error:null===(t=E.cardNumber)||void 0===t?void 0:t.message,placeholder:"0000 0000 0000 0000",onChange:e=>a.onChange(e.target.value),value:a.value})}}),(0,r.jsx)(i.Qr,{name:"cardExpiration",control:P,render:e=>{var t;let{field:a}=e;return(0,r.jsx)(o.C,{label:s.cardExpiration,error:null===(t=E.cardExpiration)||void 0===t?void 0:t.message,mask:"99/99",type:"tel",placeholder:"MM/YY",onChange:e=>a.onChange(e.target.value),value:a.value})}}),(0,r.jsx)(n.II,{label:"CVV",placeholder:"***",error:null===(t=E.cardCvv)||void 0===t?void 0:t.message,...u("cardCvv")}),(0,r.jsx)(n.II,{className:"col-span-2",label:s.cardName,error:null===(a=E.cardName)||void 0===a?void 0:a.message,placeholder:s.cardName,...u("cardName")}),"SUBSCRIPTION"!==e.checkout.type&&(0,r.jsx)(i.Qr,{name:"cardInstallment",control:P,render:t=>{var a;let{field:n}=t;return(0,r.jsx)(d.default,{label:s.installments,className:"col-span-2",labelClassName:"font-normal",error:null===(a=E.cardInstallment)||void 0===a?void 0:a.message,options:e.installmentsOptions,onChange:e=>n.onChange(e.value),value:e.installmentsOptions.find(e=>e.value==n.value)})}})]}),"PIX"===c&&e.checkout.pixEnabled&&(0,r.jsxs)("div",{className:"col-span-2 flex flex-col gap-5",children:[(0,r.jsx)("strong",{children:s.payPix}),b.map((e,t)=>(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsxs)("span",{className:"flex items-center gap-1 text-green-light",children:[e.icon,(0,r.jsx)("p",{className:"font-semibold uppercase",children:e.title})]}),(0,r.jsx)("p",{className:"text-xs",children:e.description})]},t))]}),"BILLET"===c&&e.checkout.billetEnabled&&(0,r.jsxs)("div",{className:"col-span-2 flex flex-col gap-5",children:[(0,r.jsx)("strong",{children:s.payBillet}),A.map((e,t)=>(0,r.jsxs)("div",{className:"grid grid-cols-[auto_1fr] items-center gap-1",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(C.KP3,{size:25})}),(0,r.jsx)("span",{className:"text-xs font-semibold text-gray-600",children:e})]},t))]}),e.checkout.product.ordersBumps.length>=1&&(0,r.jsx)(g.l,{ordersbump:e.checkout.product.ordersBumps,currency:e.checkout.coin,t:s}),(0,r.jsxs)("div",{className:"col-span-2 w-full border-t pt-2",children:[e.fareAmount>0&&(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{children:s.shipping}),(0,r.jsx)("span",{children:Intl.NumberFormat(s.locale,{currency:e.checkout.coin,style:"currency"}).format(e.fareAmount/100)})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("strong",{className:"text-lg",children:s.total}),(0,r.jsx)("strong",{className:"text-lg",children:Intl.NumberFormat(s.locale,{currency:e.checkout.coin,style:"currency"}).format(e.total+e.fareAmount/100)})]}),"SUBSCRIPTION"===e.checkout.type&&(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{children:s.nextCharge+" "}),(0,r.jsxs)("div",{className:"flex flex-col items-end",children:[(0,r.jsx)("span",{children:Intl.NumberFormat(s.locale,{currency:e.checkout.coin,style:"currency"}).format(e.checkout.recurrencePrice/100)}),(0,r.jsx)("span",{children:I()().add(e.checkout.frequencyInDays,"days").format(s.dateFormat)})]})]})]}),(0,r.jsx)(n.zx,{className:"col-span-2",color:e.colorPrimary?void 0:"success",style:{backgroundColor:e.colorPrimary||""},type:"submit",isLoading:e.isLoading,disabled:e.isLoading,children:{BILLET:s.payWithBillet,CREDIT_CARD:s.payWithCC,PIX:s.payWithPix}[c]}),(0,r.jsx)("span",{className:"col-span-2 text-center text-[0.7rem]",children:s.secureEnvironment}),"pt-BR"===s.locale&&(0,r.jsxs)("div",{className:"col-span-2 grid grid-cols-2 place-items-center",children:[(0,r.jsx)(w(),{src:"https://i.imgur.com/AvxBWDE.png",alt:"Comprar 100% segura",width:100,height:100}),(0,r.jsx)(w(),{src:"https://i.imgur.com/ebDb3Mn.png",alt:"Dados pessoais",width:100,height:100})]})]})]})}var b=a(26730),A=a(3779),N=a(7743),D=a(73076),R=a(49320),T=a(62900),M=a(72370),S=a(59386),k=a(18421),B=a(4898),_=a(60827),j=a(93158);let L=b.z.object({paymentMethod:b.z.enum(["PIX","CREDIT_CARD","BILLET"]),cardNumber:b.z.string().optional(),cardExpiration:b.z.string().optional(),cardCvv:b.z.string().optional(),cardName:b.z.string().optional(),cardInstallment:b.z.number().optional(),orderBumpsIds:b.z.array(b.z.string()).optional()}),U=b.z.object({name:b.z.string({required_error:"Campo obrigat\xf3rio"}).min(4,{message:"M\xednimo 3 caracteres"}).max(30,{message:"M\xe1ximo 30 caracteres"}),email:b.z.string({required_error:"Campo obrigat\xf3rio"}).email({message:"E-mail inv\xe1lido"}),phone:b.z.string().optional(),cpf:b.z.string().optional(),cep:b.z.string().optional(),complement:b.z.string().optional(),number:b.z.string().optional(),street:b.z.string().optional(),district:b.z.string().optional(),city:b.z.string().optional(),state:b.z.string().optional()});var z=a(67408),O=a(31431),V=a(45593),F=a(17267);function DefaultCheckout(e){var t,a,n,o,s,d,l,m,h,y,f;let{checkout:v,params:x,t:C}=e,{setTheme:g}=(0,R.F)(),[P,E]=(0,p.useState)(v.price/100),[I,G]=(0,p.useState)(!1),[K,q]=(0,p.useState)(null),[W,X]=(0,p.useState)(void 0),H=b.z.object({cep:b.z.string({required_error:C.errorRequired}).min(1,C.errorRequired),complement:b.z.string().optional().nullable(),number:b.z.string({required_error:C.errorRequired}).min(1,C.errorRequired),street:b.z.string({required_error:C.errorRequired}).min(1,C.errorRequired),district:b.z.string({required_error:C.errorRequired}).min(1,C.errorRequired),city:b.z.string({required_error:C.errorRequired}).min(1,C.errorRequired),state:b.z.string({required_error:C.errorRequired}).min(1,C.errorRequired)}),Q=(0,p.useRef)(!1),Y=(0,N.useRouter)(),J=(0,N.useSearchParams)(),Z=(0,A.useCheckoutContext)(),$=(0,i.cI)({resolver:(0,M.F)(b.z.intersection(U,L))}),ee=$.watch("orderBumpsIds"),et=$.watch("paymentMethod"),ea=$.watch("cep"),er=(0,p.useMemo)(()=>{if((null==ea?void 0:ea.length)===9){if(v.fretePrice)return v.fretePrice;if(K)return K.fareAmount}return 0},[v.fretePrice,null==ea?void 0:ea.length,K]),{data:en,refetch:eo}=T.S.checkout.getInstallments.useQuery({checkoutId:v.id,orderBumpsIds:ee||[],fareAmount:er},{enabled:"CREDIT_CARD"===et}),ei=(0,V.R)(en,v.coin),es=T.S.useUtils(),ed=T.S.checkout.purchase.useMutation({onSuccess:async e=>{if(e){if(e.upsellToken&&(document.cookie="upsellToken=".concat(e.upsellToken,"; path=/;")),G(!0),"CREDIT_CARD"===e.method&&"REJECTED"===e.status){u.default.error(C.errorCardDeclined);return}es.checkout.getPaymentQuick.setData({id:e.paymentId},e.payment),Y.push("".concat(D._.checkoutPayment(e.paymentId),"?").concat(J.toString()))}},onError:e=>{G(!1),u.default.error(C.errorPaymentDeclined)}}),ec=T.S.checkout.tokenCreditCard.useMutation();(0,p.useEffect)(()=>{let e=0;v.product.ordersBumps.forEach(t=>{ee&&ee.includes(t.id)&&(e+=t.offer.price/100)}),E(v.price/100+e)},[ee,v]),(0,p.useEffect)(()=>{eo()},[er,ee]);let onSubmit=async e=>{G(!0);try{var t,a,r,n,o,i;let s=null;if(v.requiredDocumentAndPhone&&!e.cpf)return u.default.error(C.errorInvalidCpf),G(!1);if(v.requiredDocumentAndPhone&&!e.phone)return u.default.error(C.errorInvalidPhone),G(!1);if(v.requiredDocumentAndPhone&&e.cpf&&!S.wn.isValid(e.cpf))return u.default.error(C.errorInvalidCpf),G(!1);if(v.requiredDocumentAndPhone||(e.phone="99999999999",e.cpf=(0,c.sR)()),!e.phone||!e.cpf)return u.default.error(C.errorPhoneAndCpf),G(!1);if(e.name.length<=0)return u.default.error(C.errorFullName),G(!1);if((null==v?void 0:v.product.typeProduct)==="FISICO")try{H.parse({cep:e.cep,complement:e.complement,number:e.number,street:e.street,district:e.district,city:e.city,state:e.state})}catch(e){u.default.error(C.errorAddress),G(!1);return}if("CREDIT_CARD"===e.paymentMethod){let a=j.W.find(e=>e.providerName===v.provider.paymentProvider);if(!a){u.default.error(C.errorPaymentNotConfigured),G(!1);return}let r=new a(v.provider.gatewayPublicKey,"",null),n=null===(t=v.product.createdByUser.receivers.find(e=>"IUGU"===e.receiverProvider))||void 0===t?void 0:t.receiverId,o={cardNumber:e.cardNumber.replaceAll(" ",""),cvv:e.cardCvv,expMonth:e.cardExpiration.split("/")[0],expYear:e.cardExpiration.split("/")[1],holderName:e.cardName,holderDocument:e.cpf.replaceAll(".","").replaceAll("-","")},i=await r.createCardToken({...o,receiverId:n});if(s={token:i,installments:e.cardInstallment},"SUBSCRIPTION"===v.type){let e=await ec.mutateAsync({...o,expMonth:parseInt(o.expMonth),expYear:parseInt(o.expYear)});s.creditCardId=e,s.installments=1}}let d=new Date;d.setSeconds(d.getSeconds()+30),document.cookie="token2=undefined10; path=/; expires=".concat(d.toUTCString(),";");let l={offerId:x.checkoutId,email:e.email,name:e.name,paymentMethod:e.paymentMethod,phone:e.phone.replaceAll("(","").replaceAll(")","").replaceAll(" ","").replaceAll("-",""),creditCard:s,cep:e.cep,complement:e.complement,number:null!==(a=e.number)&&void 0!==a?a:"",street:null!==(r=e.street)&&void 0!==r?r:"",district:null!==(n=e.district)&&void 0!==n?n:"",city:null!==(o=e.city)&&void 0!==o?o:"",state:null!==(i=e.state)&&void 0!==i?i:"",orderBumpsIds:e.orderBumpsIds||[],cpf:e.cpf.replaceAll(".","").replaceAll("-",""),utmQuery:J.toString(),referer:Z.referer,affiliateId:J.get("affiliateId")||void 0,deliveryFare:v.fretePrice||(null==K?void 0:K.fareAmount)||0,abandonedCartId:W};"CREDIT_CARD"===e.paymentMethod&&(l.fingerPrints=[{provider:"axisbanking",value:String(window.getFingerprintSession().sessionId)}]),await ed.mutateAsync(l)}catch(e){G(!1)}};return(0,p.useEffect)(()=>{let handleBeforeUnload=e=>{e.preventDefault(),e.returnValue=""},handlePopState=()=>{v.checkoutBuilderConfig.backRedirect&&Y.push(v.checkoutBuilderConfig.backRedirect)};return history.pushState({customState:!0},"customState"),window.addEventListener("beforeunload",handleBeforeUnload),window.addEventListener("popstate",handlePopState),()=>{window.removeEventListener("beforeunload",handleBeforeUnload),window.removeEventListener("popstate",handlePopState)}},[Y]),(0,p.useEffect)(()=>{let e=J.get("nome"),t=J.get("email"),a=J.get("telefone"),r=J.get("cpf");e&&$.setValue("name",e),t&&$.setValue("email",t),a&&$.setValue("phone",a),r&&$.setValue("cpf",r)},[J]),(0,p.useEffect)(()=>{g("light")},[g]),(0,p.useEffect)(()=>{v&&!Q.current&&((0,k.Gb)("InitiateCheckout",{}),Q.current=!0)},[v]),(0,F.Z)({cartId:W,setCartId:X,offerId:v.id,cartAmt:v.price,name:$.watch("name"),document:null==ea?void 0:ea.replace(/\D/g,""),email:$.watch("email"),phone:null===(t=$.watch("phone"))||void 0===t?void 0:t.replace(/\D/g,""),utmQuery:J.toString()}),(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("main",{className:"mx-auto grid w-full max-w-[1000px] px-4 pb-5 pt-5",children:[(null===(a=v.checkoutBuilderConfig)||void 0===a?void 0:a.logoTopImageURL)&&(0,r.jsx)("div",{className:"mb-10 w-full border bg-white p-7 shadow",children:(0,r.jsx)("div",{className:"w-full max-w-[200px]",children:(0,r.jsx)(O.z,{imageURL:v.checkoutBuilderConfig.logoTopImageURL})})}),(0,r.jsx)("div",{className:"w-full",children:(null===(n=v.checkoutBuilderConfig)||void 0===n?void 0:n.headerImageURL)&&(0,r.jsx)(_.Y,{imageURL:v.checkoutBuilderConfig.headerImageURL})}),(0,r.jsx)("div",{className:"w-full",children:(null===(o=v.checkoutBuilderConfig)||void 0===o?void 0:o.enabledBannerText)&&(0,r.jsx)(B.E,{text:v.checkoutBuilderConfig.bannerText,textColor:v.checkoutBuilderConfig.bannerTextColor,backgroundColor:v.checkoutBuilderConfig.bannerTextBackgroundColor})}),(0,r.jsxs)("div",{className:"mt-4 flex flex-col gap-3 rounded border border-gray-300 bg-white p-4",children:[(0,r.jsx)("strong",{className:"flex items-center gap-1",style:{color:(null===(s=v.checkoutBuilderConfig)||void 0===s?void 0:s.colorPrimary)||"blue"},children:C.purchaseText}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-full max-w-[80px]",children:v.product.image&&(0,r.jsx)("div",{className:"w-full",children:(0,r.jsx)(w(),{src:v.product.image,alt:v.product.name,width:1e3,height:1e3})})}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("h5",{className:"-mb-1 font-medium",children:v.product.name}),"CREDIT_CARD"!==et||"SUBSCRIPTION"===v.type&&(0,r.jsxs)("span",{className:"text-base",children:[(v.price/100).toLocaleString(C.locale,{style:"currency",currency:v.coin})," ",C.inFull]}),"CREDIT_CARD"===et&&en&&en.length>0&&"ONE_TIME"===v.type&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("span",{children:[en&&en.length,"x ",C.of," ",(0,r.jsx)("strong",{className:"text-base",children:en&&en.length&&(en[en.length-1].installmentValue/100).toLocaleString(C.locale,{style:"currency",currency:v.coin})})," "]}),(0,r.jsxs)("span",{className:"text-xs",children:[C.or," ",(v.price/100).toLocaleString(C.locale,{style:"currency",currency:v.coin})," ",C.inFull]})]}),"SUBSCRIPTION"===v.type&&(0,r.jsx)("span",{className:"text-xs",children:" + ".concat((v.recurrencePrice/100).toLocaleString(C.locale,{style:"currency",currency:v.coin})," ").concat("".concat(C.every," ").concat(v.frequencyInDays," ").concat(C.days))})]})]})]}),(0,r.jsxs)("div",{className:"flex flex-col-reverse md:flex-col",children:[(null===(d=v.checkoutBuilderConfig)||void 0===d?void 0:d.feedbacks)&&(null===(l=v.checkoutBuilderConfig)||void 0===l?void 0:l.feedbacks.length)>0&&(0,r.jsx)("div",{className:"mt-4 flex flex-col gap-2",children:(0,r.jsx)("div",{className:"grid grid-cols-1 gap-4",children:v.checkoutBuilderConfig.feedbacks.map((e,t)=>{var a;return(0,r.jsx)("div",{className:"h-max w-full rounded border-2 border-dashed border-gray-200 bg-white p-3",children:(0,r.jsx)(z.x,{id:e.id,isCheckoutBuilder:!1,description:e.description,image:null!==(a=e.image)&&void 0!==a?a:"",index:t,stars:e.stars,title:e.title},t)},t)})})}),(0,r.jsx)(i.RV,{...$,children:(0,r.jsxs)("form",{onSubmit:$.handleSubmit(onSubmit),className:"grid gap-4 lg:grid-cols-2",children:[(0,r.jsx)("div",{className:"flex h-full flex-col",children:(0,r.jsx)(FormCheckoutOne,{requiredDocumentAndPhone:v.requiredDocumentAndPhone,t:C,typeProduct:v.product.typeProduct,colorPrimary:null===(m=v.checkoutBuilderConfig)||void 0===m?void 0:m.colorPrimary,deliveryOptions:v.fretePrice?[]:v.deliveryOptions,selectedDelivery:K,setSelectedDelivery:q,coin:v.coin})}),(0,r.jsxs)("div",{className:"flex h-full flex-col",children:[(0,r.jsx)(FormCheckoutTwo,{installmentsOptions:ei,checkoutId:x.checkoutId,checkout:v,isLoading:I,total:P,cepFieldWatch:$.watch("cep"),colorPrimary:null===(h=v.checkoutBuilderConfig)||void 0===h?void 0:h.colorPrimary,fareAmount:er,t:C}),(null===(y=v.checkoutBuilderConfig)||void 0===y?void 0:y.feedbacks)&&(null===(f=v.checkoutBuilderConfig)||void 0===f?void 0:f.feedbacks.length)>0&&(0,r.jsx)("div",{className:"mt-4 flex flex-col gap-2",children:(0,r.jsx)("div",{className:"grid grid-cols-1 gap-4"})})]})]})})]})]})})}},16990:function(e,t,a){"use strict";a.r(t),a.d(t,{DropshippingCheckout:function(){return DropshippingCheckout}});var r=a(4190),n=a(4898),o=a(60827),i=a(25552),s=a(26730),d=a(88752),c=a(46760),l=a(91178),u=a.n(l),p=a(5264),m=a(83650);let h=s.z.object({name:s.z.string({required_error:"Campo obrigat\xf3rio"}).min(4,{message:"M\xednimo 3 caracteres"}).max(30,{message:"M\xe1ximo 30 caracteres"}),email:s.z.string({required_error:"Campo obrigat\xf3rio"}).email({message:"E-mail inv\xe1lido"}),phone:s.z.string().optional(),cpf:s.z.string().optional()});function FormCheckoutOne(e){var t,a;let{handleNextStep:n,step:o,colorPrimary:s,requiredDocumentAndPhone:l,t:h}=e,{register:y,control:f,setValue:v,formState:{errors:x}}=(0,d.Gc)();return(0,m.useEffect)(()=>{"pt-BR"!==h.locale&&(v("cpf","97465052033"),v("phone","99999999999"))},[h.locale,v]),(0,r.jsx)("div",{className:"flex flex-col gap-4",children:(0,r.jsxs)("div",{className:"border bg-gray-50 p-6",children:[(0,r.jsxs)("h2",{className:"mb-3 flex items-center gap-2 font-inter text-lg font-bold text-gray-700",children:[(0,r.jsx)("span",{className:"flex h-5 w-5 items-center justify-center rounded-full text-center text-xs text-white",style:{backgroundColor:s||"#000000"},children:"1"}),h.personalData]}),(0,r.jsx)("p",{className:"mb-4 text-sm text-[#666666]",children:h.emailText}),1===o&&(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsx)(i.II,{label:h.fullName,maxLength:30,inputClassName:"min-h-[50px]",labelClassName:"font-semibold",error:null===(t=x.name)||void 0===t?void 0:t.message,...y("name")}),(0,r.jsx)(i.II,{label:"E-mail",type:"email",inputClassName:"min-h-[50px]",labelClassName:"font-semibold",error:null===(a=x.email)||void 0===a?void 0:a.message,...y("email")}),l&&"pt-BR"===h.locale&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Qr,{name:"cpf",control:f,render:e=>{var t;let{field:a}=e;return(0,r.jsx)(c.C,{label:"CPF",mask:"999.999.999-99",inputClassName:"min-h-[50px]",labelClassName:"font-semibold",placeholder:"000.000.000-00",onChange:e=>a.onChange(e.target.value),value:a.value,error:null===(t=x.cpf)||void 0===t?void 0:t.message})}}),(0,r.jsx)(d.Qr,{name:"phone",control:f,render:e=>{let{field:t}=e;return(0,r.jsxs)("div",{className:"gap-0",children:[(0,r.jsx)("label",{htmlFor:"",className:"mb-2 inline-block font-semibold",children:h.phone}),(0,r.jsxs)("div",{className:"".concat(x.phone&&"border-red"," flex min-h-[50px] items-center justify-center rounded-md border"),children:[(0,r.jsx)("div",{className:"relative z-0 flex h-full min-h-[50px] w-full max-w-[60px] items-center justify-center border-r bg-gray-100",children:(0,r.jsx)("span",{className:"font-medium",children:"+55"})}),(0,r.jsx)(u(),{mask:"(99) 99999-9999",maskChar:null,maskPlaceholder:null,type:"tel",placeholder:"(00) 00000-0000",onChange:e=>t.onChange(e.target.value),value:t.value,className:"h-full min-h-[50px] flex-1 border-none bg-transparent p-0 px-2 text-sm focus:border-none focus:outline-none focus:ring-0"})]}),x.phone&&(0,r.jsx)("span",{className:"mt-1 text-xs text-red",children:x.phone.message})]})}})]}),(0,r.jsxs)(i.zx,{className:"mt-4 flex h-14 items-center justify-center gap-2 font-inter text-lg font-bold hover:bg-green",style:{backgroundColor:s||"#06c167"},type:"button",onClick:()=>n(),children:[h.continue," ",(0,r.jsx)(p.Rgz,{})]})]})]})})}var y=a(46234),f=a(6808),v=a(25797),x=a(32806),C=a(82380),g=a(37357),P=a(48824);let w=s.ZP.object({paymentMethod:s.ZP.enum(["PIX","CREDIT_CARD","BILLET"]),cardNumber:s.ZP.string().optional(),cardExpiration:s.ZP.string().optional(),cardCvv:s.ZP.string().optional(),cardName:s.ZP.string().optional(),cardInstallment:s.ZP.number().optional(),orderBumpsIds:s.ZP.array(s.ZP.string()).optional()});function FormCheckoutTwo(e){var t,a;let{checkout:n,isLoading:o,installmentsOptions:s,step:l,typeProduct:u,onSubmit:p,colorPrimary:h,t:w}=e,[E,I]=(0,m.useState)("PIX"),{register:b,setValue:A,control:N,formState:{errors:D},handleSubmit:R}=(0,d.Gc)(),T=[{icon:(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("svg",{width:"56",height:"21",viewBox:"0 0 56 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsxs)("g",{clipPath:"url(#clip0_1193_2161)",children:[(0,r.jsx)("path",{d:"M23.1182 19.1341V7.7101C23.1182 5.6045 24.8206 3.9021 26.9262 3.9021H30.2974C32.3918 3.9021 34.083 5.6045 34.083 7.6989V10.1293C34.083 12.2349 32.3806 13.9373 30.275 13.9373H25.515",stroke:"#939598",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M35.0234 3.91333H36.4906C37.353 3.91333 38.0474 4.60773 38.0474 5.47013V14.0045",stroke:"#939598",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M37.7341 2.59174L37.0733 1.93094C36.9053 1.76294 36.9053 1.49414 37.0733 1.33734L37.7341 0.676537C37.9021 0.508537 38.1709 0.508537 38.3277 0.676537L38.9885 1.33734C39.1565 1.50534 39.1565 1.77414 38.9885 1.93094L38.3277 2.59174C38.1597 2.74854 37.8909 2.74854 37.7341 2.59174Z",fill:"#32BCAD"}),(0,r.jsx)("path",{d:"M40.8477 3.9021H42.2925C43.0429 3.9021 43.7485 4.1933 44.2861 4.7309L47.6797 8.1245C48.1165 8.5613 48.8333 8.5613 49.2701 8.1245L52.6525 4.7421C53.1789 4.2157 53.8957 3.9133 54.6461 3.9133H55.8221",stroke:"#939598",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M40.8477 13.9262H42.2925C43.0429 13.9262 43.7485 13.635 44.2861 13.0974L47.6797 9.70382C48.1165 9.26702 48.8333 9.26702 49.2701 9.70382L52.6525 13.0862C53.1789 13.6126 53.8957 13.915 54.6461 13.915H55.8221",stroke:"#939598",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M14.4714 16.0877C13.7434 16.0877 13.0602 15.8077 12.545 15.2925L9.76739 12.5149C9.57699 12.3245 9.22979 12.3245 9.03939 12.5149L6.2506 15.3037C5.7354 15.8189 5.05219 16.0989 4.32419 16.0989H3.77539L7.30339 19.6269C8.40099 20.7245 10.193 20.7245 11.2906 19.6269L14.8298 16.0877H14.4714Z",fill:"#32BCAD"}),(0,r.jsx)("path",{d:"M4.31293 6.25403C5.04093 6.25403 5.72413 6.53403 6.23933 7.04923L9.02813 9.83803C9.22973 10.0396 9.55453 10.0396 9.75613 9.83803L12.5449 7.06043C13.0601 6.54523 13.7433 6.26523 14.4713 6.26523H14.8073L11.2681 2.72603C10.1705 1.62843 8.37853 1.62843 7.28093 2.72603L3.75293 6.25403H4.31293Z",fill:"#32BCAD"}),(0,r.jsx)("path",{d:"M17.7308 9.18849L15.5916 7.04929C15.5468 7.07169 15.4908 7.08289 15.4348 7.08289H14.4604C13.9564 7.08289 13.4636 7.28449 13.1164 7.64289L10.3388 10.4205C10.0812 10.6781 9.73404 10.8125 9.39804 10.8125C9.05084 10.8125 8.71483 10.6781 8.45723 10.4205L5.66844 7.63169C5.31004 7.27329 4.81724 7.07169 4.32444 7.07169H3.12604C3.07004 7.07169 3.02524 7.06049 2.98044 7.03809L0.830036 9.18849C-0.267564 10.2861 -0.267564 12.0781 0.830036 13.1757L2.96923 15.3149C3.01403 15.2925 3.05884 15.2813 3.11484 15.2813H4.31323C4.81723 15.2813 5.31003 15.0797 5.65723 14.7213L8.44604 11.9325C8.95004 11.4285 9.83484 11.4285 10.3388 11.9325L13.1164 14.7101C13.4748 15.0685 13.9676 15.2701 14.4604 15.2701H15.4348C15.4908 15.2701 15.5356 15.2813 15.5916 15.3037L17.7308 13.1645C18.8284 12.0669 18.8284 10.2861 17.7308 9.18849Z",fill:"#32BCAD"}),(0,r.jsx)("path",{d:"M26.0075 18.1599C25.8507 18.1599 25.6715 18.1934 25.4811 18.2382V18.9326C25.6043 18.9774 25.7499 18.9998 25.8843 18.9998C26.2315 18.9998 26.3995 18.8766 26.3995 18.5742C26.4107 18.2942 26.2763 18.1599 26.0075 18.1599ZM25.3691 19.459V18.0814H25.4699L25.4811 18.1374C25.6379 18.1038 25.8619 18.0479 26.0299 18.0479C26.1643 18.0479 26.2875 18.0703 26.3883 18.1486C26.5115 18.2494 26.5451 18.4062 26.5451 18.5742C26.5451 18.7534 26.4891 18.9214 26.3211 19.0222C26.2091 19.0894 26.0523 19.1118 25.9179 19.1118C25.7723 19.1118 25.6379 19.0894 25.5035 19.0446V19.4478H25.3691V19.459Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M27.4182 18.1599C27.071 18.1599 26.9142 18.2718 26.9142 18.5742C26.9142 18.8766 27.071 18.9998 27.4182 18.9998C27.7654 18.9998 27.9222 18.8878 27.9222 18.5854C27.911 18.2942 27.7654 18.1599 27.4182 18.1599ZM27.8662 19.011C27.7542 19.0894 27.5974 19.123 27.4182 19.123C27.239 19.123 27.0822 19.1006 26.9702 19.011C26.847 18.9214 26.791 18.7758 26.791 18.5854C26.791 18.4062 26.847 18.2494 26.9702 18.1599C27.0822 18.0815 27.239 18.0479 27.4182 18.0479C27.5974 18.0479 27.7542 18.0703 27.8662 18.1599C28.0006 18.2494 28.0454 18.4062 28.0454 18.5854C28.0454 18.7646 27.9894 18.9214 27.8662 19.011Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M29.5131 19.0893L29.1211 18.2493H29.1099L28.7291 19.0893H28.6283L28.2139 18.0813H28.3483L28.6955 18.9213H28.7067L29.0763 18.0813H29.1883L29.5691 18.9213H29.5803L29.9163 18.0813H30.0395L29.6251 19.0893H29.5131Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M30.7904 18.1599C30.4656 18.1599 30.3536 18.3055 30.3424 18.5071H31.2496C31.2272 18.2831 31.1152 18.1599 30.7904 18.1599ZM30.7792 19.1119C30.5888 19.1119 30.4656 19.0895 30.3648 18.9999C30.2416 18.8991 30.208 18.7535 30.208 18.5855C30.208 18.4287 30.264 18.2495 30.3984 18.1599C30.5104 18.0815 30.6448 18.0591 30.7904 18.0591C30.9248 18.0591 31.0704 18.0703 31.1936 18.1599C31.3392 18.2607 31.3728 18.4287 31.3728 18.6191H30.3424C30.3424 18.8319 30.4096 19.0111 30.8016 19.0111C30.992 19.0111 31.16 18.9775 31.3168 18.9551V19.0559C31.1488 19.0783 30.9584 19.1119 30.7792 19.1119Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M31.6973 19.0894V18.0815H31.7981L31.8093 18.1374C32.0221 18.0815 32.1229 18.0479 32.3133 18.0479H32.3245V18.1599H32.2909C32.1341 18.1599 32.0333 18.1823 31.8205 18.2383V19.0782L31.6973 19.0894Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M33.0072 18.1599C32.6824 18.1599 32.5704 18.3055 32.5592 18.5071H33.4664C33.444 18.2831 33.332 18.1599 33.0072 18.1599ZM32.996 19.1119C32.8056 19.1119 32.6824 19.0895 32.5816 18.9999C32.4584 18.8991 32.4248 18.7535 32.4248 18.5855C32.4248 18.4287 32.4808 18.2495 32.6152 18.1599C32.7272 18.0815 32.8616 18.0591 33.0072 18.0591C33.1416 18.0591 33.2872 18.0703 33.4104 18.1599C33.556 18.2607 33.5896 18.4287 33.5896 18.6191H32.5592C32.5592 18.8319 32.6264 19.0111 33.0184 19.0111C33.2088 19.0111 33.3768 18.9775 33.5336 18.9551V19.0559C33.3656 19.0783 33.1752 19.1119 32.996 19.1119Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M34.8673 18.227C34.7441 18.1822 34.5984 18.1598 34.464 18.1598C34.1169 18.1598 33.9489 18.283 33.9489 18.5854C33.9489 18.8766 34.0833 18.9998 34.352 18.9998C34.5088 18.9998 34.6881 18.9662 34.8784 18.9214V18.227H34.8673ZM34.8896 19.0894L34.8784 19.0334C34.7217 19.067 34.4976 19.123 34.3296 19.123C34.1952 19.123 34.0721 19.1006 33.9713 19.0222C33.8481 18.9214 33.8145 18.7646 33.8145 18.5966C33.8145 18.4174 33.8705 18.2494 34.0385 18.1598C34.1505 18.0926 34.3072 18.0702 34.4416 18.0702C34.576 18.0702 34.7216 18.0926 34.856 18.1374V17.6782H34.9793V19.1118L34.8896 19.0894Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M36.7146 18.1597C36.5578 18.1597 36.3786 18.1933 36.1882 18.2381V18.9325C36.3114 18.9773 36.457 18.9997 36.5914 18.9997C36.9386 18.9997 37.1066 18.8765 37.1066 18.5741C37.1066 18.2941 36.9722 18.1597 36.7146 18.1597ZM37.017 19.0221C36.905 19.0893 36.7482 19.1117 36.6138 19.1117C36.4682 19.1117 36.3114 19.0893 36.1658 19.0333L36.1546 19.0781H36.0762V17.6445H36.1994V18.1261C36.3562 18.0925 36.5802 18.0477 36.737 18.0477C36.8714 18.0477 36.9946 18.0701 37.0954 18.1485C37.2186 18.2493 37.2522 18.4061 37.2522 18.5741C37.241 18.7645 37.1738 18.9325 37.017 19.0221Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M37.3871 19.4703V19.3583C37.4431 19.3695 37.4991 19.3695 37.5327 19.3695C37.6783 19.3695 37.7679 19.3247 37.8463 19.1567L37.8799 19.0783L37.3535 18.0703H37.4879L37.9359 18.9439H37.9471L38.3727 18.0703H38.5071L37.9359 19.2015C37.8351 19.4031 37.7231 19.4703 37.5103 19.4703C37.4879 19.4815 37.4431 19.4815 37.3871 19.4703Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M40.1426 18.5069H39.7506V18.8653H40.1426C40.4114 18.8653 40.5122 18.8317 40.5122 18.6861C40.5234 18.5293 40.3778 18.5069 40.1426 18.5069ZM40.0754 17.9357H39.7618V18.2941H40.0866C40.3554 18.2941 40.4562 18.2605 40.4562 18.1149C40.445 17.9581 40.3106 17.9357 40.0754 17.9357ZM40.6802 18.9885C40.5346 19.0781 40.3666 19.0893 40.0418 19.0893H39.4482V17.7229H40.0306C40.2994 17.7229 40.4674 17.7229 40.613 17.8125C40.7138 17.8685 40.7474 17.9693 40.7474 18.0813C40.7474 18.2269 40.6914 18.3165 40.5346 18.3837V18.3949C40.7138 18.4397 40.8258 18.5293 40.8258 18.7197C40.8258 18.8429 40.781 18.9325 40.6802 18.9885Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M42.0239 18.6638C41.9007 18.6526 41.7887 18.6526 41.6655 18.6526C41.4639 18.6526 41.3855 18.6974 41.3855 18.787C41.3855 18.8766 41.4415 18.9214 41.5983 18.9214C41.7327 18.9214 41.8895 18.8878 42.0239 18.8654V18.6638ZM42.0799 19.0894L42.0687 19.0334C41.9007 19.0782 41.6991 19.123 41.5199 19.123C41.4079 19.123 41.2959 19.1118 41.2175 19.0446C41.1391 18.9886 41.1055 18.899 41.1055 18.7982C41.1055 18.6862 41.1503 18.5742 41.2735 18.5294C41.3743 18.4846 41.5199 18.4734 41.6543 18.4734C41.7551 18.4734 41.9007 18.4846 42.0239 18.4846V18.4622C42.0239 18.3054 41.9231 18.2494 41.6319 18.2494C41.5199 18.2494 41.3855 18.2606 41.2623 18.2718V18.0703C41.4079 18.0591 41.5647 18.0479 41.6991 18.0479C41.8783 18.0479 42.0575 18.0591 42.1695 18.1374C42.2815 18.2158 42.3039 18.3278 42.3039 18.4846V19.0782L42.0799 19.0894Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M43.6141 19.0895V18.5295C43.6141 18.3503 43.5245 18.2831 43.3565 18.2831C43.2333 18.2831 43.0765 18.3167 42.9421 18.3503V19.0895H42.6621V18.0815H42.8861L42.8973 18.1487C43.0765 18.1039 43.2669 18.0591 43.4349 18.0591C43.5581 18.0591 43.6813 18.0815 43.7821 18.1599C43.8605 18.2271 43.8941 18.3279 43.8941 18.4735V19.0895H43.6141Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M44.6895 19.1119C44.5551 19.1119 44.4207 19.0895 44.3199 19.0111C44.1967 18.9103 44.1631 18.7535 44.1631 18.5855C44.1631 18.4287 44.2191 18.2495 44.3647 18.1599C44.4879 18.0815 44.6447 18.0591 44.8127 18.0591C44.9247 18.0591 45.0367 18.0703 45.1711 18.0815V18.2943C45.0703 18.2831 44.9471 18.2719 44.8463 18.2719C44.5775 18.2719 44.4543 18.3503 44.4543 18.5855C44.4543 18.7983 44.5439 18.8991 44.7679 18.8991C44.8911 18.8991 45.0479 18.8767 45.1935 18.8431V19.0559C45.0255 19.0783 44.8463 19.1119 44.6895 19.1119Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M46.0109 18.2607C45.7421 18.2607 45.6301 18.3391 45.6301 18.5743C45.6301 18.7983 45.7421 18.8991 46.0109 18.8991C46.2797 18.8991 46.3917 18.8207 46.3917 18.5855C46.3917 18.3615 46.2797 18.2607 46.0109 18.2607ZM46.4925 19.0111C46.3693 19.0895 46.2125 19.1119 46.0109 19.1119C45.8093 19.1119 45.6525 19.0895 45.5293 19.0111C45.3949 18.9215 45.3389 18.7647 45.3389 18.5855C45.3389 18.4063 45.3837 18.2495 45.5293 18.1599C45.6525 18.0815 45.8093 18.0591 46.0109 18.0591C46.2125 18.0591 46.3693 18.0815 46.4925 18.1599C46.6269 18.2495 46.6829 18.4063 46.6829 18.5855C46.6829 18.7647 46.6269 18.9215 46.4925 19.0111Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M48.3062 19.1118C48.1382 19.1118 47.9478 19.0894 47.8134 18.9662C47.6454 18.8318 47.6006 18.619 47.6006 18.395C47.6006 18.1934 47.6678 17.9582 47.8806 17.8126C48.0486 17.7006 48.2502 17.6782 48.463 17.6782C48.6198 17.6782 48.7654 17.6894 48.9446 17.7006V17.947C48.799 17.9358 48.6198 17.9246 48.4854 17.9246C48.0934 17.9246 47.9366 18.0702 47.9366 18.3838C47.9366 18.7086 48.0934 18.8542 48.3734 18.8542C48.5638 18.8542 48.7654 18.8206 48.9782 18.7758V19.0222C48.7542 19.067 48.5302 19.1118 48.3062 19.1118Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M49.7844 18.227C49.5492 18.227 49.4596 18.3054 49.4484 18.4622H50.1316C50.1204 18.3054 50.0196 18.227 49.7844 18.227ZM49.7396 19.1118C49.5716 19.1118 49.426 19.0894 49.314 18.9998C49.1908 18.899 49.1572 18.7534 49.1572 18.5742C49.1572 18.4174 49.202 18.2494 49.3476 18.1486C49.4708 18.0591 49.6276 18.0479 49.7844 18.0479C49.93 18.0479 50.098 18.0591 50.2212 18.1486C50.378 18.2606 50.4004 18.4398 50.4004 18.6414H49.4484C49.4596 18.7982 49.538 18.899 49.818 18.899C49.9972 18.899 50.1876 18.8766 50.3556 18.843V19.0446C50.154 19.0782 49.9412 19.1118 49.7396 19.1118Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M51.6561 19.0895V18.5295C51.6561 18.3503 51.5665 18.2831 51.3985 18.2831C51.2753 18.2831 51.1185 18.3167 50.9841 18.3503V19.0895H50.7041V18.0815H50.9281L50.9393 18.1487C51.1185 18.1039 51.3089 18.0591 51.4769 18.0591C51.6001 18.0591 51.7233 18.0815 51.8241 18.1599C51.9025 18.2271 51.9361 18.3279 51.9361 18.4735V19.0895H51.6561Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M52.7308 19.1118C52.5964 19.1118 52.4732 19.0782 52.406 18.9662C52.3612 18.899 52.3276 18.7982 52.3276 18.6638V18.283H52.126V18.0702H52.3276L52.3612 17.7678H52.6076V18.0702H52.9996V18.283H52.6076V18.6078C52.6076 18.6862 52.6188 18.7534 52.63 18.7982C52.6636 18.8654 52.7308 18.8878 52.8092 18.8878C52.8764 18.8878 52.9548 18.8766 53.0108 18.8654V19.067C52.9324 19.1006 52.8204 19.1118 52.7308 19.1118Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M53.2803 19.0895V18.0815H53.5043L53.5155 18.1487C53.7059 18.0927 53.8403 18.0591 54.0195 18.0591H54.0531V18.2943H53.9523C53.8179 18.2943 53.7059 18.3055 53.5603 18.3503V19.0895H53.2803Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M55.0713 18.6638C54.9481 18.6526 54.8361 18.6526 54.7129 18.6526C54.5113 18.6526 54.4329 18.6974 54.4329 18.787C54.4329 18.8766 54.4889 18.9214 54.6457 18.9214C54.7801 18.9214 54.9369 18.8878 55.0713 18.8654V18.6638ZM55.1385 19.0894L55.1273 19.0334C54.9593 19.0782 54.7577 19.123 54.5785 19.123C54.4665 19.123 54.3545 19.1118 54.2761 19.0446C54.1977 18.9886 54.1641 18.899 54.1641 18.7982C54.1641 18.6862 54.2089 18.5742 54.3321 18.5294C54.4329 18.4846 54.5785 18.4734 54.7129 18.4734C54.8137 18.4734 54.9593 18.4846 55.0825 18.4846V18.4622C55.0825 18.3054 54.9817 18.2494 54.6905 18.2494C54.5785 18.2494 54.4441 18.2606 54.3209 18.2718V18.0703C54.4665 18.0591 54.6233 18.0479 54.7577 18.0479C54.9369 18.0479 55.1161 18.0591 55.2281 18.1374C55.3401 18.2158 55.3625 18.3278 55.3625 18.4846V19.0782L55.1385 19.0894Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M55.7207 17.6558H56.0007V19.0894H55.7207V17.6558Z",fill:"#939598"})]}),(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:"clip0_1193_2161",children:(0,r.jsx)("rect",{width:"56",height:"19.9136",fill:"white",transform:"translate(0 0.543213)"})})})]})}),value:"PIX",title:"PIX"},{icon:(0,r.jsx)(y.UIg,{size:17}),value:"CREDIT_CARD",title:w.creditCard},{icon:(0,r.jsx)(f.jlz,{size:20}),value:"BILLET",title:w.bankSlip}];(0,m.useEffect)(()=>{if(n.pixEnabled){I("PIX");return}if(n.creditCardEnabled){I("CREDIT_CARD");return}if(n.billetEnabled){I("BILLET");return}},[]),(0,m.useEffect)(()=>{A("paymentMethod",E)},[E,A]);let M=[w.billetText1,w.billetText2,w.billetText3];return(0,r.jsxs)("div",{className:"".concat(3===l?"border bg-white":"bg-gray-50"," flex-1 p-6"),children:[(0,r.jsxs)("h2",{className:"mb-3 flex items-center gap-2 font-inter text-lg font-bold text-gray-700",children:[(0,r.jsx)("span",{className:"flex h-5 w-5 items-center justify-center rounded-full text-center text-xs text-white",style:{backgroundColor:h||"#000000"},children:"FISICO"===u?"3":"2"}),w.payment]}),(0,r.jsx)("p",{className:"mb-4 text-sm text-[#666666]",children:w.paymentMethods}),3===l&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(C.fC,{className:"flex flex-col gap-2.5",defaultValue:"default","aria-label":"View density",children:T.map((e,t)=>{if(("CREDIT_CARD"!==e.value||n.creditCardEnabled)&&("PIX"!==e.value||n.pixEnabled)&&("BILLET"!==e.value||n.billetEnabled))return(0,r.jsxs)("div",{className:"relative flex items-center gap-1 rounded border p-3 text-sm font-bold",children:[(0,r.jsx)(C.ck,{value:e.value,className:"relative mr-1 flex h-5 w-5 items-center justify-center rounded-full border ".concat(e.value===E?'data-[state="checked"]:bg-green':""),style:{backgroundColor:e.value===E?h||"#22c55e":"transparent"},onClick:()=>I(e.value),checked:e.value===E,children:(0,r.jsx)(C.z$,{className:"absolute h-2 w-2 rounded-full bg-white"})}),(0,r.jsxs)("label",{htmlFor:"",className:"flex items-center justify-center gap-1 text-sm font-normal",children:["PIX"===e.title?"":e.title,e.icon]})]},t)})}),(0,r.jsxs)("div",{className:"mt-6 flex flex-col items-center gap-3",children:["CREDIT_CARD"===E&&n.creditCardEnabled&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Qr,{name:"cardNumber",control:N,render:e=>{var t;let{field:a}=e;return(0,r.jsx)(c.C,{label:w.cardNumber,type:"tel",className:"col-span-2 w-full",mask:"9999 9999 9999 9999",error:null===(t=D.cardNumber)||void 0===t?void 0:t.message,placeholder:"0000 0000 0000 0000",onChange:e=>a.onChange(e.target.value),value:a.value})}}),(0,r.jsx)(i.II,{className:"col-span-2 w-full",label:w.cardName,error:null===(t=D.cardName)||void 0===t?void 0:t.message,...b("cardName")}),(0,r.jsxs)("div",{className:"grid w-full grid-cols-2 gap-4",children:[(0,r.jsx)(d.Qr,{name:"cardExpiration",control:N,render:e=>{var t;let{field:a}=e;return(0,r.jsx)(c.C,{label:w.cardExpiration,error:null===(t=D.cardExpiration)||void 0===t?void 0:t.message,mask:"99/99",type:"tel",placeholder:"00/00",onChange:e=>a.onChange(e.target.value),value:a.value})}}),(0,r.jsx)(i.II,{label:"CVV",placeholder:"***",error:null===(a=D.cardCvv)||void 0===a?void 0:a.message,...b("cardCvv")})]}),"SUBSCRIPTION"!==n.type&&(0,r.jsx)(d.Qr,{name:"cardInstallment",control:N,render:e=>{var t;let{field:a}=e;return(0,r.jsx)(g.default,{label:w.installments,className:"col-span-2 w-full",error:null===(t=D.cardInstallment)||void 0===t?void 0:t.message,options:s,onChange:e=>a.onChange(e.value),value:s.find(e=>e.value==a.value)})}})]}),"BILLET"===E&&n.billetEnabled&&(0,r.jsxs)("div",{className:"col-span-2 flex flex-col gap-5",children:[(0,r.jsx)("strong",{children:w.payBillet}),M.map((e,t)=>(0,r.jsxs)("div",{className:"grid grid-cols-[auto_1fr] items-center gap-1",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)(v.KP3,{size:25})}),(0,r.jsx)("span",{className:"text-xs font-semibold text-gray-600",children:e})]},t))]}),n.product.ordersBumps.length>=1&&(0,r.jsx)(x.l,{ordersbump:n.product.ordersBumps,currency:n.coin,t:w}),(0,r.jsxs)(i.zx,{className:"mt-4 h-14 w-full flex-1 gap-2 self-center text-center font-inter text-lg font-bold hover:bg-green",style:{backgroundColor:h||"#06c167"},type:"button",isLoading:o,disabled:o,onClick:R(p),children:[(0,r.jsx)(P.C_S,{}),w.completePurchase]})]})]})]})}var E=a(43925),I=a.n(E),b=a(93158),A=a(73076),N=a(62900),D=a(72370),R=a(59386),T=a(7743),M=a(70290),S=a(3779),k=a(49320);function CheckoutOneComplete(e){let{handleChangeStep:t,t:a}=e,{getValues:n}=(0,d.Gc)();return(0,r.jsx)("div",{className:"flex cursor-pointer flex-col gap-4 hover:bg-white",onClick:()=>t(1),children:(0,r.jsxs)("div",{className:"bg-gray-50 p-6",children:[(0,r.jsxs)("h2",{className:"mb-3 flex items-center gap-2 font-inter text-lg font-bold text-green-light",children:[(0,r.jsx)(P.ETl,{className:"text-green-light"}),a.personalData]}),(0,r.jsx)("p",{className:"mb-4 text-sm text-[#666666]",children:a.emailText}),(0,r.jsxs)("div",{className:"mt-2 flex flex-col gap-1",children:[(0,r.jsx)("strong",{children:n("name")}),(0,r.jsx)("span",{children:n("email")}),(0,r.jsxs)("span",{children:["CPF: ",n("cpf")]})]})]})})}var B=a(60956),_=a(67743),j=a(63343);let L=s.z.object({cep:s.z.string({required_error:"Campo obrigat\xf3rio"}).min(7,"Campo obrigat\xf3rio").optional(),complement:s.z.string().optional().nullable(),number:s.z.string({required_error:"Campo obrigat\xf3rio"}).min(1,"Campo obrigat\xf3rio").optional(),street:s.z.string({required_error:"Campo obrigat\xf3rio"}).min(1,"Campo obrigat\xf3rio").optional(),district:s.z.string({required_error:"Campo obrigat\xf3rio"}).min(1,"Campo obrigat\xf3rio").optional(),city:s.z.string({required_error:"Campo obrigat\xf3rio"}).min(1,"Campo obrigat\xf3rio").optional(),state:s.z.string({required_error:"Campo obrigat\xf3rio"}).min(1,"Campo obrigat\xf3rio").optional()});function AddressForm(e){var t,a,n,o;let{step:s,handleNextStep:l,colorPrimary:u,deliveryOptions:h,selectedDelivery:y,setSelectedDelivery:f,coin:v,t:x}=e,[w,E]=(0,m.useState)(!1),[I,b]=(0,m.useState)(!1),{register:A,setValue:N,control:D,formState:{errors:R},watch:T}=(0,d.Gc)(),S=T("cep"),k=(0,m.useCallback)(async e=>{(0,_.Ds)(async()=>{try{let t=await j.default.get("https://viacep.com.br/ws/".concat(e,"/json/")),a=t.data;a.uf?(N("street",a.logradouro),N("district",a.bairro),N("city",a.localidade),N("state",a.uf),b(!0)):M.default.error(x.errorCepNotFound)}catch(e){M.default.error(x.errorCep)}finally{E(!0)}},500)()},[N]);return(0,m.useEffect)(()=>{b(!1),(null==S?void 0:S.length)===9&&k(S)},[S,k]),(0,m.useEffect)(()=>{h.length>0&&f(h.find(e=>e.preSelected)||h[0])},[h]),(0,r.jsxs)("div",{className:"".concat(2===s?"border bg-white":"bg-gray-50"," p-6"),children:[(0,r.jsxs)("h2",{className:"".concat(s<=2?"text-gray-700":"text-green-light"," mb-3 flex items-center gap-2 font-inter text-lg font-bold"),children:[s<=2?(0,r.jsx)("span",{className:"flex h-5 w-5 items-center justify-center rounded-full text-center text-xs text-white",style:{backgroundColor:u||"#000000"},children:"2"}):(0,r.jsx)(P.ETl,{className:"text-green-light"}),x.shipping]}),(0,r.jsx)("p",{className:"mb-4 text-sm text-[#666666]",children:x.deliveryInfo}),2===s&&(0,r.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,r.jsx)(d.Qr,{name:"cep",control:D,render:e=>{var t;let{field:a}=e;return(0,r.jsx)(c.C,{className:"col-span-2",label:"CEP",mask:"99999-999",maskChar:null,maskPlaceholder:null,required:!0,placeholder:"00000-000",onChange:a.onChange,value:a.value,error:null===(t=R.cep)||void 0===t?void 0:t.message})}}),w&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"grid grid-cols-[2fr_1fr] gap-3",children:[(0,r.jsx)(i.II,{label:x.addressStreet,required:!0,error:null===(t=R.street)||void 0===t?void 0:t.message,...A("street")}),(0,r.jsx)(i.II,{label:x.addressNumber,placeholder:"000",type:"tel",required:!0,error:null===(a=R.number)||void 0===a?void 0:a.message,...A("number")})]}),(0,r.jsxs)("div",{className:"grid grid-cols-[2fr_1fr] gap-3",children:[(0,r.jsx)(i.II,{className:"col-span-1",label:x.addressDistrict,required:!0,error:null===(n=R.district)||void 0===n?void 0:n.message,...A("district")}),(0,r.jsx)(i.II,{label:x.addressComplement,...A("complement")})]}),(0,r.jsx)(i.II,{label:x.addressCity,required:!0,error:null===(o=R.city)||void 0===o?void 0:o.message,...A("city")}),(0,r.jsx)(d.Qr,{name:"state",control:D,render:e=>{var t;let{field:a}=e;return(0,r.jsx)(g.default,{label:x.addressState,placeholder:x.enterAddressState,labelClassName:"font-normal",options:B.e5,onChange:e=>a.onChange(e.value),value:B.e5.find(e=>e.value===a.value),error:null===(t=R.state)||void 0===t?void 0:t.message})}})]}),w&&0!==h.length&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"font-medium",children:x.chooseDeliveryMethod}),(0,r.jsx)(C.fC,{className:"col-span-2 flex flex-col gap-2.5",defaultValue:"default","aria-label":"View density",children:h.map((e,t)=>(0,r.jsxs)("div",{className:"relative flex items-center gap-1 rounded border p-3 text-sm font-bold",children:[(0,r.jsx)(C.ck,{value:e.id,className:"relative mr-1 flex h-5 w-5 items-center justify-center rounded-full border ".concat(e.id===y.id?'data-[state="checked"]:bg-green':""),style:{backgroundColor:e.id===y.id?u||"#22c55e":"transparent"},onClick:()=>f(e),checked:e.id===y.id,children:(0,r.jsx)(C.z$,{className:"absolute h-2 w-2 rounded-full bg-white"})}),(0,r.jsxs)("div",{className:"flex w-full justify-between px-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:e.description+(e.preSelected?x.recommended:"")}),(0,r.jsx)("label",{className:"flex items-center gap-1 text-sm font-normal",children:e.deliveryTime})]}),(0,r.jsx)("p",{children:0!==e.fareAmount?Intl.NumberFormat(x.locale,{currency:v,style:"currency"}).format(e.fareAmount/100):x.freeShipping})]})]},t))})]}),(0,r.jsxs)(i.zx,{className:"relative z-10 mt-4 flex h-14 items-center justify-center gap-2 bg-green-light font-inter text-lg font-bold hover:bg-green",style:{backgroundColor:u||"#06c167"},type:"button",onClick:()=>{if(!I)return M.default.error(x.errorCep);l()},children:["Continue ",(0,r.jsx)(p.Rgz,{})]})]})]})}function AddressFormComplete(e){var t,a,n,o,i,s;let{handleChangeStep:c,t:l}=e,{getValues:u}=(0,d.Gc)();return(0,r.jsxs)("div",{className:"cursor-pointer bg-gray-50 p-6 hover:bg-white",onClick:()=>c(2),children:[(0,r.jsxs)("h2",{className:"mb-3 flex items-center gap-2 font-inter text-lg font-bold text-green-light",children:[(0,r.jsx)(P.ETl,{className:"text-green-light"}),l.shipping]}),(0,r.jsx)("p",{className:"mb-4 text-sm text-[#666666]",children:l.registerAddress}),(0,r.jsxs)("div",{className:"mt-2 flex flex-col gap-1",children:[(0,r.jsx)("strong",{children:l.deliveryInfo}),(0,r.jsx)("span",{children:"".concat(null!==(t=u("street"))&&void 0!==t?t:"--",", ").concat(null!==(a=u("number"))&&void 0!==a?a:"--"," - ").concat(null!==(n=u("district"))&&void 0!==n?n:"--")}),(0,r.jsx)("span",{children:"".concat(null!==(o=u("city"))&&void 0!==o?o:"--"," - ").concat(null!==(i=u("state"))&&void 0!==i?i:"--",", ").concat(null!==(s=u("cep"))&&void 0!==s?s:"--")})]})]})}var U=a(4793),z=a(18421),O=a(67408),V=a(31431),F=a(45593),G=a(85947),K=a.n(G),q=a(17267);function DropshippingCheckout(e){var t,a,i,c,l,u,p,y,f,v;let{checkout:x,params:C,t:g}=e,P=(0,m.useRef)(!1),{setTheme:E}=(0,k.F)(),[B,j]=(0,m.useState)(1),[G,W]=(0,m.useState)(x.price/100),[X,H]=(0,m.useState)(!1),[Q,Y]=(0,m.useState)(null),[J,Z]=(0,m.useState)(void 0),$=s.z.object({cep:s.z.string({required_error:g.errorRequired}).min(1,g.errorRequired),complement:s.z.string().optional().nullable(),number:s.z.string({required_error:g.errorRequired}).min(1,g.errorRequired),street:s.z.string({required_error:g.errorRequired}).min(1,g.errorRequired),district:s.z.string({required_error:g.errorRequired}).min(1,g.errorRequired),city:s.z.string({required_error:g.errorRequired}).min(1,g.errorRequired),state:s.z.string({required_error:g.errorRequired}).min(1,g.errorRequired)}),ee=(0,T.useRouter)(),et=(0,T.useSearchParams)(),ea=(0,S.useCheckoutContext)(),er=s.z.intersection(s.z.intersection(h,w),L),en=(0,d.cI)({resolver:(0,D.F)(er)}),eo=en.watch("orderBumpsIds"),ei=en.watch("cep"),es=en.watch("paymentMethod"),ed=(0,m.useMemo)(()=>{if((null==ei?void 0:ei.length)===9){if(x.fretePrice)return x.fretePrice;if(Q)return Q.fareAmount}return 0},[x.fretePrice,ei,Q]),{data:ec,refetch:el}=N.S.checkout.getInstallments.useQuery({checkoutId:x.id,orderBumpsIds:eo||[],fareAmount:ed},{enabled:"CREDIT_CARD"===es}),eu=(0,F.R)(ec,x.coin);(0,m.useEffect)(()=>{let e=0;x.product.ordersBumps.forEach(t=>{eo&&eo.includes(t.id)&&(e+=t.offer.price/100)}),W(x.price/100+e)},[eo,x]),(0,m.useEffect)(()=>{el()},[ed,eo]);let ep=N.S.useUtils(),em=N.S.checkout.purchase.useMutation({onSuccess:async e=>{if(e){if(e.upsellToken&&(document.cookie="upsellToken=".concat(e.upsellToken,"; path=/;")),H(!0),"CREDIT_CARD"===e.method&&"REJECTED"===e.status){M.default.error(g.errorCardDeclined);return}ep.checkout.getPaymentQuick.setData({id:e.paymentId},e.payment),ee.push("".concat(A._.checkoutPayment(e.paymentId),"?").concat(et.toString()))}},onError:e=>{H(!1),M.default.error(g.errorPaymentDeclined)}}),eh=N.S.checkout.tokenCreditCard.useMutation();(0,m.useEffect)(()=>{let e=0;x.product.ordersBumps.forEach(t=>{eo&&eo.includes(t.id)&&(e+=t.offer.price/100)}),W(x.price/100+e)},[eo,x]),(0,m.useEffect)(()=>{let handleBeforeUnload=e=>{e.preventDefault(),e.returnValue=""},handlePopState=()=>{x.checkoutBuilderConfig.backRedirect&&ee.push(x.checkoutBuilderConfig.backRedirect)};return history.pushState({customState:!0},"customState"),window.addEventListener("beforeunload",handleBeforeUnload),window.addEventListener("popstate",handlePopState),()=>{window.removeEventListener("beforeunload",handleBeforeUnload),window.removeEventListener("popstate",handlePopState)}},[ee]);let onSubmit=async e=>{H(!0);try{var t,a,r,n,o,i;let s=null;if(x.requiredDocumentAndPhone&&!e.cpf)return M.default.error(g.errorInvalidCpf),H(!1);if(x.requiredDocumentAndPhone&&!e.phone)return M.default.error(g.errorInvalidPhone),H(!1);if(x.requiredDocumentAndPhone&&e.cpf&&!R.wn.isValid(e.cpf))return M.default.error(g.errorInvalidCpf),H(!1);if(x.requiredDocumentAndPhone||(e.phone="99999999999",e.cpf=(0,_.sR)()),!e.phone||!e.cpf)return M.default.error(g.errorPhoneAndCpf),H(!1);if(e.name.length<=0)return M.default.error(g.errorFullName),H(!1);if((null==x?void 0:x.product.typeProduct)==="FISICO")try{$.parse({cep:e.cep,complement:e.complement,number:e.number,street:e.street,district:e.district,city:e.city,state:e.state})}catch(e){M.default.error(g.errorAddress),H(!1);return}if("CREDIT_CARD"===e.paymentMethod){let a=b.W.find(e=>e.providerName===x.provider.paymentProvider);if(!a){M.default.error(g.errorPaymentNotConfigured),H(!1);return}let r=new a(x.provider.gatewayPublicKey,"",null),n=null===(t=x.product.createdByUser.receivers.find(e=>"IUGU"===e.receiverProvider))||void 0===t?void 0:t.receiverId,o={cardNumber:e.cardNumber.replaceAll(" ",""),cvv:e.cardCvv,expMonth:e.cardExpiration.split("/")[0],expYear:e.cardExpiration.split("/")[1],holderName:e.cardName,holderDocument:e.cpf.replaceAll(".","").replaceAll("-","")},i=await r.createCardToken({...o,receiverId:n});if(s={token:i,installments:e.cardInstallment},"SUBSCRIPTION"===x.type){let e=await eh.mutateAsync({...o,expMonth:parseInt(o.expMonth),expYear:parseInt(o.expYear)});s.creditCardId=e,s.installments=1}}let d=new Date;d.setSeconds(d.getSeconds()+30),document.cookie="token2=undefined10; path=/; expires=".concat(d.toUTCString(),";");let c={offerId:C.checkoutId,email:e.email,name:e.name,paymentMethod:e.paymentMethod,phone:e.phone.replaceAll("(","").replaceAll(")","").replaceAll(" ","").replaceAll("-",""),creditCard:s,cep:e.cep,complement:e.complement,number:null!==(a=e.number)&&void 0!==a?a:"",street:null!==(r=e.street)&&void 0!==r?r:"",district:null!==(n=e.district)&&void 0!==n?n:"",city:null!==(o=e.city)&&void 0!==o?o:"",state:null!==(i=e.state)&&void 0!==i?i:"",orderBumpsIds:e.orderBumpsIds||[],cpf:e.cpf.replaceAll(".","").replaceAll("-",""),utmQuery:et.toString(),referer:ea.referer,affiliateId:et.get("affiliateId")||void 0,deliveryFare:x.fretePrice||(null==Q?void 0:Q.fareAmount)||0,abandonedCartId:J};"CREDIT_CARD"===e.paymentMethod&&(c.fingerPrints=[{provider:"axisbanking",value:String(window.getFingerprintSession().sessionId)}]),await em.mutateAsync(c)}catch(e){console.error(e)}H(!1)};async function handleNextStep(){let e=await en.trigger();if(e){if("DIGITAL"===x.product.typeProduct&&1===B){j(3);return}j(B+1)}}function handleChangeStep(e){j(e)}return(0,m.useEffect)(()=>{let e=et.get("nome"),t=et.get("email"),a=et.get("telefone"),r=et.get("cpf");e&&en.setValue("name",e),t&&en.setValue("email",t),a&&en.setValue("phone",a),r&&en.setValue("cpf",r)},[et]),(0,m.useEffect)(()=>{E("light")},[E]),(0,m.useEffect)(()=>{x&&!P.current&&((0,z.Gb)("InitiateCheckout",{}),P.current=!0)},[x]),(0,q.Z)({cartId:J,setCartId:Z,offerId:x.id,cartAmt:x.price,name:en.watch("name"),document:null===(t=en.watch("cpf"))||void 0===t?void 0:t.replace(/\D/g,""),email:en.watch("email"),phone:null===(a=en.watch("phone"))||void 0===a?void 0:a.replace(/\D/g,""),utmQuery:et.toString()}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("main",{className:"h-auto min-h-screen bg-gray-100",children:[(0,r.jsx)("header",{className:"sticky top-0 z-10 flex h-20 w-full items-center justify-center bg-white px-6 shadow-[0px_0px_2px_0px_rgba(204,204,204,0.5)] md:px-0",children:(0,r.jsxs)("div",{className:"flex w-full max-w-screen-xl items-center justify-between",children:[(null===(i=x.checkoutBuilderConfig)||void 0===i?void 0:i.logoTopImageURL)&&(0,r.jsx)("div",{className:"w-full max-w-[200px]",children:(0,r.jsx)(V.z,{imageURL:x.checkoutBuilderConfig.logoTopImageURL})}),(0,r.jsxs)("div",{className:"ml-auto flex items-center gap-1 text-[#898792]",children:[(0,r.jsx)(U.wU4,{size:24}),(0,r.jsxs)("div",{className:"flex flex-col items-start justify-center text-xs uppercase",children:[(0,r.jsx)("strong",{className:"text-sm font-bold leading-none",children:g.paymentData}),(0,r.jsx)("span",{children:g.secureEnvironment})]})]})]})}),(null==x?void 0:null===(c=x.checkoutBuilderConfig)||void 0===c?void 0:c.enabledBannerText)&&(0,r.jsx)("div",{className:"w-full",children:(0,r.jsx)(n.E,{text:x.checkoutBuilderConfig.bannerText,textColor:x.checkoutBuilderConfig.bannerTextColor,backgroundColor:x.checkoutBuilderConfig.bannerTextBackgroundColor})}),(0,r.jsxs)("div",{className:"mx-auto mb-6 mt-10 grid min-h-[75vh] w-full max-w-screen-xl items-start gap-8 p-4 md:my-12 md:mt-20 md:grid-cols-[2fr_1fr] md:gap-8",children:[(0,r.jsx)(d.RV,{...en,children:(0,r.jsxs)("form",{className:"grid items-start gap-8 md:grid-cols-2",children:[(null===(l=x.checkoutBuilderConfig)||void 0===l?void 0:l.headerImageURL)&&(0,r.jsx)("div",{className:"col-span-1 w-full sm:col-span-3",children:(0,r.jsx)(o.Y,{imageURL:x.checkoutBuilderConfig.headerImageURL})}),(0,r.jsxs)("section",{className:"flex flex-col gap-4",children:[1===B&&(0,r.jsx)(FormCheckoutOne,{requiredDocumentAndPhone:x.requiredDocumentAndPhone,handleNextStep:handleNextStep,step:B,colorPrimary:null===(u=x.checkoutBuilderConfig)||void 0===u?void 0:u.colorPrimary,t:g}),B>1&&(0,r.jsx)(CheckoutOneComplete,{handleChangeStep:handleChangeStep,t:g}),B<=2&&"FISICO"===x.product.typeProduct&&(0,r.jsx)(AddressForm,{step:B,handleNextStep:handleNextStep,colorPrimary:null===(p=x.checkoutBuilderConfig)||void 0===p?void 0:p.colorPrimary,deliveryOptions:x.fretePrice?[]:x.deliveryOptions,selectedDelivery:Q,setSelectedDelivery:Y,coin:x.coin,t:g}),B>2&&"FISICO"===x.product.typeProduct&&(0,r.jsx)(AddressFormComplete,{handleChangeStep:handleChangeStep,t:g})]}),B<=3&&(0,r.jsx)(FormCheckoutTwo,{installmentsOptions:eu,checkout:x,isLoading:X,step:B,typeProduct:x.product.typeProduct,onSubmit:onSubmit,colorPrimary:null===(y=x.checkoutBuilderConfig)||void 0===y?void 0:y.colorPrimary,t:g})]})}),(0,r.jsxs)("section",{className:"flex w-full flex-col bg-white p-4 shadow-[0px_0px_14.4px_0px_#0000001A]",children:[(0,r.jsx)("p",{className:"text-xl font-semibold text-black",children:g.summary}),(0,r.jsxs)("div",{className:"mt-8 flex flex-col gap-3 rounded-lg bg-[#F4F6F8] p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm",children:g.subtotal}),(0,r.jsx)("span",{className:"text-sm",children:Intl.NumberFormat(g.locale,{currency:x.coin,style:"currency"}).format(G)})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-sm",children:g.shipping}),(0,r.jsx)("span",{className:"text-sm",children:Intl.NumberFormat(g.locale,{currency:x.coin,style:"currency"}).format(ed/100)})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("strong",{className:"text-base",children:g.total}),(0,r.jsx)("strong",{className:"text-lg",children:Intl.NumberFormat(g.locale,{currency:x.coin,style:"currency"}).format(G+ed/100)})]}),"SUBSCRIPTION"===x.type&&(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("span",{className:"text-sm",children:[g.nextCharge," "]}),(0,r.jsxs)("div",{className:"flex flex-col items-end",children:[(0,r.jsx)("span",{className:"text-sm",children:Intl.NumberFormat(g.locale,{currency:x.coin,style:"currency"}).format(x.recurrencePrice/100)}),(0,r.jsx)("span",{className:"text-sm",children:K()().add(x.frequencyInDays,"days").format(g.dateFormat)})]})]})]}),(0,r.jsxs)("div",{className:"mt-4 flex w-full flex-col items-center justify-between gap-2",children:[(0,r.jsxs)("div",{className:"flex w-full items-start justify-between gap-2",children:[x.product.image&&(0,r.jsx)("div",{className:"relative flex h-20 w-20 items-center justify-center overflow-hidden object-fill",children:(0,r.jsx)(I(),{src:x.product.image,alt:x.product.name,width:1e3,height:1e3,className:"absolute inset-0"})}),(0,r.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,r.jsx)("span",{className:"text-sm text-[#666666]",children:x.product.name}),(0,r.jsx)("strong",{children:Intl.NumberFormat(g.locale,{currency:x.coin,style:"currency"}).format(x.price/100)})]})]}),x.product.ordersBumps.map((e,t)=>{if(eo&&eo.includes(e.id))return(0,r.jsx)("div",{className:"mt-4 flex w-full flex-col items-center justify-between gap-2",children:(0,r.jsxs)("div",{className:"flex w-full items-start justify-between gap-2",children:[e.offer.product.image&&(0,r.jsx)("div",{className:"relative flex h-20 w-20 items-center justify-center overflow-hidden object-fill",children:(0,r.jsx)(I(),{src:e.offer.product.image,alt:e.offer.product.title,width:1e3,height:1e3,className:"absolute inset-0"})}),(0,r.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,r.jsx)("span",{className:"text-sm text-[#666666]",children:e.offer.title}),(0,r.jsx)("strong",{children:Intl.NumberFormat(g.locale,{currency:x.coin,style:"currency"}).format(e.offer.price/100)})]})]})},t)}),(null===(f=x.checkoutBuilderConfig)||void 0===f?void 0:f.feedbacks)&&(null===(v=x.checkoutBuilderConfig)||void 0===v?void 0:v.feedbacks.length)>0&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("hr",{className:"my-3 w-full border border-gray-100"}),(0,r.jsx)("div",{className:"flex w-full flex-col items-center gap-4",children:x.checkoutBuilderConfig.feedbacks.map((e,t)=>{var a;return(0,r.jsx)(O.x,{id:e.id,isCheckoutBuilder:!1,description:e.description,image:null!==(a=e.image)&&void 0!==a?a:"",index:t,stars:e.stars,title:e.title},t)})})]})]})]})]})]}),(0,r.jsx)("footer",{className:"relative z-10 flex items-center justify-center bg-gray-100",children:(0,r.jsxs)("div",{className:"flex w-full max-w-screen-xl flex-col items-center justify-center border-t p-8",children:[(0,r.jsx)("p",{className:"mb-2",children:g.paymentMethods}),"pt-BR"===g.locale&&(0,r.jsxs)("div",{className:"mb-8 flex flex-wrap items-center justify-center gap-3",children:[x.pixEnabled&&(0,r.jsx)(I(),{src:"/card-pix.svg",alt:"logo",width:44,height:29}),x.billetEnabled&&(0,r.jsx)(I(),{src:"/payment-methods/card-billet.png",alt:"logo",width:39,height:26}),x.creditCardEnabled&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(I(),{src:"/payment-methods/card-amex.png",alt:"logo",width:39,height:26}),(0,r.jsx)(I(),{src:"/payment-methods/card-aura.png",alt:"logo",width:39,height:26}),(0,r.jsx)(I(),{src:"/payment-methods/card-diners.png",alt:"logo",width:39,height:26}),(0,r.jsx)(I(),{src:"/payment-methods/card-discover.png",alt:"logo",width:39,height:26}),(0,r.jsx)(I(),{src:"/payment-methods/card-elo.png",alt:"logo",width:39,height:26}),(0,r.jsx)(I(),{src:"/payment-methods/card-hiper.png",alt:"logo",width:39,height:26}),(0,r.jsx)(I(),{src:"/payment-methods/card-hipercard.png",alt:"logo",width:39,height:26}),(0,r.jsx)(I(),{src:"/payment-methods/card-mastercard.png",alt:"logo",width:39,height:26}),(0,r.jsx)(I(),{src:"/payment-methods/card-visa.png",alt:"logo",width:39,height:26})]})]}),(0,r.jsxs)("div",{className:"mt-6 flex items-center gap-1 text-[#898792]",children:[(0,r.jsx)(U.wU4,{size:24}),(0,r.jsxs)("div",{className:"flex flex-col items-start justify-center text-xs uppercase",children:[(0,r.jsx)("strong",{className:"text-sm font-bold leading-none",children:g.payment}),(0,r.jsx)("span",{children:g.secureEnvironment})]})]})]})})]})}},7680:function(e,t,a){"use strict";a.r(t),a.d(t,{VegaCheckout:function(){return VegaCheckout}});var r=a(4190),n=a(4898),o=a(60827),i=a(25552),s=a(26730),d=a(88752),c=a(46760),l=a(60956),u=a(37357),p=a(67743),m=a(63343),h=a(70290),y=a(83650),f=a(82380);let v=s.z.object({name:s.z.string({required_error:"Campo obrigat\xf3rio"}).min(4,{message:"M\xednimo 3 caracteres"}).max(30,{message:"M\xe1ximo 30 caracteres"}),email:s.z.string({required_error:"Campo obrigat\xf3rio"}).email({message:"E-mail inv\xe1lido"}),phone:s.z.string({required_error:"Campo obrigat\xf3rio"}).optional(),cpf:s.z.string({required_error:"Campo obrigat\xf3rio"}).optional(),cep:s.z.string().optional(),complement:s.z.string().optional(),number:s.z.string().optional(),street:s.z.string().optional(),district:s.z.string().optional(),city:s.z.string().optional(),state:s.z.string().optional()});function FormCheckoutOne(e){var t,a;let{typeProduct:n,colorPrimary:o,t:s,deliveryOptions:v,selectedDelivery:x,setSelectedDelivery:C,coin:g,requiredDocumentAndPhone:P}=e,[w,E]=(0,y.useState)(!1),{register:I,setValue:b,control:A,formState:{errors:N},watch:D}=(0,d.Gc)(),R=D("cep");(0,y.useEffect)(()=>{"pt-BR"!==s.locale&&(b("cpf","97465052033"),b("phone","99999999999"))},[s.locale,b]),(0,y.useEffect)(()=>{v.length>0&&C(v.find(e=>e.preSelected)||v[0])},[v]);let T=(0,y.useCallback)(async e=>{(0,p.Ds)(async()=>{try{let t=await m.default.get("https://viacep.com.br/ws/".concat(e,"/json/")),a=t.data;a.uf?(b("street",a.logradouro),b("district",a.bairro),b("city",a.localidade),b("state",a.uf)):h.default.error(s.errorCepNotFound)}catch(e){h.default.error(s.errorCep)}finally{E(!0)}},500)()},[b,s.errorCep,s.errorCepNotFound]);return(null==R?void 0:R.length)===9&&T(R),(0,r.jsxs)("div",{className:"rounded-xl bg-white p-6",children:[(0,r.jsx)("h2",{className:"mb-3 font-inter text-lg text-gray-600",children:s.personalData}),(0,r.jsxs)("div",{className:"grid grid-cols-none gap-y-2 md:grid-cols-2 md:grid-rows-2 md:gap-x-6 md:gap-y-4",children:[(0,r.jsx)(i.II,{label:"E-mail",type:"email",inputClassName:"min-h-[50px]",labelClassName:"font-semibold",error:null===(t=N.email)||void 0===t?void 0:t.message,...I("email")}),P&&"pt-BR"===s.locale&&(0,r.jsx)(d.Qr,{name:"phone",control:A,render:e=>{var t;let{field:a}=e;return(0,r.jsx)(c.C,{label:s.phone,mask:"(99) 99999-9999",inputClassName:"min-h-[50px]",labelClassName:"font-semibold",type:"tel",placeholder:"(00) 00000-0000",onChange:e=>a.onChange(e.target.value),value:a.value,error:null===(t=N.phone)||void 0===t?void 0:t.message})}}),(0,r.jsx)(i.II,{label:s.fullName,maxLength:30,inputClassName:"min-h-[50px]",labelClassName:"font-semibold",error:null===(a=N.name)||void 0===a?void 0:a.message,...I("name")}),P&&"pt-BR"===s.locale&&(0,r.jsx)(d.Qr,{name:"cpf",control:A,render:e=>{var t;let{field:a}=e;return(0,r.jsx)(c.C,{label:"CPF",mask:"999.999.999-99",inputClassName:"min-h-[50px]",labelClassName:"font-semibold",placeholder:"000.000.000-00",type:"tel",onChange:e=>a.onChange(e.target.value),value:a.value,error:null===(t=N.cpf)||void 0===t?void 0:t.message})}})]}),"FISICO"===n&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("h2",{className:"my-4 font-inter text-lg text-gray-600",children:s.deliveryInfo}),(0,r.jsxs)("div",{className:"grid grid-cols-none gap-y-2 md:grid-cols-2 md:gap-x-6 md:gap-y-4",children:[(0,r.jsx)(d.Qr,{name:"cep",control:A,render:e=>{var t;let{field:a}=e;return(0,r.jsx)(c.C,{label:"CEP",mask:"99999-999",type:"tel",placeholder:"00000-000",onChange:a.onChange,value:a.value,error:null===(t=N.cep)||void 0===t?void 0:t.message,className:"md:col-span-2"})}}),w&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.II,{label:s.addressStreet,...I("street")}),(0,r.jsx)(i.II,{label:s.addressNumber,placeholder:"000",type:"tel",...I("number")}),(0,r.jsx)(i.II,{className:"md:col-span-1",label:s.addressDistrict,...I("district")}),(0,r.jsx)(i.II,{label:s.addressComplement,...I("complement")}),(0,r.jsx)(i.II,{label:s.addressCity,...I("city")}),(0,r.jsx)(d.Qr,{name:"state",control:A,render:e=>{let{field:t}=e;return(0,r.jsx)(u.default,{label:s.addressState,labelClassName:"font-normal",options:l.e5,onChange:e=>t.onChange(e.value),value:l.e5.find(e=>e.value===t.value)})}})]}),w&&0!==v.length&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"col-span-2 font-medium",children:s.chooseDeliveryMethod}),(0,r.jsx)(f.fC,{className:"col-span-2 flex flex-col gap-2.5",defaultValue:"default","aria-label":"View density",children:v.map((e,t)=>(0,r.jsxs)("div",{className:"relative flex items-center gap-1 rounded border p-3 text-sm font-bold",children:[(0,r.jsx)(f.ck,{value:e.id,className:"relative mr-1 flex h-5 w-5 items-center justify-center rounded-full border ".concat(e.id===x.id?'data-[state="checked"]:bg-green':""),style:{backgroundColor:e.id===x.id?o||"#22c55e":"transparent"},onClick:()=>C(e),checked:e.id===x.id,children:(0,r.jsx)(f.z$,{className:"absolute h-2 w-2 rounded-full bg-white"})}),(0,r.jsxs)("div",{className:"flex w-full justify-between px-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:e.description+(e.preSelected?s.recommended:"")}),(0,r.jsx)("label",{className:"flex items-center gap-1 text-sm font-normal",children:e.deliveryTime})]}),(0,r.jsx)("p",{children:0!==e.fareAmount?Intl.NumberFormat(s.locale,{currency:g,style:"currency"}).format(e.fareAmount/100):s.freeShipping})]})]},t))})]})]})]})]})}var x=a(46234),C=a(6808),g=a(25797),P=a(32806);let w=s.ZP.object({paymentMethod:s.ZP.enum(["PIX","CREDIT_CARD","BILLET"]),cardNumber:s.ZP.string().optional(),cardExpiration:s.ZP.string().optional(),cardCvv:s.ZP.string().optional(),cardName:s.ZP.string().optional(),cardInstallment:s.ZP.number().optional(),orderBumpsIds:s.ZP.array(s.ZP.string()).optional()});function FormCheckoutTwo(e){var t,a;let{t:n}=e,[o,s]=(0,y.useState)("CREDIT_CARD"),{register:l,setValue:p,control:m,formState:{errors:h}}=(0,d.Gc)();(0,y.useEffect)(()=>{if(e.checkout.pixEnabled){s("PIX");return}if(e.checkout.creditCardEnabled){s("CREDIT_CARD");return}if(e.checkout.billetEnabled){s("BILLET");return}},[]),(0,y.useEffect)(()=>{p("paymentMethod",o)},[o,p]);let f=[{icon:(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("svg",{width:"56",height:"21",viewBox:"0 0 56 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsxs)("g",{clipPath:"url(#clip0_1193_2161)",children:[(0,r.jsx)("path",{d:"M23.1182 19.1341V7.7101C23.1182 5.6045 24.8206 3.9021 26.9262 3.9021H30.2974C32.3918 3.9021 34.083 5.6045 34.083 7.6989V10.1293C34.083 12.2349 32.3806 13.9373 30.275 13.9373H25.515",stroke:"#939598",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M35.0234 3.91333H36.4906C37.353 3.91333 38.0474 4.60773 38.0474 5.47013V14.0045",stroke:"#939598",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M37.7341 2.59174L37.0733 1.93094C36.9053 1.76294 36.9053 1.49414 37.0733 1.33734L37.7341 0.676537C37.9021 0.508537 38.1709 0.508537 38.3277 0.676537L38.9885 1.33734C39.1565 1.50534 39.1565 1.77414 38.9885 1.93094L38.3277 2.59174C38.1597 2.74854 37.8909 2.74854 37.7341 2.59174Z",fill:"#32BCAD"}),(0,r.jsx)("path",{d:"M40.8477 3.9021H42.2925C43.0429 3.9021 43.7485 4.1933 44.2861 4.7309L47.6797 8.1245C48.1165 8.5613 48.8333 8.5613 49.2701 8.1245L52.6525 4.7421C53.1789 4.2157 53.8957 3.9133 54.6461 3.9133H55.8221",stroke:"#939598",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M40.8477 13.9262H42.2925C43.0429 13.9262 43.7485 13.635 44.2861 13.0974L47.6797 9.70382C48.1165 9.26702 48.8333 9.26702 49.2701 9.70382L52.6525 13.0862C53.1789 13.6126 53.8957 13.915 54.6461 13.915H55.8221",stroke:"#939598",strokeMiterlimit:"10",strokeLinecap:"round",strokeLinejoin:"round"}),(0,r.jsx)("path",{d:"M14.4714 16.0877C13.7434 16.0877 13.0602 15.8077 12.545 15.2925L9.76739 12.5149C9.57699 12.3245 9.22979 12.3245 9.03939 12.5149L6.2506 15.3037C5.7354 15.8189 5.05219 16.0989 4.32419 16.0989H3.77539L7.30339 19.6269C8.40099 20.7245 10.193 20.7245 11.2906 19.6269L14.8298 16.0877H14.4714Z",fill:"#32BCAD"}),(0,r.jsx)("path",{d:"M4.31293 6.25403C5.04093 6.25403 5.72413 6.53403 6.23933 7.04923L9.02813 9.83803C9.22973 10.0396 9.55453 10.0396 9.75613 9.83803L12.5449 7.06043C13.0601 6.54523 13.7433 6.26523 14.4713 6.26523H14.8073L11.2681 2.72603C10.1705 1.62843 8.37853 1.62843 7.28093 2.72603L3.75293 6.25403H4.31293Z",fill:"#32BCAD"}),(0,r.jsx)("path",{d:"M17.7308 9.18849L15.5916 7.04929C15.5468 7.07169 15.4908 7.08289 15.4348 7.08289H14.4604C13.9564 7.08289 13.4636 7.28449 13.1164 7.64289L10.3388 10.4205C10.0812 10.6781 9.73404 10.8125 9.39804 10.8125C9.05084 10.8125 8.71483 10.6781 8.45723 10.4205L5.66844 7.63169C5.31004 7.27329 4.81724 7.07169 4.32444 7.07169H3.12604C3.07004 7.07169 3.02524 7.06049 2.98044 7.03809L0.830036 9.18849C-0.267564 10.2861 -0.267564 12.0781 0.830036 13.1757L2.96923 15.3149C3.01403 15.2925 3.05884 15.2813 3.11484 15.2813H4.31323C4.81723 15.2813 5.31003 15.0797 5.65723 14.7213L8.44604 11.9325C8.95004 11.4285 9.83484 11.4285 10.3388 11.9325L13.1164 14.7101C13.4748 15.0685 13.9676 15.2701 14.4604 15.2701H15.4348C15.4908 15.2701 15.5356 15.2813 15.5916 15.3037L17.7308 13.1645C18.8284 12.0669 18.8284 10.2861 17.7308 9.18849Z",fill:"#32BCAD"}),(0,r.jsx)("path",{d:"M26.0075 18.1599C25.8507 18.1599 25.6715 18.1934 25.4811 18.2382V18.9326C25.6043 18.9774 25.7499 18.9998 25.8843 18.9998C26.2315 18.9998 26.3995 18.8766 26.3995 18.5742C26.4107 18.2942 26.2763 18.1599 26.0075 18.1599ZM25.3691 19.459V18.0814H25.4699L25.4811 18.1374C25.6379 18.1038 25.8619 18.0479 26.0299 18.0479C26.1643 18.0479 26.2875 18.0703 26.3883 18.1486C26.5115 18.2494 26.5451 18.4062 26.5451 18.5742C26.5451 18.7534 26.4891 18.9214 26.3211 19.0222C26.2091 19.0894 26.0523 19.1118 25.9179 19.1118C25.7723 19.1118 25.6379 19.0894 25.5035 19.0446V19.4478H25.3691V19.459Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M27.4182 18.1599C27.071 18.1599 26.9142 18.2718 26.9142 18.5742C26.9142 18.8766 27.071 18.9998 27.4182 18.9998C27.7654 18.9998 27.9222 18.8878 27.9222 18.5854C27.911 18.2942 27.7654 18.1599 27.4182 18.1599ZM27.8662 19.011C27.7542 19.0894 27.5974 19.123 27.4182 19.123C27.239 19.123 27.0822 19.1006 26.9702 19.011C26.847 18.9214 26.791 18.7758 26.791 18.5854C26.791 18.4062 26.847 18.2494 26.9702 18.1599C27.0822 18.0815 27.239 18.0479 27.4182 18.0479C27.5974 18.0479 27.7542 18.0703 27.8662 18.1599C28.0006 18.2494 28.0454 18.4062 28.0454 18.5854C28.0454 18.7646 27.9894 18.9214 27.8662 19.011Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M29.5131 19.0893L29.1211 18.2493H29.1099L28.7291 19.0893H28.6283L28.2139 18.0813H28.3483L28.6955 18.9213H28.7067L29.0763 18.0813H29.1883L29.5691 18.9213H29.5803L29.9163 18.0813H30.0395L29.6251 19.0893H29.5131Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M30.7904 18.1599C30.4656 18.1599 30.3536 18.3055 30.3424 18.5071H31.2496C31.2272 18.2831 31.1152 18.1599 30.7904 18.1599ZM30.7792 19.1119C30.5888 19.1119 30.4656 19.0895 30.3648 18.9999C30.2416 18.8991 30.208 18.7535 30.208 18.5855C30.208 18.4287 30.264 18.2495 30.3984 18.1599C30.5104 18.0815 30.6448 18.0591 30.7904 18.0591C30.9248 18.0591 31.0704 18.0703 31.1936 18.1599C31.3392 18.2607 31.3728 18.4287 31.3728 18.6191H30.3424C30.3424 18.8319 30.4096 19.0111 30.8016 19.0111C30.992 19.0111 31.16 18.9775 31.3168 18.9551V19.0559C31.1488 19.0783 30.9584 19.1119 30.7792 19.1119Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M31.6973 19.0894V18.0815H31.7981L31.8093 18.1374C32.0221 18.0815 32.1229 18.0479 32.3133 18.0479H32.3245V18.1599H32.2909C32.1341 18.1599 32.0333 18.1823 31.8205 18.2383V19.0782L31.6973 19.0894Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M33.0072 18.1599C32.6824 18.1599 32.5704 18.3055 32.5592 18.5071H33.4664C33.444 18.2831 33.332 18.1599 33.0072 18.1599ZM32.996 19.1119C32.8056 19.1119 32.6824 19.0895 32.5816 18.9999C32.4584 18.8991 32.4248 18.7535 32.4248 18.5855C32.4248 18.4287 32.4808 18.2495 32.6152 18.1599C32.7272 18.0815 32.8616 18.0591 33.0072 18.0591C33.1416 18.0591 33.2872 18.0703 33.4104 18.1599C33.556 18.2607 33.5896 18.4287 33.5896 18.6191H32.5592C32.5592 18.8319 32.6264 19.0111 33.0184 19.0111C33.2088 19.0111 33.3768 18.9775 33.5336 18.9551V19.0559C33.3656 19.0783 33.1752 19.1119 32.996 19.1119Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M34.8673 18.227C34.7441 18.1822 34.5984 18.1598 34.464 18.1598C34.1169 18.1598 33.9489 18.283 33.9489 18.5854C33.9489 18.8766 34.0833 18.9998 34.352 18.9998C34.5088 18.9998 34.6881 18.9662 34.8784 18.9214V18.227H34.8673ZM34.8896 19.0894L34.8784 19.0334C34.7217 19.067 34.4976 19.123 34.3296 19.123C34.1952 19.123 34.0721 19.1006 33.9713 19.0222C33.8481 18.9214 33.8145 18.7646 33.8145 18.5966C33.8145 18.4174 33.8705 18.2494 34.0385 18.1598C34.1505 18.0926 34.3072 18.0702 34.4416 18.0702C34.576 18.0702 34.7216 18.0926 34.856 18.1374V17.6782H34.9793V19.1118L34.8896 19.0894Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M36.7146 18.1597C36.5578 18.1597 36.3786 18.1933 36.1882 18.2381V18.9325C36.3114 18.9773 36.457 18.9997 36.5914 18.9997C36.9386 18.9997 37.1066 18.8765 37.1066 18.5741C37.1066 18.2941 36.9722 18.1597 36.7146 18.1597ZM37.017 19.0221C36.905 19.0893 36.7482 19.1117 36.6138 19.1117C36.4682 19.1117 36.3114 19.0893 36.1658 19.0333L36.1546 19.0781H36.0762V17.6445H36.1994V18.1261C36.3562 18.0925 36.5802 18.0477 36.737 18.0477C36.8714 18.0477 36.9946 18.0701 37.0954 18.1485C37.2186 18.2493 37.2522 18.4061 37.2522 18.5741C37.241 18.7645 37.1738 18.9325 37.017 19.0221Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M37.3871 19.4703V19.3583C37.4431 19.3695 37.4991 19.3695 37.5327 19.3695C37.6783 19.3695 37.7679 19.3247 37.8463 19.1567L37.8799 19.0783L37.3535 18.0703H37.4879L37.9359 18.9439H37.9471L38.3727 18.0703H38.5071L37.9359 19.2015C37.8351 19.4031 37.7231 19.4703 37.5103 19.4703C37.4879 19.4815 37.4431 19.4815 37.3871 19.4703Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M40.1426 18.5069H39.7506V18.8653H40.1426C40.4114 18.8653 40.5122 18.8317 40.5122 18.6861C40.5234 18.5293 40.3778 18.5069 40.1426 18.5069ZM40.0754 17.9357H39.7618V18.2941H40.0866C40.3554 18.2941 40.4562 18.2605 40.4562 18.1149C40.445 17.9581 40.3106 17.9357 40.0754 17.9357ZM40.6802 18.9885C40.5346 19.0781 40.3666 19.0893 40.0418 19.0893H39.4482V17.7229H40.0306C40.2994 17.7229 40.4674 17.7229 40.613 17.8125C40.7138 17.8685 40.7474 17.9693 40.7474 18.0813C40.7474 18.2269 40.6914 18.3165 40.5346 18.3837V18.3949C40.7138 18.4397 40.8258 18.5293 40.8258 18.7197C40.8258 18.8429 40.781 18.9325 40.6802 18.9885Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M42.0239 18.6638C41.9007 18.6526 41.7887 18.6526 41.6655 18.6526C41.4639 18.6526 41.3855 18.6974 41.3855 18.787C41.3855 18.8766 41.4415 18.9214 41.5983 18.9214C41.7327 18.9214 41.8895 18.8878 42.0239 18.8654V18.6638ZM42.0799 19.0894L42.0687 19.0334C41.9007 19.0782 41.6991 19.123 41.5199 19.123C41.4079 19.123 41.2959 19.1118 41.2175 19.0446C41.1391 18.9886 41.1055 18.899 41.1055 18.7982C41.1055 18.6862 41.1503 18.5742 41.2735 18.5294C41.3743 18.4846 41.5199 18.4734 41.6543 18.4734C41.7551 18.4734 41.9007 18.4846 42.0239 18.4846V18.4622C42.0239 18.3054 41.9231 18.2494 41.6319 18.2494C41.5199 18.2494 41.3855 18.2606 41.2623 18.2718V18.0703C41.4079 18.0591 41.5647 18.0479 41.6991 18.0479C41.8783 18.0479 42.0575 18.0591 42.1695 18.1374C42.2815 18.2158 42.3039 18.3278 42.3039 18.4846V19.0782L42.0799 19.0894Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M43.6141 19.0895V18.5295C43.6141 18.3503 43.5245 18.2831 43.3565 18.2831C43.2333 18.2831 43.0765 18.3167 42.9421 18.3503V19.0895H42.6621V18.0815H42.8861L42.8973 18.1487C43.0765 18.1039 43.2669 18.0591 43.4349 18.0591C43.5581 18.0591 43.6813 18.0815 43.7821 18.1599C43.8605 18.2271 43.8941 18.3279 43.8941 18.4735V19.0895H43.6141Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M44.6895 19.1119C44.5551 19.1119 44.4207 19.0895 44.3199 19.0111C44.1967 18.9103 44.1631 18.7535 44.1631 18.5855C44.1631 18.4287 44.2191 18.2495 44.3647 18.1599C44.4879 18.0815 44.6447 18.0591 44.8127 18.0591C44.9247 18.0591 45.0367 18.0703 45.1711 18.0815V18.2943C45.0703 18.2831 44.9471 18.2719 44.8463 18.2719C44.5775 18.2719 44.4543 18.3503 44.4543 18.5855C44.4543 18.7983 44.5439 18.8991 44.7679 18.8991C44.8911 18.8991 45.0479 18.8767 45.1935 18.8431V19.0559C45.0255 19.0783 44.8463 19.1119 44.6895 19.1119Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M46.0109 18.2607C45.7421 18.2607 45.6301 18.3391 45.6301 18.5743C45.6301 18.7983 45.7421 18.8991 46.0109 18.8991C46.2797 18.8991 46.3917 18.8207 46.3917 18.5855C46.3917 18.3615 46.2797 18.2607 46.0109 18.2607ZM46.4925 19.0111C46.3693 19.0895 46.2125 19.1119 46.0109 19.1119C45.8093 19.1119 45.6525 19.0895 45.5293 19.0111C45.3949 18.9215 45.3389 18.7647 45.3389 18.5855C45.3389 18.4063 45.3837 18.2495 45.5293 18.1599C45.6525 18.0815 45.8093 18.0591 46.0109 18.0591C46.2125 18.0591 46.3693 18.0815 46.4925 18.1599C46.6269 18.2495 46.6829 18.4063 46.6829 18.5855C46.6829 18.7647 46.6269 18.9215 46.4925 19.0111Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M48.3062 19.1118C48.1382 19.1118 47.9478 19.0894 47.8134 18.9662C47.6454 18.8318 47.6006 18.619 47.6006 18.395C47.6006 18.1934 47.6678 17.9582 47.8806 17.8126C48.0486 17.7006 48.2502 17.6782 48.463 17.6782C48.6198 17.6782 48.7654 17.6894 48.9446 17.7006V17.947C48.799 17.9358 48.6198 17.9246 48.4854 17.9246C48.0934 17.9246 47.9366 18.0702 47.9366 18.3838C47.9366 18.7086 48.0934 18.8542 48.3734 18.8542C48.5638 18.8542 48.7654 18.8206 48.9782 18.7758V19.0222C48.7542 19.067 48.5302 19.1118 48.3062 19.1118Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M49.7844 18.227C49.5492 18.227 49.4596 18.3054 49.4484 18.4622H50.1316C50.1204 18.3054 50.0196 18.227 49.7844 18.227ZM49.7396 19.1118C49.5716 19.1118 49.426 19.0894 49.314 18.9998C49.1908 18.899 49.1572 18.7534 49.1572 18.5742C49.1572 18.4174 49.202 18.2494 49.3476 18.1486C49.4708 18.0591 49.6276 18.0479 49.7844 18.0479C49.93 18.0479 50.098 18.0591 50.2212 18.1486C50.378 18.2606 50.4004 18.4398 50.4004 18.6414H49.4484C49.4596 18.7982 49.538 18.899 49.818 18.899C49.9972 18.899 50.1876 18.8766 50.3556 18.843V19.0446C50.154 19.0782 49.9412 19.1118 49.7396 19.1118Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M51.6561 19.0895V18.5295C51.6561 18.3503 51.5665 18.2831 51.3985 18.2831C51.2753 18.2831 51.1185 18.3167 50.9841 18.3503V19.0895H50.7041V18.0815H50.9281L50.9393 18.1487C51.1185 18.1039 51.3089 18.0591 51.4769 18.0591C51.6001 18.0591 51.7233 18.0815 51.8241 18.1599C51.9025 18.2271 51.9361 18.3279 51.9361 18.4735V19.0895H51.6561Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M52.7308 19.1118C52.5964 19.1118 52.4732 19.0782 52.406 18.9662C52.3612 18.899 52.3276 18.7982 52.3276 18.6638V18.283H52.126V18.0702H52.3276L52.3612 17.7678H52.6076V18.0702H52.9996V18.283H52.6076V18.6078C52.6076 18.6862 52.6188 18.7534 52.63 18.7982C52.6636 18.8654 52.7308 18.8878 52.8092 18.8878C52.8764 18.8878 52.9548 18.8766 53.0108 18.8654V19.067C52.9324 19.1006 52.8204 19.1118 52.7308 19.1118Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M53.2803 19.0895V18.0815H53.5043L53.5155 18.1487C53.7059 18.0927 53.8403 18.0591 54.0195 18.0591H54.0531V18.2943H53.9523C53.8179 18.2943 53.7059 18.3055 53.5603 18.3503V19.0895H53.2803Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M55.0713 18.6638C54.9481 18.6526 54.8361 18.6526 54.7129 18.6526C54.5113 18.6526 54.4329 18.6974 54.4329 18.787C54.4329 18.8766 54.4889 18.9214 54.6457 18.9214C54.7801 18.9214 54.9369 18.8878 55.0713 18.8654V18.6638ZM55.1385 19.0894L55.1273 19.0334C54.9593 19.0782 54.7577 19.123 54.5785 19.123C54.4665 19.123 54.3545 19.1118 54.2761 19.0446C54.1977 18.9886 54.1641 18.899 54.1641 18.7982C54.1641 18.6862 54.2089 18.5742 54.3321 18.5294C54.4329 18.4846 54.5785 18.4734 54.7129 18.4734C54.8137 18.4734 54.9593 18.4846 55.0825 18.4846V18.4622C55.0825 18.3054 54.9817 18.2494 54.6905 18.2494C54.5785 18.2494 54.4441 18.2606 54.3209 18.2718V18.0703C54.4665 18.0591 54.6233 18.0479 54.7577 18.0479C54.9369 18.0479 55.1161 18.0591 55.2281 18.1374C55.3401 18.2158 55.3625 18.3278 55.3625 18.4846V19.0782L55.1385 19.0894Z",fill:"#939598"}),(0,r.jsx)("path",{d:"M55.7207 17.6558H56.0007V19.0894H55.7207V17.6558Z",fill:"#939598"})]}),(0,r.jsx)("defs",{children:(0,r.jsx)("clipPath",{id:"clip0_1193_2161",children:(0,r.jsx)("rect",{width:"56",height:"19.9136",fill:"white",transform:"translate(0 0.543213)"})})})]})}),value:"PIX",title:""},{icon:(0,r.jsx)(x.UIg,{size:17}),value:"CREDIT_CARD",title:n.creditCard},{icon:(0,r.jsx)(C.jlz,{size:20}),value:"BILLET",title:n.bankSlip}],v=[n.billetText1,n.billetText2,n.billetText3];return(0,r.jsxs)("div",{className:"rounded-xl bg-white p-6",children:[(0,r.jsx)("h2",{className:"mb-3 font-inter text-lg text-gray-600",children:n.paymentData}),(0,r.jsx)("div",{className:"flex flex-col gap-3 sm:flex-row",children:f.map((t,a)=>{if(("CREDIT_CARD"!==t.value||e.checkout.creditCardEnabled)&&("PIX"!==t.value||e.checkout.pixEnabled)&&("BILLET"!==t.value||e.checkout.billetEnabled))return(0,r.jsxs)("button",{type:"button",className:"flex w-full items-center justify-center gap-1 rounded p-3 text-lg font-bold ".concat(o===t.value?"border-2":"border"),style:{borderColor:o===t.value?e.colorPrimary||"#3b82f6":"#d1d5db"},onClick:()=>s(t.value),children:[t.icon,t.title]},a)})}),(0,r.jsxs)("div",{className:"mt-6 flex flex-col gap-3 sm:grid sm:grid-cols-2 sm:gap-4 lg:gap-5",children:["CREDIT_CARD"===o&&e.checkout.creditCardEnabled&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Qr,{name:"cardNumber",control:m,render:e=>{var t;let{field:a}=e;return(0,r.jsx)(c.C,{label:n.cardNumber,type:"tel",className:"col-span-2",mask:"9999 9999 9999 9999",error:null===(t=h.cardNumber)||void 0===t?void 0:t.message,placeholder:"0000 0000 0000 0000",onChange:e=>a.onChange(e.target.value),value:a.value})}}),(0,r.jsx)(d.Qr,{name:"cardExpiration",control:m,render:e=>{var t;let{field:a}=e;return(0,r.jsx)(c.C,{label:n.cardExpiration,error:null===(t=h.cardExpiration)||void 0===t?void 0:t.message,mask:"99/99",type:"tel",placeholder:"00/00",onChange:e=>a.onChange(e.target.value),value:a.value})}}),(0,r.jsx)(i.II,{label:"CVV",placeholder:"***",error:null===(t=h.cardCvv)||void 0===t?void 0:t.message,...l("cardCvv")}),(0,r.jsx)(i.II,{className:"col-span-2",label:n.cardName,error:null===(a=h.cardName)||void 0===a?void 0:a.message,...l("cardName")}),"SUBSCRIPTION"!==e.checkout.type&&(0,r.jsx)(d.Qr,{name:"cardInstallment",control:m,render:t=>{var a;let{field:o}=t;return(0,r.jsx)(u.default,{label:n.installments,className:"col-span-2",error:null===(a=h.cardInstallment)||void 0===a?void 0:a.message,options:e.installmentsOptions,onChange:e=>o.onChange(e.value),value:e.installmentsOptions.find(e=>e.value==o.value)})}})]}),"PIX"===o&&e.checkout.pixEnabled&&(0,r.jsx)("div",{className:"col-span-2 mt-3 rounded-md border p-6",children:(0,r.jsx)("span",{className:"text-gray-400 md:text-lg",children:n.pixSecureEnvironment})}),"BILLET"===o&&e.checkout.billetEnabled&&(0,r.jsxs)("div",{className:"col-span-2 flex flex-col gap-5",children:[(0,r.jsx)("strong",{children:n.payBillet}),v.map((e,t)=>(0,r.jsxs)("div",{className:"grid grid-cols-[auto_1fr] items-center gap-1",children:[(0,r.jsx)(g.KP3,{size:25}),(0,r.jsx)("span",{className:"text-xs font-semibold text-gray-600",children:e})]},t))]}),e.checkout.product.ordersBumps.length>=1&&(0,r.jsx)(P.l,{ordersbump:e.checkout.product.ordersBumps,currency:e.checkout.coin,t:n}),(0,r.jsx)(i.zx,{className:"h-16 w-full self-end font-inter text-lg font-bold uppercase md:col-start-2",color:e.colorPrimary?void 0:"success",style:{backgroundColor:e.colorPrimary||""},type:"submit",isLoading:e.isLoading,disabled:e.isLoading,children:"BILLET"===o?n.payWithBillet:"PIX"===o?n.payWithPix:n.payWithCC})]})]})}var E=a(31466),I=a(44801),b=a(43925),A=a.n(b),N=a(93158),D=a(73076),R=a(62900),T=a(72370),M=a(59386),S=a(7743),k=a(3779),B=a(49320),_=a(18421),j=a(67408),L=a(31431),U=a(85947),z=a.n(U),O=a(45593),V=a(17267);function VegaCheckout(e){var t,a,i,c,l,u,m,f,x,C,g,P;let{checkout:b,params:U,t:F}=e,{setTheme:G}=(0,B.F)(),K=(0,y.useRef)(!1),[q,W]=(0,y.useState)(b.price/100),[X,H]=(0,y.useState)(!1),[Q,Y]=(0,y.useState)(null),[J,Z]=(0,y.useState)(void 0),[$]=(0,E.i)(),ee=(0,S.useRouter)(),et=(0,S.useSearchParams)(),ea=(0,k.useCheckoutContext)(),er=s.z.object({cep:s.z.string({required_error:F.errorRequired}).min(1,F.errorRequired),complement:s.z.string().optional().nullable(),number:s.z.string({required_error:F.errorRequired}).min(1,F.errorRequired),street:s.z.string({required_error:F.errorRequired}).min(1,F.errorRequired),district:s.z.string({required_error:F.errorRequired}).min(1,F.errorRequired),city:s.z.string({required_error:F.errorRequired}).min(1,F.errorRequired),state:s.z.string({required_error:F.errorRequired}).min(1,F.errorRequired)}),en=(0,d.cI)({resolver:(0,T.F)(s.z.intersection(v,w))}),eo=en.watch("orderBumpsIds"),ei=en.watch("cep"),es=en.watch("paymentMethod"),ed=(0,y.useMemo)(()=>{if((null==ei?void 0:ei.length)===9){if(b.fretePrice)return b.fretePrice;if(Q)return Q.fareAmount}return 0},[b.fretePrice,ei,Q]),ec=R.S.checkout.tokenCreditCard.useMutation(),{data:el,refetch:eu}=R.S.checkout.getInstallments.useQuery({checkoutId:b.id,orderBumpsIds:eo||[],fareAmount:ed},{enabled:"CREDIT_CARD"===es}),ep=(0,O.R)(el,b.coin);(0,y.useEffect)(()=>{let e=0;b.product.ordersBumps.forEach(t=>{eo&&eo.includes(t.id)&&(e+=t.offer.price/100)}),W(b.price/100+e)},[eo,b]),(0,y.useEffect)(()=>{let handleBeforeUnload=e=>{e.preventDefault(),e.returnValue=""},handlePopState=()=>{b.checkoutBuilderConfig.backRedirect&&ee.push(b.checkoutBuilderConfig.backRedirect)};return history.pushState({customState:!0},"customState"),window.addEventListener("beforeunload",handleBeforeUnload),window.addEventListener("popstate",handlePopState),()=>{window.removeEventListener("beforeunload",handleBeforeUnload),window.removeEventListener("popstate",handlePopState)}},[ee]),(0,y.useEffect)(()=>{eu()},[ed,eo]);let em=R.S.useUtils(),eh=R.S.checkout.purchase.useMutation({onSuccess:async e=>{if(e){if(e.upsellToken&&(document.cookie="upsellToken=".concat(e.upsellToken,"; path=/;")),H(!0),"CREDIT_CARD"===e.method&&"REJECTED"===e.status){h.default.error(F.errorCardDeclined);return}em.checkout.getPaymentQuick.setData({id:e.paymentId},e.payment),ee.push("".concat(D._.checkoutPayment(e.paymentId),"?").concat(et.toString()))}},onError:e=>{H(!1),h.default.error(F.errorPaymentDeclined)}});(0,y.useEffect)(()=>{let e=0;b.product.ordersBumps.forEach(t=>{eo&&eo.includes(t.id)&&(e+=t.offer.price/100)}),W(b.price/100+e)},[eo,b]);let onSubmit=async e=>{H(!0);try{var t,a,r,n,o,i;let s=null;if(b.requiredDocumentAndPhone&&!e.cpf)return h.default.error(F.errorInvalidCpf),H(!1);if(b.requiredDocumentAndPhone&&!e.phone)return h.default.error(F.errorInvalidPhone),H(!1);if(b.requiredDocumentAndPhone&&e.cpf&&!M.wn.isValid(e.cpf))return h.default.error(F.errorInvalidCpf),H(!1);if(b.requiredDocumentAndPhone||(e.phone="99999999999",e.cpf=(0,p.sR)()),!e.phone||!e.cpf)return h.default.error(F.errorPhoneAndCpf),H(!1);if(e.name.length<=0)return h.default.error(F.errorFullName),H(!1);if((null==b?void 0:b.product.typeProduct)==="FISICO")try{er.parse({cep:e.cep,complement:e.complement,number:e.number,street:e.street,district:e.district,city:e.city,state:e.state})}catch(e){h.default.error(F.errorAddress),H(!1);return}if("CREDIT_CARD"===e.paymentMethod){let a=N.W.find(e=>e.providerName===b.provider.paymentProvider);if(!a){h.default.error(F.errorPaymentNotConfigured),H(!1);return}let r=new a(b.provider.gatewayPublicKey,"",null),n=null===(t=b.product.createdByUser.receivers.find(e=>"IUGU"===e.receiverProvider))||void 0===t?void 0:t.receiverId,o={cardNumber:e.cardNumber.replaceAll(" ",""),cvv:e.cardCvv,expMonth:e.cardExpiration.split("/")[0],expYear:e.cardExpiration.split("/")[1],holderName:e.cardName,holderDocument:e.cpf.replaceAll(".","").replaceAll("-","")},i=await r.createCardToken({...o,receiverId:n});if(s={token:i,installments:e.cardInstallment},"SUBSCRIPTION"===b.type){let e=await ec.mutateAsync({...o,expMonth:parseInt(o.expMonth),expYear:parseInt(o.expYear)});s.creditCardId=e,s.installments=1}}let d=new Date;d.setSeconds(d.getSeconds()+30),document.cookie="token2=undefined10; path=/; expires=".concat(d.toUTCString(),";");let c={offerId:U.checkoutId,email:e.email,name:e.name,paymentMethod:e.paymentMethod,phone:e.phone.replaceAll("(","").replaceAll(")","").replaceAll(" ","").replaceAll("-",""),creditCard:s,cep:e.cep,complement:e.complement,number:null!==(a=e.number)&&void 0!==a?a:"",street:null!==(r=e.street)&&void 0!==r?r:"",district:null!==(n=e.district)&&void 0!==n?n:"",city:null!==(o=e.city)&&void 0!==o?o:"",state:null!==(i=e.state)&&void 0!==i?i:"",orderBumpsIds:e.orderBumpsIds||[],cpf:e.cpf.replaceAll(".","").replaceAll("-",""),utmQuery:et.toString(),referer:ea.referer,affiliateId:et.get("affiliateId")||void 0,deliveryFare:b.fretePrice||(null==Q?void 0:Q.fareAmount)||0,abandonedCartId:J};"CREDIT_CARD"===e.paymentMethod&&(c.fingerPrints=[{provider:"axisbanking",value:String(window.getFingerprintSession().sessionId)}]),await eh.mutateAsync(c)}catch(e){console.error(e)}H(!1)};return(0,y.useEffect)(()=>{let e=et.get("nome"),t=et.get("email"),a=et.get("telefone"),r=et.get("cpf");e&&en.setValue("name",e),t&&en.setValue("email",t),a&&en.setValue("phone",a),r&&en.setValue("cpf",r)},[et]),(0,y.useEffect)(()=>{G("light")},[G]),(0,y.useEffect)(()=>{b&&!K.current&&((0,_.Gb)("InitiateCheckout",{}),K.current=!0)},[b]),(0,V.Z)({cartId:J,setCartId:Z,offerId:b.id,cartAmt:b.price,name:en.watch("name"),document:null===(t=en.watch("cpf"))||void 0===t?void 0:t.replace(/\D/g,""),email:en.watch("email"),phone:null===(a=en.watch("phone"))||void 0===a?void 0:a.replace(/\D/g,""),utmQuery:et.toString()}),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("main",{className:"bg-gray-100",children:[(null===(i=b.checkoutBuilderConfig)||void 0===i?void 0:i.logoTopImageURL)&&(0,r.jsx)("div",{className:"w-full border bg-white p-7 shadow",children:(0,r.jsx)("div",{className:"w-full max-w-[200px]",children:(0,r.jsx)(L.z,{imageURL:b.checkoutBuilderConfig.logoTopImageURL})})}),(null===(c=b.checkoutBuilderConfig)||void 0===c?void 0:c.headerImageURL)&&(0,r.jsx)("div",{className:"w-full md:col-span-8",children:(0,r.jsx)(o.Y,{imageURL:b.checkoutBuilderConfig.headerImageURL})}),(null==b?void 0:null===(l=b.checkoutBuilderConfig)||void 0===l?void 0:l.enabledBannerText)&&(0,r.jsx)("div",{className:"w-full",children:(0,r.jsx)(n.E,{text:b.checkoutBuilderConfig.bannerText,textColor:b.checkoutBuilderConfig.bannerTextColor,backgroundColor:b.checkoutBuilderConfig.bannerTextBackgroundColor})}),(0,r.jsxs)("div",{className:"md:gap-13 mx-auto my-6 grid min-h-[75vh] w-full max-w-[1080px] items-start gap-7 p-4 md:my-12 md:grid-cols-12",children:[(0,r.jsx)(d.RV,{...en,children:(0,r.jsxs)("form",{onSubmit:en.handleSubmit(onSubmit),className:"flex w-full flex-col gap-7 md:col-span-8",children:[(0,r.jsx)(FormCheckoutOne,{requiredDocumentAndPhone:b.requiredDocumentAndPhone,typeProduct:b.product.typeProduct,colorPrimary:null===(u=b.checkoutBuilderConfig)||void 0===u?void 0:u.colorPrimary,deliveryOptions:b.fretePrice?[]:b.deliveryOptions,selectedDelivery:Q,setSelectedDelivery:Y,coin:b.coin,t:F}),(0,r.jsx)(FormCheckoutTwo,{installmentsOptions:ep,checkoutId:U.checkoutId,checkout:b,isLoading:X,colorPrimary:null===(m=b.checkoutBuilderConfig)||void 0===m?void 0:m.colorPrimary,t:F})]})}),(0,r.jsxs)("aside",{className:"row-start-1 flex w-full flex-col items-center justify-center md:sticky md:inset-6 md:col-span-4 md:row-start-auto",children:[(0,r.jsxs)("section",{className:"flex w-full flex-col rounded-lg bg-white p-4",children:["d51a5ae2-c0da-45c3-8eec-406fe936b0ac"!==b.platformId&&(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"font-inter text-lg leading-none text-gray-600",children:F.yourCart}),(0,r.jsx)("span",{className:"flex aspect-square h-6 w-6 items-center justify-center rounded-full font-bold leading-none text-white",style:{backgroundColor:(null===(f=b.checkoutBuilderConfig)||void 0===f?void 0:f.colorPrimary)||"#0762d1"},children:"1"})]}),(0,r.jsxs)("div",{className:"mt-4 flex w-full flex-col items-center justify-between gap-2 border-b pb-4",children:[(0,r.jsxs)("div",{className:"flex w-full items-start justify-between gap-2",children:[b.product.image&&(0,r.jsx)("div",{className:"relative flex h-12 w-12 items-center justify-center overflow-hidden object-fill",children:(0,r.jsx)(A(),{src:b.product.image,alt:b.product.name,width:1e3,height:1e3,className:"absolute inset-0"})}),(0,r.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,r.jsx)("span",{className:"font-semibold",children:b.product.name}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-400",children:[(0,r.jsx)("span",{children:b.product.description}),(0,r.jsxs)("span",{children:["1 ",F.unit]})]})]})]}),b.product.ordersBumps.map((e,t)=>{if(eo&&eo.includes(e.id))return(0,r.jsxs)("div",{className:"flex w-full items-start justify-between gap-2",children:[e.offer.product.image&&(0,r.jsx)("div",{className:"relative flex h-12 w-12 items-center justify-center overflow-hidden object-fill",children:(0,r.jsx)(A(),{src:e.offer.product.image,alt:e.offer.product.title,width:1e3,height:1e3,className:"absolute inset-0"})}),(0,r.jsxs)("div",{className:"flex flex-1 flex-col",children:[(0,r.jsx)("span",{className:"font-semibold",children:e.offer.title}),(0,r.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-400",children:[(0,r.jsx)("span",{children:F.unitCost}),(0,r.jsx)("span",{children:Intl.NumberFormat(F.locale,{currency:b.coin,style:"currency"}).format(e.offer.price/100)})]})]})]},t)})]}),(0,r.jsxs)("div",{className:"mt-2 flex items-center justify-between border-b pb-2",children:[(0,r.jsx)("span",{children:F.subtotal}),(0,r.jsx)("span",{children:Intl.NumberFormat(F.locale,{currency:b.coin,style:"currency"}).format(q)})]}),ed>0&&(null==ei?void 0:ei.length)===9&&(0,r.jsxs)("div",{className:"mt-2 flex items-center justify-between border-b pb-2",children:[(0,r.jsx)("span",{children:F.shipping}),(0,r.jsx)("span",{children:Intl.NumberFormat(F.locale,{currency:b.coin,style:"currency"}).format(ed/100)})]}),(0,r.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,r.jsx)("span",{className:"text-lg",children:F.total}),(0,r.jsx)("strong",{className:"text-lg",children:Intl.NumberFormat(F.locale,{currency:b.coin,style:"currency"}).format(q+ed/100)})]}),"SUBSCRIPTION"===b.type&&(0,r.jsxs)("div",{className:"mt-2 flex items-center justify-between border-t pt-2",children:[(0,r.jsx)("span",{children:F.nextCharge}),(0,r.jsxs)("div",{className:"flex flex-col items-end",children:[(0,r.jsx)("span",{children:Intl.NumberFormat(F.locale,{currency:b.coin,style:"currency"}).format(b.recurrencePrice/100)}),(0,r.jsx)("span",{children:z()().add(b.frequencyInDays,"days").format(F.dateFormat)})]})]})]}),(null===(x=b.checkoutBuilderConfig)||void 0===x?void 0:x.feedbacks)&&$>768&&(null===(C=b.checkoutBuilderConfig)||void 0===C?void 0:C.feedbacks.length)>0&&(0,r.jsx)("div",{className:"mt-4 flex w-full flex-col gap-2",children:(0,r.jsx)("div",{className:"grid w-full grid-cols-1 gap-4",children:b.checkoutBuilderConfig.feedbacks.map((e,t)=>{var a;return(0,r.jsx)("div",{className:"h-max w-full rounded border border-gray-200 bg-white p-3",children:(0,r.jsx)(j.x,{id:e.id,isCheckoutBuilder:!1,description:e.description,image:null!==(a=e.image)&&void 0!==a?a:"",index:t,stars:e.stars,title:e.title},t)},t)})})}),$>768&&(0,r.jsxs)("button",{className:"duration-400 mt-6 inline-flex items-center justify-center rounded-2xl bg-white px-6 py-2 text-xs font-bold text-gray-600 transition hover:shadow-[0_0_7px_rgba(46,133,236,.3)]",children:[(0,r.jsx)(I.LM2,{size:22,className:"mr-1 text-[#41C286]"}),F.secureEnvironment]})]}),(null===(g=b.checkoutBuilderConfig)||void 0===g?void 0:g.feedbacks)&&$<=768&&(null===(P=b.checkoutBuilderConfig)||void 0===P?void 0:P.feedbacks.length)>0&&(0,r.jsx)("div",{className:"mt-4 flex w-full flex-col gap-2",children:(0,r.jsx)("div",{className:"grid w-full grid-cols-1 gap-4",children:b.checkoutBuilderConfig.feedbacks.map((e,t)=>{var a;return(0,r.jsx)("div",{className:"h-max w-full rounded border border-gray-200 bg-white p-3",children:(0,r.jsx)(j.x,{id:e.id,isCheckoutBuilder:!1,description:e.description,image:null!==(a=e.image)&&void 0!==a?a:"",index:t,stars:e.stars,title:e.title},t)},t)})})})]})]}),(0,r.jsxs)("footer",{className:"flex flex-col items-center justify-center p-6",children:[(0,r.jsx)("p",{className:"text-md",children:F.paymentMethods}),(0,r.jsx)(A(),{src:"/card-pix.svg",alt:"PIX logo",width:44,height:29,className:"mt-2"}),$<768&&(0,r.jsxs)("button",{className:"duration-400 mt-6 inline-flex items-center justify-center rounded-2xl bg-white px-6 py-2 text-xs font-bold text-gray-600 transition hover:shadow-[0_0_7px_rgba(46,133,236,.3)]",children:[(0,r.jsx)(I.LM2,{size:22,className:"mr-1 text-[#41C286]"}),F.secureEnvironment]})]})]})}},3779:function(e,t,a){"use strict";a.r(t),a.d(t,{CheckoutContextProvider:function(){return CheckoutContextProvider},useCheckoutContext:function(){return useCheckoutContext}});var r=a(4190),n=a(83650);let o=(0,n.createContext)(void 0),useCheckoutContext=()=>{let e=(0,n.useContext)(o);if(!e)throw Error("useCheckoutContext must be used within a CheckoutContextProvider");return e},CheckoutContextProvider=e=>{let{referer:t,children:a}=e;return(0,r.jsx)(o.Provider,{value:{referer:t},children:a})}},95704:function(e,t,a){"use strict";a.r(t),a.d(t,{PixelScripts:function(){return PixelScripts}});var r=a(4190),n=a(83650),o=a(78236),i=a.n(o);function PixelScripts(e){let{checkout:t}=e,a=(0,n.useMemo)(()=>t.product.facebookPixel.pixels&&t.product.facebookPixel.pixels.map((e,t)=>{let{pixelId:a}=e;if("string"==typeof a)return(0,r.jsx)(i(),{strategy:"afterInteractive",id:"facebook-pixel-".concat(t),children:"\n                  !function(f,b,e,v,n,t,s)\n                  {if(f.fbq)return;n=f.fbq=function(){n.callMethod?\n                  n.callMethod.apply(n,arguments):n.queue.push(arguments)};\n                  if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';\n                  n.queue=[];t=b.createElement(e);t.async=!0;\n                  t.src=v;s=b.getElementsByTagName(e)[0];\n                  s.parentNode.insertBefore(t,s)}(window, document,'script',\n                  'https://connect.facebook.net/en_US/fbevents.js');\n                  fbq('init', '".concat(a,"');\n                  fbq('track', 'PageView');\n                ")},t)}),[t.product.facebookPixel.pixels]),o=(0,n.useMemo)(()=>t.product.googleAnalyticsId&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(i(),{strategy:"afterInteractive",id:"google-analytics-pixel",children:"\n              window.dataLayer = window.dataLayer || [];\n              function gtag(){dataLayer.push(arguments);}\n              gtag('js', new Date());\n              gtag('config', '".concat(t.product.googleAnalyticsId,"');\n            ")})}),[t.product.googleAnalyticsId]),s=(0,n.useMemo)(()=>t.product.googleAdsId&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i(),{strategy:"afterInteractive",id:"googleads-pixel-1",src:"https://www.googletagmanager.com/gtag/js?id=".concat(t.product.googleAdsId),async:!0}),(0,r.jsx)(i(),{strategy:"afterInteractive",id:"googleads-pixel-2",children:"\n              window.dataLayer = window.dataLayer || [];\n              function gtag(){dataLayer.push(arguments);}\n              gtag('js', new Date());\n              gtag('config', '".concat(t.product.googleAdsId,"');\n              gtag('event', 'conversion', {'send_to': '").concat(t.product.googleAdsConversionApiId,"'});\n            ")})]}),[t.product.googleAdsId]),d=(0,n.useMemo)(()=>t.product.tiktokPixel.pixels&&t.product.tiktokPixel.pixels.map((e,t)=>{let{pixelId:a}=e;if("string"==typeof a)return(0,r.jsx)(i(),{strategy:"afterInteractive",id:"tiktok-pixel-".concat(t),children:"\n                  !function(w,d,t){\n                    var s=d.createElement(t),f=d.getElementsByTagName(t)[0];\n                    s.async=1;s.src='https://analytics.tiktok.com/i18n/pixel/sdk.js?sdkid=".concat(a,"';\n                    f.parentNode.insertBefore(s,f);\n                  }(window, document, 'script');\n                ")},t)}),[t.product.tiktokPixel.pixels]),c=(0,n.useMemo)(()=>t.product.kwaiPixel.pixels&&t.product.kwaiPixel.pixels.map((e,t)=>{let{pixelId:a}=e;if("string"==typeof a)return(0,r.jsx)(i(),{strategy:"afterInteractive",id:"kwai-pixel-".concat(t),children:'\n                  !function(e,t){"object"==typeof exports&&"object"==typeof \n                  module?module.exports=t():"function"==typeof define&&define.amd?define([],t):\n                  "object"==typeof exports?exports.install=t():e.install=t()}\n                  (window,(function(){return function(e){var t={};function n(o){if(t[o])\n                  return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};\n                  return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}\n                  return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},\n                  n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),\n                  Object.defineProperty(e,"_esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;\n                  if(4&t&&"object"==typeof e&&e&&e.esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),\n                  2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){\n                  var t=e&&e.esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){\n                  return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";\n                  var o=this&&this.spreadArray||function(e,t,n){if(n||2===arguments.length)for(var o,r=0,i=t.length;r<i;r++)\n                  !o&&r in t||(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))};\n                  Object.defineProperty(t,"_esModule",{value:!0});var r=function(e,t,n){var o,i=e.createElement("script");\n                  i.type="text/javascript",i.async=!0,i.src=t,n&&(i.onerror=function(){r(e,n)});var a=e.getElementsByTagName("script")[0];\n                  null===(o=a.parentNode)||void 0===o||o.insertBefore(i,a)};\n                  !function(e,t,n){e.KwaiAnalyticsObject=n;var i=e[n]=e[n]||[];\n                  i.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group",\n                  "enableCookie","disableCookie"];var a=function(e,t){e[t]=function(){for(var n=[],r=0;r<arguments.length;r++)\n                  n[r]=arguments[r];var i=o([t],n,!0);e.push(i)}};\n                  i.methods.forEach((function(e){a(i,e)})),i.instance=function(e){var t,n=(null===(t=i._i)||void 0===t?void 0:t[e])||[];\n                  return i.methods.forEach((function(e){a(n,e)})),n},i.load=function(e,o){var a="https://s1.kwai.net/kos/s101/nlav11187/pixel/events.js";\n                  i._i=i._i||{},i._i[e]=[],i._i[e]._u=a,i._t=i._t||{},i._t[e]=+new Date,i._o=i._o||{},i._o[e]=o||{};\n                  var c="?sdkid=".concat(e,"&lib=").concat(n);r(t,a+c,"https://s16-11187.ap4r.com/kos/s101/nlav11187/pixel/events.js"+c)}}\n                  (window,document,"kwaiq")}])}));\n                  kwaiq.load(\''.concat(a,"');\n                  kwaiq.track('addToCart');\n                  kwaiq.page();\n                ")},t)}),[t.product.kwaiPixel.pixels]);return(0,r.jsxs)(r.Fragment,{children:[a,o,s,d,c]})}},17267:function(e,t,a){"use strict";var r=a(62900),n=a(83650),o=a(26730);let i=o.z.string().email(),isValidEmail=e=>!!e&&i.safeParse(e).success;t.Z=e=>{let{cartId:t,setCartId:a,name:o,document:i,email:s,phone:d,cartAmt:c,offerId:l,utmQuery:u}=e,{data:p}=r.S.checkout.checkAbandonedCartEnabled.useQuery({offerId:l}),m=r.S.checkout.putAbandonedCart.useMutation({onSuccess:e=>{a(e.cartId)}});(0,n.useEffect)(()=>{p&&isValidEmail(s)&&!m.isLoading&&m.mutateAsync({cartId:t,name:o,document:i,email:s,phone:d,cartAmt:c,offerId:l,utmQuery:u})},[s]),(0,n.useEffect)(()=>{p&&(null==d?void 0:d.length)===11&&!m.isLoading&&m.mutateAsync({cartId:t,name:o,document:i,email:s,phone:d,cartAmt:c,offerId:l,utmQuery:u})},[d])}},4898:function(e,t,a){"use strict";a.d(t,{E:function(){return BannerText}});var r=a(4190);a(83650);let BannerText=e=>{let{text:t,backgroundColor:a,textColor:n}=e;return(0,r.jsx)("div",{className:"text-sm font-semibold text-white",style:{backgroundColor:a},children:(0,r.jsx)("div",{className:"m-auto flex w-full max-w-3xl items-center justify-center gap-5 px-2 py-4 text-center",style:{color:n},children:t})})}},54144:function(e,t,a){"use strict";a.r(t),a.d(t,{Counter:function(){return Counter}});var r=a(4190),n=a(83650),o=a(44801);let Counter=e=>{let{timer:t,text:a,textEnd:i,textColor:s,backgroundColor:d,isProduction:c=!1}=e,[l,u]=(0,n.useState)(60*t),[p,m]=(0,n.useState)(a);return(0,n.useEffect)(()=>{if(c){let e=setInterval(()=>{u(t=>t<=1?(m(i),clearInterval(e),0):t-1)},1e3);return()=>clearInterval(e)}},[c,i]),(0,r.jsx)("div",{className:"bg-red-light text-xl text-black",style:{backgroundColor:d,color:s},children:(0,r.jsxs)("div",{className:"m-auto flex w-full max-w-3xl items-center justify-center gap-5 px-2 py-4",children:[(0,r.jsx)("p",{className:"w-auto max-w-[280px] text-base font-medium",children:c?p:a}),(0,r.jsx)(o.b3O,{className:"h-10 w-10 flex-shrink-0"}),(0,r.jsx)("h1",{className:"text-lg font-medium uppercase text-gray-800 dark:text-gray-100 md:text-3xl",style:{color:s},children:c?"".concat(Math.floor(l/3600).toString().padStart(2,"0"),":").concat(Math.floor(l%3600/60).toString().padStart(2,"0"),":").concat((l%60).toString().padStart(2,"0")):"".concat(Math.floor(t/60).toString().padStart(2,"0"),":").concat((t%60).toString().padStart(2,"0"),":").concat("0".padStart(2,"0"))})]})})}},60827:function(e,t,a){"use strict";a.d(t,{Y:function(){return Cover}});var r=a(4190),n=a(43925),o=a.n(n);let Cover=e=>{let{fileImage:t,imageURL:a}=e;return(0,r.jsx)("div",{className:"w-full overflow-hidden",children:t?(0,r.jsx)(o(),{src:URL.createObjectURL(t),alt:"Capa do checkout",className:"w-full",width:1e3,height:1e3}):(0,r.jsx)(r.Fragment,{children:a&&"remove"!==a&&(0,r.jsx)(o(),{src:a,alt:"Capa do checkout",className:"w-full",width:1e3,height:1e3})})})}},67408:function(e,t,a){"use strict";a.d(t,{x:function(){return Feedback}});var r=a(4190),n=a(25552),o=a(43925),i=a.n(o),s=a(6808),d=a(87766);let Feedback=e=>{let{id:t,className:a,title:o,image:c,index:l,description:u,stars:p,isCheckoutBuilder:m,feedbacks:h,setFeedbacks:y}=e,handleDeleteFeedback=async()=>{if(!m||!h||!y)return;let e=null==h?void 0:h.filter(e=>e.id!==t);y(e)};return(0,r.jsxs)("div",{className:"flex w-full items-center gap-3 ".concat(a),children:[(0,r.jsx)("div",{className:"relative flex items-center justify-center overflow-hidden rounded-full",style:{width:"60px",height:"60px"},children:c?(0,r.jsx)(i(),{src:c,alt:o,layout:"fill",objectFit:"cover",className:"rounded-full"}):(0,r.jsx)("span",{className:"inline-block w-20 overflow-hidden rounded-full bg-gray-800 dark:bg-gray-800",children:(0,r.jsx)("svg",{fill:"currentColor",viewBox:"0 0 24 24",className:"h-full w-full text-gray-300",children:(0,r.jsx)("path",{d:"M24 20.993V24H0v-2.996A14.977 14.977 0 0112.004 15c4.904 0 9.26 2.354 11.996 5.993zM16.002 8.999a4 4 0 11-8 0 4 4 0 018 0z"})})})}),(0,r.jsxs)("div",{className:"relative w-full",children:[m&&(0,r.jsx)(n.zx,{onClick:handleDeleteFeedback,variant:"outline",color:"danger",className:"absolute right-2 flex items-center justify-center",children:(0,r.jsx)(s.AMf,{color:"red"})}),(0,r.jsx)("div",{className:"flex items-center gap-1",children:Array.from({length:p},(e,t)=>(0,r.jsx)(d.M2b,{color:"#FFD200"},t))}),(0,r.jsx)("h5",{className:"text-base dark:text-gray-100",children:o}),(0,r.jsx)("p",{className:"text-sm",children:u})]})]})}},693:function(e,t,a){"use strict";a.r(t),a.d(t,{FloatingWhatsApp:function(){return FloatingWhatsApp}});var r=a(4190),n=a(25552),o=a(46234);let FloatingWhatsApp=e=>{let{position:t,message:a,phone:i,isProduction:s=!1}=e;return(0,r.jsx)(n.zx,{variant:"text",onClick:()=>{if(a.length<=0||i.length<=2)return;let e=i.replace(/[()-\s]/g,"").trim(),t=encodeURIComponent(a),r="https://api.whatsapp.com/send?phone=55".concat(e,"&text=").concat(t);window.open(r,"_blank")},className:"fixed bottom-[20px] ".concat("".concat("LEFT"===t?"".concat(s?"left-[20px]":"left-[300px]"):"right-[20px]")," flex h-[50px] w-[50px] items-center justify-center rounded-full bg-green-light p-0 hover:bg-green-dark"),children:(0,r.jsx)(o.RGt,{color:"white",size:27})})}},31431:function(e,t,a){"use strict";a.d(t,{z:function(){return LogoTopCheckout}});var r=a(4190),n=a(43925),o=a.n(n);let LogoTopCheckout=e=>{let{fileImage:t,imageURL:a}=e;return(0,r.jsx)("div",{className:"max-h-20 w-full overflow-hidden",children:t?(0,r.jsx)(o(),{src:URL.createObjectURL(t),alt:"Capa do checkout",className:"w-full",width:200,height:200}):(0,r.jsx)(r.Fragment,{children:a&&"remove"!==a&&(0,r.jsx)(o(),{src:a,alt:"Capa do checkout",className:"w-full",width:200,height:200})})})}},93158:function(e,t,a){"use strict";let r;a.d(t,{W:function(){return ed}});var n=a(63343),o=a(85947),i=a.n(o),s=a(13318);let BasePaymentProvider=class BasePaymentProvider{static calculateInstallments(e){let t=[];for(let a=1;a<=e.numberOfInstallments;a++){let r=a<=e.maxInstallmentsWithoutInterest?0:e.installmentsFees[a-1],n=0===r?e.totalPrice/a:e.totalPrice*(1+r/100)/a,o=Math.round(100*n)/100;if(o>=e.minInstallmentValue){let e=o*a;t.push({installmentNumber:a,installmentValue:Math.floor(100*o),finalValue:Math.floor(100*e)})}}return t}static processWebhook(e){throw Error("Method not implemented.")}static parseStatus(e){throw Error("Method not implemented.")}constructor(e,t,a){this.publicKey=e,this.secretKey=t,this.baseUrl=a}};var d=a(58192).Buffer;let AbmexPaymentProvider=class AbmexPaymentProvider extends BasePaymentProvider{static async processWebhook(e){if("transaction"===e.type)return{transactionId:String(e.data.id),type:"TRANSACTION",status:this.parseStatus(e.data.status)}}withdraw(e){throw Error("Method not implemented.")}getWithdraw(e){throw Error("Method not implemented.")}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}static parseStatus(e){switch(e){case"processing":case"waiting_payment":case"partially_paid":case"in_protest":return"PENDING";case"paid":case"authorized":return"APPROVED";case"refunded":case"canceled":return"REFUNDED";case"chargedback":return"CHARGEBACK";default:return"REJECTED"}}async createCardToken(e){let t=await this.api.post("/card-token?publicKey="+this.publicKey,{number:e.cardNumber.replace(/\D/g,""),holderName:e.holderName,expirationMonth:parseInt(e.expMonth),expirationYear:parseInt("20"+e.expYear),cvv:e.cvv});return t.data}async createCardId(e){return e.cardToken}async createTransaction(e){let t={authorization:"Basic "+d.from(this.secretKey+":x").toString("base64")},a=e.items.map(e=>({title:e.title,unitPrice:e.unitPrice,quantity:e.quantity,tangible:e.tangible})),r={amount:e.amount,customer:{document:{number:e.customer.document,type:"cpf"},email:e.customer.email,name:e.customer.name,phone:e.customer.phone},paymentMethod:{PIX:"pix",CREDIT_CARD:"credit_card",BILLET:"boleto"}[e.paymentMethod],traceable:!1,items:a};if("PIX"===e.paymentMethod){let e=await this.api.post("/transactions",{...r,pix:{expiresInDays:1}},{headers:t});return{paymentMethod:"PIX",transactionId:String(e.data.id),pixQrCode:await s.toDataURL(e.data.pix.qrcode),expiresAt:i()(e.data.pix.qrcode.expirationDate).toDate(),pixCode:e.data.pix.qrcode,status:AbmexPaymentProvider.parseStatus(e.data.status),amount:e.data.amount}}if("CREDIT_CARD"===e.paymentMethod){let a=await this.api.post("/transactions",{...r,card:{hash:e.cardId}},{headers:t});return{paymentMethod:"CREDIT_CARD",transactionId:String(a.data.id),status:AbmexPaymentProvider.parseStatus(a.data.status),amount:a.data.amount}}if("BILLET"===e.paymentMethod){let e=await this.api.post("/transactions",{...r,boleto:{expiresInDays:3}},{headers:t});return{paymentMethod:"BILLET",transactionId:String(e.data.id),status:AbmexPaymentProvider.parseStatus(e.data.status),amount:e.data.amount,billetCode:e.data.boleto.digitableLine,billetUrl:e.data.boleto.url,expiresAt:i()(e.data.boleto.expirationDate).toDate()}}throw Error("Method not implemented.")}async getTransaction(e,t){let a={authorization:"Basic "+d.from(this.secretKey+":x").toString("base64")},r=await this.api.get("/transactions/".concat(e),{headers:a}),n=r.data;if("pix"===n.paymentMethod)return{paymentMethod:"PIX",transactionId:String(n.id),pixQrCode:await s.toDataURL(n.pix.qrcode),pixCode:n.pix.qrcode,expiresAt:i()(n.pix.expirationDate).toDate(),status:AbmexPaymentProvider.parseStatus(n.status),amount:n.amount};if("credit_card"===n.paymentMethod)return{paymentMethod:"CREDIT_CARD",transactionId:String(n.id),status:AbmexPaymentProvider.parseStatus(n.status),amount:n.amount};if("boleto"===n.paymentMethod)return{paymentMethod:"BILLET",transactionId:String(n.id),status:AbmexPaymentProvider.parseStatus(n.status),amount:n.amount,billetUrl:n.boleto.url,billetCode:n.boleto.digitableLine,expiresAt:i()(n.boleto.expirationDate).toDate()};throw Error("Method not implemented.")}async refoundTransaction(e,t){let a={authorization:"Basic "+d.from(this.secretKey+":x").toString("base64")},r=await this.api.post("/transactions/".concat(e,"/refund"),{amount:t},{headers:a});return{refundId:r.data.id,status:200===r.status}}constructor(...e){var t;super(...e),this.api=n.default.create({baseURL:null!==(t=this.baseUrl)&&void 0!==t?t:"https://api.abmexpay.com/v1",headers:{"Content-Type":"application/json"}})}};AbmexPaymentProvider.providerName="ABMEX";var c=a(9107);let AsaasPaymentProvider=class AsaasPaymentProvider extends BasePaymentProvider{static async processWebhook(e){if(e.event&&e.event.startsWith("PAYMENT"))return{transactionId:e.payment.id,type:"TRANSACTION",status:AsaasPaymentProvider.parseStatus(e.payment.status)};throw Error("Method not implemented.")}async withdraw(e){let t={access_token:this.secretKey};if("PIX"===e.paymentMethod){let a=await this.api.post("/transfers",{value:e.amount/100,pixAddressKey:e.pixKey,pixAddressKeyType:e.pixType,operationType:"PIX",description:e.description},{headers:t});return{withdrawId:a.data.id,status:"PENDING",amount:Math.floor(100*a.data.value)}}if("BANK_ACCOUNT"===e.paymentMethod){let a=await this.api.post("/transfers",{value:e.amount,operationType:"TED",bank:{code:e.bankCode},ownerName:e.accountHolder,cpfCnpj:e.accountDocument,agency:e.branchNumber,account:e.accountNumber.substring(0,e.accountNumber.length-1),accountDigit:e.accountNumber.charAt(e.accountNumber.length)},{headers:t});return{withdrawId:a.data.id,status:"PENDING",amount:a.data.value}}if("RECEIVER"===e.paymentMethod){let a=await this.api.post("/transfers",{value:e.amount,walletId:e.receiverId},{headers:t});return{withdrawId:a.data.id,status:"PENDING",amount:a.data.value}}throw Error("Method not implemented.")}async getWithdraw(e){throw Error("Method not implemented.")}async createReceiver(e){var t;let a=null===(t=e.providerSpecificData)||void 0===t?void 0:t.monthlyRevenue;if(!a)throw new c.bR({code:"BAD_REQUEST",message:"Adquirente requer campo de renda mensal."});throw Error("campo de renda mensal enviado: "+a)}getReceiver(e){throw Error("Method not implemented.")}static parseStatus(e){switch(e){case"PENDING":return"PENDING";case"CONFIRMED":case"RECEIVED":return"APPROVED";case"REFUNDED":return"REFUNDED";case"CHARGEBACK_REQUESTED":case"CHARGEBACK_DISPUTE":case"AWAITING_CHARGEBACK_REVERSAL":return"CHARGEBACK";default:return"REJECTED"}}async createCardToken(e){let t={holderName:e.holderName,number:e.cardNumber,expiryMonth:e.expMonth,expiryYear:"20"+e.expYear,ccv:e.cvv};return JSON.stringify(t)}async createCardId(e){let t=JSON.parse(e.cardToken),a={creditCard:t,creditCardHolderInfo:{name:e.customer.name,email:e.customer.email,cpfCnpj:e.customer.document,phone:e.customer.phone},remoteIp:e.customerIp};return JSON.stringify(a)}async createTransaction(e){let t;let a=await this.api.get("/customers?cpfCnpj=".concat(e.customer.document));if(a.data.totalCount>0)t=a.data.data[0].id;else{let a=await this.api.post("/customers",{name:e.customer.name,cpfCnpj:e.customer.document,email:e.customer.email,mobilePhone:e.customer.phone});t=a.data.id}if(await this.configureWebhook(e.webhookUrl),"PIX"===e.paymentMethod){let a=await this.api.post("/payments",{customer:t,billingType:"PIX",value:e.amount/100,dueDate:i()(new Date).add(1,"days").toISOString()}),r=await this.api.get("/payments/".concat(a.data.id,"/pixQrCode"));return{amount:e.amount,paymentMethod:"PIX",transactionId:a.data.id,status:AsaasPaymentProvider.parseStatus(a.data.status),pixCode:r.data.payload,pixQrCode:await s.toDataURL(r.data.payload),expiresAt:i()(r.data.expirationDate).toDate()}}if("CREDIT_CARD"===e.paymentMethod){var r,n,o;let{creditCard:a,creditCardHolderInfo:s,remoteIp:d}=JSON.parse(e.cardId),c=await this.api.post("/payments",{customer:t,billingType:"CREDIT_CARD",installmentCount:e.installments,totalValue:e.amount/100,dueDate:i()(new Date).add(1,"years").toISOString(),creditCard:a,creditCardHolderInfo:{...s,postalCode:null===(r=e.address)||void 0===r?void 0:r.zipCode,address:null===(n=e.address)||void 0===n?void 0:n.address,addressNumber:null===(o=e.address)||void 0===o?void 0:o.number,addressComplement:"None"},remoteIp:d});return{amount:e.amount,paymentMethod:"CREDIT_CARD",transactionId:c.data.id,status:AsaasPaymentProvider.parseStatus(c.data.status)}}throw Error("Method not implemented.")}async getTransaction(e,t){let a=await this.api.get("/payments/".concat(e));if("PIX"===a.data.billingType){let t=await this.api.get("/payments/".concat(e,"/pixQrCode"));return{amount:a.data.value,paymentMethod:"PIX",transactionId:a.data.id,status:AsaasPaymentProvider.parseStatus(a.data.status),pixCode:t.data.payload,pixQrCode:await s.toDataURL(t.data.payload),expiresAt:i()(t.data.expirationDate).toDate()}}if("CREDIT_CARD"===a.data.billingType){var r;return{amount:null!==(r=a.data.value)&&void 0!==r?r:a.data.totalValue,paymentMethod:"CREDIT_CARD",transactionId:a.data.id,status:AsaasPaymentProvider.parseStatus(a.data.status)}}throw Error("Method not implemented.")}async refoundTransaction(e,t){let a=await this.api.post("/payments/".concat(e,"/refund"),{value:t});return{refundId:a.data.id,status:200===a.status}}async configureWebhook(e){if(!e)return;let t=await this.api.get("/webhooks"),a=t.data.data;a.some(t=>t.url===e)||await this.api.post("/webhooks",{name:"Paymaker Webhook",url:e,enabled:!0,apiVersion:3,email:"example@example.com",interrupted:!1,sendType:"SEQUENTIALLY",events:["PAYMENT_CREDIT_CARD_CAPTURE_REFUSED","PAYMENT_CHECKOUT_VIEWED","PAYMENT_BANK_SLIP_VIEWED","PAYMENT_DUNNING_REQUESTED","PAYMENT_DUNNING_RECEIVED","PAYMENT_AWAITING_CHARGEBACK_REVERSAL","PAYMENT_CHARGEBACK_DISPUTE","PAYMENT_CHARGEBACK_REQUESTED","PAYMENT_RECEIVED_IN_CASH_UNDONE","PAYMENT_REFUND_IN_PROGRESS","PAYMENT_REFUNDED","PAYMENT_RESTORED","PAYMENT_DELETED","PAYMENT_OVERDUE","PAYMENT_ANTICIPATED","PAYMENT_RECEIVED","PAYMENT_CONFIRMED","PAYMENT_UPDATED","PAYMENT_CREATED","PAYMENT_REPROVED_BY_RISK_ANALYSIS","PAYMENT_APPROVED_BY_RISK_ANALYSIS","PAYMENT_AWAITING_RISK_ANALYSIS","PAYMENT_AUTHORIZED"]})}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://api.asaas.com/v3",headers:{"Content-Type":"application/json",access_token:this.secretKey}})}};AsaasPaymentProvider.providerName="ASAAS";var l=a(58192).Buffer;let PagarmePaymentProvider=class PagarmePaymentProvider extends BasePaymentProvider{static async processWebhook(e){if(e.type&&e.type.startsWith("order."))return{transactionId:e.data.id,type:"TRANSACTION",status:PagarmePaymentProvider.parseStatus(e.data.charges[0].status)}}async createReceiver(e){let t={Authorization:"Basic ".concat(l.from(this.secretKey+":").toString("base64"))};console.dir({name:e.name,document:e.document,email:e.email,type:"CPF"===e.documentType?"individual":"company",default_bank_account:{bank:e.bankAccount.bankCode,holder_name:e.name,branch_number:e.bankAccount.branchNumber,branch_check_digit:e.bankAccount.branchDigit,account_number:e.bankAccount.accountNumber,account_check_digit:e.bankAccount.accountDigit,holder_type:"CPF"===e.documentType?"individual":"company",holder_document:e.document,type:e.bankAccount.accountType},transfer_settings:{transfer_enabled:!1,transfer_interval:"Daily",transfer_day:0}},{depth:null});let a=await this.api.post("/recipients",{name:e.name,document:e.document,email:e.email,type:"CPF"===e.documentType?"individual":"company",default_bank_account:{bank:e.bankAccount.bankCode,holder_name:e.name,branch_number:e.bankAccount.branchNumber,branch_check_digit:e.bankAccount.branchDigit,account_number:e.bankAccount.accountNumber,account_check_digit:e.bankAccount.accountDigit,holder_type:"CPF"===e.documentType?"individual":"company",holder_document:e.document,type:e.bankAccount.accountType},transfer_settings:{transfer_enabled:!1,transfer_interval:"Daily",transfer_day:0}},{headers:t}),r="PENDING";return console.log("Resposta da API:",a.data),"active"===a.data.status?r="ACTIVE":"rejected"===a.data.status&&(r="REJECTED"),{receiverProvider:PagarmePaymentProvider.providerName,status:r,name:a.data.name,document:a.data.document_number,documentType:"individual"===a.data.type?"CPF":"CNPJ",email:a.data.email,receiverId:a.data.id,paymentMethod:a.data.payment_mode,balance:0}}async getReceiver(e){let t={Authorization:"Basic ".concat(l.from(this.secretKey+":").toString("base64"))},a=await this.api.get("/recipients/".concat(e),{headers:t}),r=await this.api.get("/recipients/".concat(e,"/balance"),{headers:t}),n="PENDING";return"active"===a.data.status?n="ACTIVE":"rejected"===a.data.status&&(n="REJECTED"),{receiverProvider:PagarmePaymentProvider.providerName,name:a.data.name,document:a.data.document,documentType:"individual"===a.data.type?"CPF":"CNPJ",email:a.data.email,status:n,receiverId:a.data.id,balance:r.data.available_amount}}parseWithdrawStatus(e){switch(e){case"created":case"pending":case"processing":return"PENDING";case"transferred":return"APPROVED";case"canceled":return"CANCELED";default:return"REJECTED"}}async withdraw(e){let t={Authorization:"Basic ".concat(l.from(this.secretKey+":").toString("base64"))};if("RECEIVER"===e.paymentMethod){let a=await this.api.post("/recipients/".concat(e.receiverId,"/withdrawals"),{amount:e.amount},{headers:t});return{withdrawId:a.data.id,status:this.parseWithdrawStatus(a.data.status),amount:a.data.amount}}throw Error("Method not implemented.")}async getWithdraw(e){throw Error("Method not implemented.")}static parseStatus(e){switch(e){case"pending":case"processing":return"PENDING";case"paid":return"APPROVED";case"canceled":return"REFUNDED";case"failed":case"overpaid":case"underpaid":default:return"REJECTED";case"chargedback":return"CHARGEBACK"}}async createCardToken(e){let t=await this.api.post("/tokens",{type:"card",card:{number:e.cardNumber,holder_name:e.holderName,holder_document:e.holderDocument,exp_month:e.expMonth,exp_year:e.expYear,cvv:e.cvv}},{params:{appId:this.publicKey}});return t.data.id}async createCardId(e){let t={Authorization:"Basic ".concat(l.from(this.secretKey+":").toString("base64"))},a=await this.api.post("/customers",{name:e.customer.name,email:e.customer.email,document:e.customer.document,document_type:"cpf",type:"individual",phones:{mobile_phone:{country_code:"55",number:e.customer.phone.substring(2),area_code:e.customer.phone.substring(0,2)}}},{headers:t}),r=a.data.id,n=await this.api.post("/customers/".concat(r,"/cards"),{token:e.cardToken,holder_document:e.customer.document,billing_address:{line_1:"10880, Malibu Point, Malibu Central",zip_code:"90265",city:"Malibu",state:"CA",country:"US"}},{headers:t});return n.data.id}async createTransaction(e){let t=e.items.map(t=>({code:t.id,title:t.title,amount:t.unitPrice,quantity:t.quantity,tangible:t.tangible,description:e.description})),a={name:e.customer.name,type:"individual",country:"br",email:e.customer.email,document_type:"cpf",document:e.customer.document,phones:{mobile_phone:{country_code:"55",number:e.customer.phone.substring(2),area_code:e.customer.phone.substring(0,2)}}},r={Authorization:"Basic ".concat(l.from(this.secretKey+":").toString("base64"))},n=e.splits.map(e=>({amount:e.amount,recipient_id:e.recipientId,type:"PERCENTAGE"===e.type?"percentage":"flat",options:{charge_processing_fee:e.chargeProcessingFee,charge_remainder_fee:e.chargeRemainder,liable:e.liable}}));if("PIX"===e.paymentMethod){let o=await this.api.post("/orders",{items:t,customer:a,payments:[{payment_method:"pix",pix:{expires_at:i()(new Date).add(1,"days").toISOString(),additional_information:[{name:"Pagamento de",value:e.items[0].title}]},split:n}]},{headers:r}),s=o.data.charges[0],d=s.last_transaction;return console.dir(o.data,{depth:null}),{paymentMethod:"PIX",transactionId:o.data.id,pixQrCode:d.qr_code_url,expiresAt:i()(d.expires_at).toDate(),pixCode:d.qr_code,status:PagarmePaymentProvider.parseStatus(s.status),amount:e.amount}}if("CREDIT_CARD"===e.paymentMethod){let o=await this.api.post("/orders",{items:t,customer:a,payments:[{payment_method:"credit_card",credit_card:{recurrence:!1,installments:e.installments,statement_descriptor:e.description.replaceAll(/[^a-zA-Z0-9]/g,"").substring(0,13),card_id:e.cardId},split:n}]},{headers:r}),i=o.data.charges[0];return i.last_transaction,console.dir(o.data,{depth:null}),{paymentMethod:"CREDIT_CARD",transactionId:o.data.id,status:PagarmePaymentProvider.parseStatus(i.status),amount:e.amount}}if("BILLET"===e.paymentMethod){let o=await this.api.post("/orders",{items:t,customer:a,payments:[{payment_method:"boleto",boleto:{instructions:"Pagar at\xe9 o vencimento",due_at:i()().add(5,"days").format("YYYY-MM-DD"),type:"DM"},split:n}]},{headers:r}),s=o.data.charges[0],d=s.last_transaction,c=d.url,l=d.line,u=d.due_at;return{paymentMethod:"BILLET",transactionId:o.data.id,status:PagarmePaymentProvider.parseStatus(s.status),amount:e.amount,billetUrl:c,billetCode:l,expiresAt:u}}throw Error("Not implemented yet.")}async getTransaction(e,t){let a={Authorization:"Basic ".concat(l.from(this.secretKey+":").toString("base64"))},r=await this.api.get("/orders/".concat(e),{headers:a}),n=r.data.charges[0],o=n.last_transaction;if("pix"===o.transaction_type)return{paymentMethod:"PIX",transactionId:r.data.id,pixQrCode:o.qr_code_url,expiresAt:i()(o.expires_at).toDate(),pixCode:o.qr_code,status:PagarmePaymentProvider.parseStatus(n.status),amount:n.amount};if("credit_card"===o.transaction_type)return{paymentMethod:"CREDIT_CARD",transactionId:r.data.id,status:PagarmePaymentProvider.parseStatus(n.status),amount:n.amount};if("boleto"===o.transaction_type)return{paymentMethod:"BILLET",transactionId:r.data.id,status:PagarmePaymentProvider.parseStatus(n.status),amount:n.amount,billetUrl:o.url,billetCode:o.line,expiresAt:o.due_at};throw Error("Not implemented yet.")}async refoundTransaction(e,t){let a={Authorization:"Basic ".concat(l.from(this.secretKey+":").toString("base64"))},r=await this.api.get("/orders/".concat(e),{headers:a}),n=r.data.charges[0],o=await this.api.delete("/charges/".concat(n.id),{headers:a,data:{amount:t}});return{refundId:o.data.id,status:200===o.status}}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://api.pagar.me/core/v5/",headers:{"Content-Type":"application/json"}})}};PagarmePaymentProvider.providerName="PAGARME";var u=a(58192).Buffer;let PagoPaymentProvider=class PagoPaymentProvider extends BasePaymentProvider{static async processWebhook(e){if("Cash in"===e.type){let t=e.uniqueId,a=PagoPaymentProvider.parseStatus(String(e.statusCode));return{transactionId:t,status:a,type:"TRANSACTION"}}}parseWithdrawStatus(e){switch(e){case 40:case 35:return"APPROVED";case 38:case 34:return"REJECTED";default:return"PENDING"}}async withdraw(e){if("PIX"===e.paymentMethod){let t;let a=await this.getAuthorization();switch(e.pixType){case"CPF":case"CNPJ":t="1";break;case"EMAIL":t="2";break;case"PHONE":t="3";break;case"RANDOM":t="4"}let r=await this.api.post("/cashout",{amount:1,bank:{pixKey:t,pixValue:e.pixKey},countryCode:"BRA",creationDate:i()().toISOString(),currencyCode:"BRL",merchantReference:e.withdrawReference,shopper:{docNumber:e.document,docType:"CPF"===e.documentType?"1":"2",fullName:e.name,email:e.email,countryCode:"BRA"},transferType:"1",details:e.description},{headers:{"Content-Type":"application/json",authorization:a}});return{withdrawId:r.data.uniqueId,amount:Math.floor(100*r.data.amount),status:this.parseWithdrawStatus(r.data.lastStatus)}}throw Error("Method not implemented.")}async getWithdraw(e){let t=await this.getAuthorization(),a=await this.api.get("/cashout/".concat(e),{headers:{"Content-Type":"application/json",authorization:t}});return{withdrawId:a.data.uniqueId,amount:Math.floor(100*a.data.amount),status:this.parseWithdrawStatus(a.data.lastStatus),approvedAt:a.data.approvedAt}}async createReceiver(e){throw Error("Method not implemented.")}async getReceiver(e){throw Error("Method not implemented.")}async getAuthorization(){let e=await this.api.post("/auth",void 0,{headers:{"Content-Type":"application/json",Authorization:"Basic"+u.from(this.secretKey).toString("base64")}});return"".concat(e.data.type," ").concat(e.data.accessToken)}static parseStatus(e){switch(e){case"10":return"PENDING";case"35":case"32":case"11":return"APPROVED";case"31":case"3":return"REFUNDED";default:return"REJECTED"}}async createCardToken(e){throw Error("Method not implemented.")}async createCardId(e){throw Error("Method not implemented.")}async createTransaction(e){let t=await this.getAuthorization();if("PIX"===e.paymentMethod){let a=await this.api.post("/cashin",{creationTime:i()().toISOString(),expirationTime:1440,paymentMethod:1,urlConfirmation:e.webhookUrl,shopper:{docNumber:e.customer.document,docType:"1",fullName:e.customer.name,email:e.customer.email,mobile:e.customer.phone,countryCode:"BRA"},transaction:{amount:e.amount/100,countryCode:"BRA",currencyCode:"BRL",salesId:e.orderId,details:e.description}},{headers:{"Content-Type":"application/json",authorization:t}}),r=a.data.paymentInstructions.code,n=await s.toDataURL(r),o=a.data.expirationTime,d=a.data.uniqueId,c=String(a.data.transaction.status),l=e.amount;return{paymentMethod:"PIX",pixQrCode:n,pixCode:r,expiresAt:i()(o).toDate(),transactionId:d,status:PagoPaymentProvider.parseStatus(c),amount:l}}if("BILLET"===e.paymentMethod)throw Error("Boleto not implemented");if("CREDIT_CARD"===e.paymentMethod)throw Error("Credit card not implemented");throw Error("Invalid payment method")}async getTransaction(e,t){let a=await this.getAuthorization(),r=await this.api.get("/cashin/".concat(e),{headers:{"Content-Type":"application/json",authorization:a}}),n=String(r.data.statusCode),o=Math.floor(100*r.data.amount);return{paymentMethod:"PIX",status:PagoPaymentProvider.parseStatus(n),amount:o,transactionId:e,pixCode:r.data.code,pixQrCode:r.data.qrCode,expiresAt:i()(r.data.expirationTime).toDate()}}async refoundTransaction(e,t){let a=await this.getAuthorization(),r=await this.api.post("/cashin/reversal",{amount:t,uniqueId:e},{headers:{"Content-Type":"application/json",authorization:a}});return{refundId:r.data.id,status:"APPROVED"===r.data.status}}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://api.pagoexpress.com.br",headers:{"Content-Type":"application/json"}})}};PagoPaymentProvider.providerName="PAGO";var p=a(76664),m=a(10255);if(m.env.DATABASE_READER_URL&&m.env.DATABASE_WRITTER_URL){let e=(m.env.DATABASE_READER_URL||"").split(","),t=m.env.DATABASE_WRITTER_URL||"",a=new p.PrismaClient({datasources:{db:{url:t}}}),n=e.map(e=>new p.PrismaClient({datasources:{db:{url:e}}})),o=0;r=new Proxy(a,{get(e,t){if("string"==typeof t&&t.startsWith("$"))return function(){for(var a=arguments.length,r=Array(a),i=0;i<a;i++)r[i]=arguments[i];if("$queryRaw"===t||"$executeRaw"===t){let e=n[o];return o=(o+1)%n.length,e[t].apply(e,r)}return e[t].apply(e,r)};let a=e[t];return a&&"object"==typeof a?new Proxy(a,{get:(e,a)=>"string"==typeof a&&["findUnique","findMany","findFirst","aggregate","count","groupBy"].includes(a)?function(){for(var e=arguments.length,r=Array(e),i=0;i<e;i++)r[i]=arguments[i];let s=n[o];o=(o+1)%n.length;let d=s[t],c=d[a];if(!c)throw Error("Method ".concat(String(a)," is not available on replica model ").concat(String(t)));return c.apply(d,r)}:"string"==typeof a&&e&&a in e&&"function"==typeof e[a]?e[a].bind(e):e[a]}):a}})}else r=new p.PrismaClient({});var h=r,y=a(69239),f=a(82524),v=a(92078),x=a(39634),C=a(10255);let generateUploadLink=async(e,t,a)=>{let r={region:C.env.DO_REGION,endpoint:"https://".concat(C.env.DO_REGION,".digitaloceanspaces.com"),credentials:{accessKeyId:C.env.DO_ACCESS_KEY_ID,secretAccessKey:C.env.DO_SECRET_ACCESS_KEY},forcePathStyle:!0},n=new y.g(r),o="".concat(a,"/").concat((0,x.Z)(),"-").concat(e),i={Bucket:C.env.DO_SPACE_NAME,Key:o,ContentType:t,ACL:"public-read"},s=new f.U(i),d=await (0,v.e)(n,s,{expiresIn:60}),c="https://".concat(C.env.DO_SPACE_NAME,".").concat(C.env.DO_REGION,".digitaloceanspaces.com/").concat(o);return{signedUrl:d,imageUrl:c}};let TransfeeraPaymentProvider=class TransfeeraPaymentProvider extends BasePaymentProvider{async getAuthorization(){let e=await n.default.post("https://login-api.transfeera.com/authorization",{grant_type:"client_credentials",client_id:this.publicKey,client_secret:this.secretKey},{headers:{"Content-Type":"application/json"}});return"Bearer ".concat(e.data.access_token)}parseWithdrawStatus(e){switch(e){case"RASCUNHO":case"PENDENTE":case"ATIVA":case"AGUARDANDO_RECEBIMENTO":case"AGUARDANDO_RECEBIMENTO":case"AGUARDANDO_APROVACAO":case"AGUARDANDO_RECEBIMENTO":case"RECEBIDO":return"PENDING";case"FINALIZADO":return"APPROVED";default:return"REJECTED"}}static async processWebhook(e){if("CashIn"===e.object)return{transactionId:e.data.txid,type:"TRANSACTION",status:"APPROVED"}}async withdraw(e){let t=await this.getAuthorization();if("PIX"===e.paymentMethod){var a;let r,n=e.pixKey;"PHONE"===e.pixType&&(n="+55".concat(n.replace(/\D/g,""))),(a=r||(r={})).CPF="CPF",a.CNPJ="CNPJ",a.PHONE="TELEFONE",a.EMAIL="EMAIL",a.RANDOM="CHAVE_ALEATORIA";let o=await this.api.post("/batch",{type:"TRANSFERENCIA",transfers:[{value:e.amount/100,destination_bank_account:{pix_key_type:r[e.pixType],pix_key:e.pixKey},pix_description:e.description}]},{headers:{authorization:t}});return await this.api.post("/batch/".concat(o.data.id,"/close"),null,{headers:{authorization:t}}),{withdrawId:o.data.id,amount:e.amount,status:"PENDING"}}if("BANK_ACCOUNT"===e.paymentMethod){let a=await this.api.post("/batch",{type:"TRANSFERENCIA",transfers:[{value:e.amount/100,destination_bank_account:{cpf_cnpj:e.accountDocument,bank_code:e.bankCode,agency:e.branchNumber,account:e.accountNumber.substring(0,e.accountNumber.length-1),account_digit:e.accountNumber.charAt(e.accountNumber.length),account_type:"CONTA_CORRENTE"}}]},{headers:{authorization:t}});return await this.api.post("/batch/".concat(a.data.id,"/close"),null,{headers:{authorization:t}}),{withdrawId:a.data.uniqueId,amount:e.amount,status:"PENDING"}}throw Error("Method not implemented.")}async getWithdraw(e){let t=await this.getAuthorization(),a=await this.api.get("/batch/".concat(e),{headers:{authorization:t}});return{withdrawId:a.data.id,amount:a.data.value,status:this.parseWithdrawStatus(a.data.status)}}async createReceiver(e){let t=await this.getAuthorization(),a=await this.api.post("/pix/key",{key:e.bankAccount.pixCode},{headers:{authorization:t}});return{receiverId:a.data.id,receiverProvider:a.data.provider,documentType:a.data.key_type,document:a.data.key,status:"PENDING",name:e.name,email:e.email,balance:0}}async getReceiver(e){var t;let a=await h.receiver.findFirstOrThrow({where:{receiverId:e}});return{receiverId:e,receiverProvider:"TRANSFEERA",document:a.document,documentType:(null==a?void 0:null===(t=a.document)||void 0===t?void 0:t.length)>11?"CNPJ":"CPF",name:a.name,email:a.email,balance:0,status:a.status}}static parseStatus(e){switch(e){case"RASCUNHO":case"PENDENTE":case"AGUARDANDO_RECEBIMENTO":case"AGUARDANDO_RECEBIMENTO":case"AGUARDANDO_APROVACAO":case"AGUARDANDO_RECEBIMENTO":case"RECEBIDO":case"ATIVA":return"PENDING";case"FINALIZADO":case"CONCLUIDA":return"APPROVED";default:return"REJECTED"}}createCardToken(e){throw Error("Method not implemented.")}createCardId(e){throw Error("Method not implemented.")}async createTransaction(e){let t=await this.getAuthorization();if("BILLET"===e.paymentMethod){var a,r,n,o,d;let s=i()().add(1,"days").format("YYYY-MM-DD"),c=await this.api.post("/charges",{payment_methods:["boleto"],payer:{name:e.customer.name,trade_name:e.customer.name,tax_id:e.customer.document,address:{street:null===(a=e.address)||void 0===a?void 0:a.address,number:null===(r=e.address)||void 0===r?void 0:r.number,complement:"sem complemento",district:null===(n=e.address)||void 0===n?void 0:n.district,city:null===(o=e.address)||void 0===o?void 0:o.city,state:null===(d=e.address)||void 0===d?void 0:d.state,postal_code:"01234567"}},amount:e.amount,due_date:s,expiration_date:s,external_id:e.orderId},{headers:{authorization:t}}),l=await this.api.get("/charges/".concat(c.data.id,"/receivables/").concat(c.data.receivables[0].id,"/pdf"),{responseType:"arraybuffer",headers:{authorization:t}}),u="billet"+Date.now()+".pdf",{signedUrl:p,imageUrl:m}=await generateUploadLink(u,"pdf","billets"),h=new File([l.data],u,{type:"application/pdf",lastModified:Date.now()}),y=await fetch(p,{method:"PUT",body:h,headers:{"Content-Type":h.type}});if(!y.ok)throw Error("Error on upload pdf");return{paymentMethod:"BILLET",billetCode:c.data.receivables[0].boleto.linha_digitavel,billetUrl:m,transactionId:c.data.txid,amount:e.amount,status:"PENDING"}}if("PIX"===e.paymentMethod){let a=i()().add(1,"days").format("YYYY-MM-DD"),r=await h.user.findFirstOrThrow({where:{id:e.userId},include:{platform:!0}}),n=await this.api.post("/pix/qrcode/collection/dueDate",{pix_key:r.platform.defaultReceiverId,due_date:a,original_value:e.amount/100,payer:{name:e.customer.name,document:e.customer.document,email:e.customer.email}},{headers:{authorization:t}});return{transactionId:n.data.txid,amount:100*n.data.original_value,pixCode:n.data.emv_payload,pixQrCode:await s.toDataURL(n.data.emv_payload),status:TransfeeraPaymentProvider.parseStatus(n.data.status),paymentMethod:"PIX",expiresAt:i()(n.data.due_date).toDate()}}throw Error("Method not implemented.")}async getTransaction(e,t){let a=await this.getAuthorization(),{data:r}=await this.api.get("/pix/qrcode/".concat(e),{headers:{authorization:a}});return{transactionId:e,amount:100*r.original_value,paymentMethod:r.payment_method,pixCode:r.emv_payload,pixQrCode:await s.toDataURL(r.emv_payload),status:TransfeeraPaymentProvider.parseStatus(r.status)}}refoundTransaction(e,t){throw Error("Method not implemented.")}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://api.transfeera.com",headers:{"Content-Type":"application/json","User-Agent":"Empresa X (contato@empresax.com)"}})}};TransfeeraPaymentProvider.providerName="TRANSFEERA";let UltragatePaymentProvider=class UltragatePaymentProvider extends BasePaymentProvider{static async processWebhook(e){throw Error("Method not implemented.")}async withdraw(e){throw Error("Method not implemented.")}async getWithdraw(e){throw Error("Method not implemented.")}async createReceiver(e){throw Error("Method not implemented.")}async getReceiver(e){throw Error("Method not implemented.")}static parseStatus(e){throw Error("Method not implemented.")}async createCardToken(e){throw Error("Method not implemented.")}async createCardId(e){throw Error("Method not implemented.")}async createTransaction(e){throw Error("Method not implemented.")}async getTransaction(e,t){throw Error("Method not implemented.")}async refoundTransaction(e,t){throw Error("Method not implemented.")}};UltragatePaymentProvider.providerName="ULTRAGATE";var g=a(28550),P=a.n(g),w=a(58192).Buffer;let E=[{name:"Banco ABC Brasil",value:"246"},{name:"Banco C6",value:"336"},{name:"Banco da Amazonia",value:"003"},{name:"Banco do Brasil",value:"001"},{name:"Banco do Nordeste",value:"004"},{name:"Banco Topazio",value:"082-5"},{name:"Banestes",value:"021"},{name:"BCO FIBRA S.A.",value:"224"},{name:"BMG",value:"318"},{name:"BRB",value:"070"},{name:"Bradesco/Next",value:"036"},{name:"Bradesco/Next",value:"204"},{name:"Bradesco/Next",value:"237"},{name:"Caixa Econ\xf4mica",value:"104"},{name:"Citibank",value:"477"},{name:"Cora",value:"403"},{name:"Inter",value:"077"},{name:"Ita\xfa",value:"184"},{name:"Ita\xfa",value:"341"},{name:"Ita\xfa",value:"479"},{name:"Mercado Pago",value:"323"},{name:"Neon/Votorantim",value:"655"},{name:"Nubank",value:"260"},{name:"Picpay",value:"380"},{name:"Safra",value:"422"},{name:"Santander",value:"033"},{name:"Sicoob",value:"756"},{name:"XP Investimentos",value:"102"},{name:"ASAAS IP",value:"461"},{name:"Banrisul",value:"041"},{name:"Sicredi",value:"748"},{name:"Pagseguro",value:"290"},{name:"Banco Original",value:"212"},{name:"Modal",value:"746"},{name:"Unicred",value:"136"},{name:"Money Plus",value:"255"},{name:"Mercantil do Brasil",value:"389"},{name:"JP Morgan",value:"376"},{name:"Gerencianet Pagamentos do Brasil",value:"364"},{name:"BS2",value:"218"},{name:"Banco Daycoval",value:"707"},{name:"Rendimento",value:"633"},{name:"PJBank/Dock IP S.A.",value:"301"},{name:"Cooperativa Central de Credito Noroeste Brasileiro",value:"112"},{name:"Uniprime Norte do Paran\xe1",value:"084"},{name:"Global SCM",value:"137"},{name:"Banco BNP Paribas Brasil",value:"752"},{name:"Juno",value:"364"},{name:"Cresol",value:"133"},{name:"BRL Trust DTVM",value:"173"},{name:"Banco Banese",value:"047"},{name:"Banco BTG Pactual",value:"208"},{name:"Banco Omni",value:"128"},{name:"Acesso Solu\xe7\xf5es de Pagamento",value:"287"},{name:"CCR de S\xe3o Miguel do Oeste",value:"300"},{name:"Polocred",value:"117"},{name:"\xd3timo",value:"137"},{name:"Banco Ribeir\xe3o Preto",value:"135"},{name:"Banco Pan",value:"623"},{name:"Pefisa",value:"174"},{name:"J17 - SCD S/A",value:"191"},{name:"Credisan",value:"089"},{name:"Pinbank",value:"254"},{name:"Crefisa",value:"069"},{name:"Singulare",value:"211"},{name:"SUMUP SCD S.A.",value:"339"},{name:"HR Digital Sociedade de Cr\xe9dito Direto S.A",value:"298"},{name:"BANCO XP S.A.",value:"102"},{name:"Neon Pagamentos S.A. IP",value:"655"},{name:"CELCOIN INSTITUICAO DE PAGAMENTO S.A.",value:"509"},{name:"SUPERDIGITAL I.P. S.A.",value:"302"},{name:"UY3 SCD S/A",value:"304"},{name:"QI Sociedade de Cr\xe9dito",value:"308"},{name:"LISTO SCD S.A",value:"322"},{name:"ID CORRETORA DE T\xcdTULOS E VALORES MOBILI\xc1RIOS S.A",value:"337"},{name:"CARTOS SCD S.A.",value:"324"},{name:"PagPrime IP",value:"350"},{name:"MONETARIE SOCIEDADE DE CR\xc9DITO DIRETO S.A",value:"366"}];let IuguPaymentProvider=class IuguPaymentProvider extends BasePaymentProvider{static async processWebhook(e){if(e.event&&e.event.startsWith("invoice.status_changed")){let t=e["data[id]"],a=IuguPaymentProvider.parseStatus(e["data[status]"]);return{transactionId:t,status:a,type:"TRANSACTION"}}}async withdraw(e){if("RECEIVER"===e.paymentMethod){let t=await h.receiver.findFirst({where:{receiverId:e.receiverId}});if(!t)throw Error("Recebedor n\xe3o encontrado.");let a=await this.api.post("/accounts/".concat(e.receiverId,"/request_withdraw"),{amount:e.amount/100},{params:{api_token:t.receiverToken}});return{withdrawId:a.data.id,status:"PENDING",amount:a.data.amount_cents}}if("PIX"===e.paymentMethod){let t=await h.receiver.findFirst({where:{receiverId:e.receiverId,receiverProvider:IuguPaymentProvider.providerName},include:{platform:!0}});if(!t)throw Error("Recebedor n\xe3o encontrado.");let a=t.receiverId,r=t.receiverToken,n=w.from(t.platform.privateKey,"base64").toString("utf-8"),o=await this.api.get("/".concat(a,"/api_tokens"),{params:{api_token:r}}),s=o.data.find(e=>"LIVE"===e.api_type).token,d=i()().format(),c=JSON.stringify({receiver:{pix:{type:e.pixType.toLocaleLowerCase(),key:e.pixKey}},api_token:s,transfer_type:"pix",amount_cents:e.amount,description:e.description}),l="".concat("POST|/v1/transfer_requests","\n").concat(s,"|").concat(d,"\n").concat(c),u=function(e,t){let a=g.createSign("sha256");a.update(e),a.end();let r=a.sign(t,"base64");return r}(l,n);try{let e=await this.api.post("/transfer_requests",c,{headers:{"Request-Time":d,Signature:"signature=".concat(u)}});return{status:"done"===e.data.status?"APPROVED":"PENDING",amount:e.data.amount_cents,withdrawId:e.data.transfer_request_id}}catch(e){throw console.error(e.response.data),Error(JSON.stringify(e.response.data))}}throw Error("Method not implemented.")}async getWithdraw(e){let t={api_token:this.secretKey},a=await this.api.get("/withdraw_requests/".concat(e),{params:t});return{withdrawId:a.data.id,status:"PENDING",amount:a.data.amount_cents}}async createReceiver(e){var t;let a;let r={api_token:this.secretKey},o=await h.user.findFirstOrThrow({where:{id:e.userId}}),downloadFile=async e=>{let t=await n.default.get(e,{responseType:"arraybuffer"});return w.from(t.data)},i=o.photoDocument?(await downloadFile(o.photoDocument)).toString("base64"):"",s=o.photoPersonWithDocument?(await downloadFile(o.photoPersonWithDocument)).toString("base64"):"",d=o.photoDocumentSocialContract?(await downloadFile(o.photoDocumentSocialContract)).toString("base64"):"",c=o.addressProof?(await downloadFile(o.addressProof)).toString("base64"):"",l=o.balanceSheet?(await downloadFile(o.balanceSheet)).toString("base64"):"";if(!i)throw Error("Foto do documento \xe9 obrigat\xf3ria.");if(!s)throw Error("Foto do documento com pessoa \xe9 obrigat\xf3ria.");if(!c)throw Error("Comprovante de endere\xe7o \xe9 obrigat\xf3rio.");if(!l)throw Error("Balan\xe7o patrimonial \xe9 obrigat\xf3rio.");if(!d&&"CNPJ"===e.documentType)throw Error("Contrato social \xe9 obrigat\xf3rio.");let u=await this.api.post("/marketplace/create_account",{name:e.name},{params:r}),p=null===(t=E.find(t=>t.value===e.bankAccount.bankCode))||void 0===t?void 0:t.name;if(!p)throw Error("Banco n\xe3o suportado, tente outro.");let m=e.bankAccount.branchNumber;return e.bankAccount.branchDigit>"0"&&["001","036","246"].includes(e.bankAccount.bankCode)&&(m="".concat(e.bankAccount.branchNumber,"-").concat(e.bankAccount.branchDigit)),a="CPF"===e.documentType?{data:{name:e.name,price_range:"Mais que R$ 500,00",physical_products:!0,business_type:e.description,person_type:"Pessoa F\xedsica",automatic_transfer:!1,cpf:e.document,address:"".concat(e.address.number,", ").concat(e.address.street),cep:e.address.zipcode,city:e.address.city,district:e.address.district,state:e.address.state,telephone:"",bank:p,bank_ag:m,account_type:"Corrente",bank_cc:"".concat(e.bankAccount.accountNumber,"-").concat(e.bankAccount.accountDigit)},files:{identification:i,selfie:s,address_proof:c}}:{data:{company_name:e.name,price_range:"Mais que R$ 500,00",physical_products:!0,business_type:e.description,person_type:"Pessoa Jur\xeddica",automatic_transfer:!1,cnpj:e.document,address:"".concat(e.address.number,", ").concat(e.address.street),cep:e.address.zipcode,city:e.address.city,district:e.address.district,state:e.address.state,telephone:"",bank:p,bank_ag:m,account_type:"Corrente",bank_cc:"".concat(e.bankAccount.accountNumber,"-").concat(e.bankAccount.accountDigit)},files:{identification:i,selfie:s,address_proof:c,balance_sheet:l,social_contract:d}},await this.api.post("/accounts/".concat(u.data.account_id,"/request_verification"),a,{params:{api_token:u.data.user_token}}),{status:"ACTIVE",balance:0,name:e.name,document:e.document,documentType:e.documentType,email:e.email,receiverId:u.data.account_id,receiverToken:u.data.user_token,receiverProvider:IuguPaymentProvider.providerName}}async getReceiver(e){var t,a;let r;let n=await h.receiver.findFirst({where:{receiverId:e}});if(!n)throw Error("Receiver not found.");let o=await this.api.get("/accounts/".concat(e),{params:{api_token:n.receiverToken}});function mapPersonTypeToDocumentType(e){return"Pessoa F\xedsica"===e?"CPF":"Pessoa Jur\xeddica"===e?"CNPJ":void 0}if(o.data["can_receive?"]&&!o.data.configuration.pix.active&&await this.api.put("/payments/pix",{enable:!0},{params:{api_token:n.receiverToken}}),o.data["can_receive?"]&&!o.data.configuration.credit_card.installments&&await this.api.post("/accounts/configuration",{credit_card:{installments:!0}},{params:{api_token:n.receiverToken}}),console.dir(o.data,{depth:null}),(r=mapPersonTypeToDocumentType(null===(t=o.data.last_verification_request_data)||void 0===t?void 0:t.person_type))||(r=mapPersonTypeToDocumentType(null===(a=o.data.contact_data)||void 0===a?void 0:a.document_number)),!r&&Array.isArray(o.data.informations)){let e=o.data.informations.find(e=>"person_type"===e.key);r=mapPersonTypeToDocumentType(null==e?void 0:e.value)}if(!r)throw Error("Tipo de documento n\xe3o encontrado.");let i="REJECTED";return o.data["can_receive?"]?i="ACTIVE":o.data.last_verification_request_data&&(i="pending"===o.data.last_verification_request_status?"PENDING":"REJECTED"),{receiverProvider:IuguPaymentProvider.providerName,name:o.data.name,receiverId:o.data.id,status:i,balance:o.data.balance,document:o.data.contact_data.document_number,documentType:r,email:n.email,receiverToken:n.receiverToken}}static parseStatus(e){switch(e){case"created":case"pending":return"PENDING";case"paid":case"authorized":case"externally_paid":return"APPROVED";case"expired":default:return"REJECTED";case"chargedback":case"chargeback":case"in_protest":case"refunded":return"CHARGEBACK"}}async createCardToken(e){let t=window,a=t.Iugu;a.setAccountID(e.receiverId);let r=a.CreditCard(e.cardNumber,e.expMonth,"20".concat(e.expYear),e.holderName.split(" ")[0],e.holderName.split(" ")[1],e.cvv),n=await new Promise((e,t)=>{a.createPaymentToken(r,function(a){a.errors&&t(Error("Erro salvando cart\xe3o")),e(a.id)})});return n}async createCardId(e){return e.cardToken}async createTransaction(e){var t,a,r,n,o,s,d;let c={api_token:e.receiverToken},l=await h.receiver.findFirstOrThrow({where:{receiverToken:e.receiverToken},select:{platform:!0,receiverId:!0}}),u=i()(new Date).add(1,"days").format("YYYY-MM-DD"),p=null===(t=e.splits)||void 0===t?void 0:t.filter(e=>e.recipientId!==l.receiverId).map(e=>"FIXED"===e.type?{recipient_account_id:e.recipientId,cents:e.amount}:{recipient_account_id:e.recipientId,percent:e.amount}),m={email:e.customer.email,payer:{cpf_cnpj:e.customer.document,name:e.customer.name,phone:e.customer.phone,email:e.customer.email,address:{zip_code:null===(a=e.address)||void 0===a?void 0:a.zipCode,street:null===(r=e.address)||void 0===r?void 0:r.address,number:null===(n=e.address)||void 0===n?void 0:n.number,district:null===(o=e.address)||void 0===o?void 0:o.district,city:null===(s=e.address)||void 0===s?void 0:s.city,state:null===(d=e.address)||void 0===d?void 0:d.state}},payable_with:[e.paymentMethod.toLocaleLowerCase()],due_date:u,return_url:e.webhookUrl,splits:p,items:e.items.map(e=>({description:e.title,quantity:e.quantity,price_cents:e.unitPrice}))};if("PIX"===e.paymentMethod){let{data:e}=await this.api.post("/invoices",{...m},{params:c});return{paymentMethod:e.payable_with,amount:e.total_cents,transactionId:e.id,status:IuguPaymentProvider.parseStatus(e.status),pixCode:e.pix.qrcode_text,pixQrCode:e.pix.qrcode}}if("CREDIT_CARD"===e.paymentMethod){let{data:t}=await this.api.post("/invoices",{...m},{params:c});return await this.api.post("/charge",{token:e.cardId,months:e.installments,invoice_id:t.id},{params:c}),{paymentMethod:t.payable_with,amount:t.total_cents,transactionId:t.id,status:IuguPaymentProvider.parseStatus(t.status)}}if("BILLET"===e.paymentMethod){let{data:e}=await this.api.post("/invoices",{...m,payable_with:"bank_slip"},{params:c});return{paymentMethod:"BILLET",amount:e.total_cents,transactionId:e.id,status:IuguPaymentProvider.parseStatus(e.status),billetUrl:e.bank_slip.bank_slip_pdf_url,billetCode:e.bank_slip.digitable_line}}throw Error("Method not implemented.")}async getTransaction(e,t){let{data:a}=await this.api.get("/invoices/".concat(e),{params:{api_token:t}});if("pix"===a.payable_with)return{paymentMethod:"PIX",amount:a.total_cents,status:IuguPaymentProvider.parseStatus(a.status),transactionId:a.id,expiresAt:a.due_date,pixCode:a.pix.qrcode_text,pixQrCode:a.pix.qrcode};if("credit_card"===a.payable_with)return{paymentMethod:"CREDIT_CARD",amount:a.total_cents,status:IuguPaymentProvider.parseStatus(a.status),transactionId:a.id};if("bank_slip"===a.payable_with)return{paymentMethod:"BILLET",amount:a.total_cents,status:IuguPaymentProvider.parseStatus(a.status),transactionId:a.id,billetUrl:a.bank_slip.bank_slip_pdf_url,billetCode:a.bank_slip.digitable_line};throw Error("Method not implemented.")}async refoundTransaction(e,t,a){try{let r=await this.api.post("/invoices/".concat(e,"/refund"),{partial_value_refund_cents:t},{params:{api_token:a}});return{refundId:r.data.id,status:200===r.status}}catch(e){throw console.error(e),new c.bR({code:"BAD_REQUEST",message:"Erro ao aprovar o reembolso."})}}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://api.iugu.com/v1",headers:{"Content-Type":"application/json"}})}};IuguPaymentProvider.providerName="IUGU";var I=a(19519),b=a.n(I);let CardEncryption=class CardEncryption{encryptCardData(e){let{cardNumber:t,holderName:a,holderDocument:r,expMonth:n,expYear:o,cvv:i}=e,s="".concat(t,"|").concat(a,"|").concat(r,"|").concat(n,"|").concat(o,"|").concat(i),d=b().AES.encrypt(s,this.secretKey).toString();return d}decryptCardData(e){let t=b().AES.decrypt(e,this.secretKey),a=t.toString(b().enc.Utf8),[r,n,o,i,s,d]=a.split("|");return{cardNumber:r,holderName:n,holderDocument:o,expMonth:i,expYear:s,cvv:d}}constructor(e){this.secretKey=e}};var A=a(58192).Buffer;let SaqpayPaymentProvider=class SaqpayPaymentProvider extends BasePaymentProvider{static async processWebhook(e){return{transactionId:String(e.transaction_id),type:"TRANSACTION",status:this.parseStatus(e.transaction_status)}}static parseStatus(e){switch(e){case"Pendente":return"PENDING";case"Aprovado":case"Transferido":return"APPROVED";case"Negado/Erro":default:return"REJECTED";case"Cancelado":return"CHARGEBACK"}}withdraw(e){throw Error("Method not implemented.")}getWithdraw(e){throw Error("Method not implemented.")}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}async createCardToken(e){var t;let a=new CardEncryption(null!==(t=this.publicKey)&&void 0!==t?t:"saqpay-secret-public-secret-shddkzawdh2-lzswkwzhsd"),r=a.encryptCardData(e);return r}async createCardId(e){return e.cardToken}async createTransaction(e){let t={authorization:"Basic "+A.from("".concat(this.secretKey,":").concat(this.publicKey)).toString("base64")};if("PIX"===e.paymentMethod){let a=await this.api.post("/api/venda",{valor:Number(e.amount/100),telefone:e.customer.phone,cpf:e.customer.document,nomeCliente:e.customer.name,partnerConciliationId:"".concat(e.userDocument,"-").concat(e.userId)},{headers:t});return{paymentMethod:"PIX",transactionId:String(a.data[0].id),pixQrCode:await s.toDataURL(a.data[0].emv),pixCode:a.data[0].emv,status:"PENDING",amount:e.amount}}if("CREDIT_CARD"===e.paymentMethod){var a;let r=new CardEncryption(null!==(a=this.publicKey)&&void 0!==a?a:"saqpay-secret-public-secret-shddkzawdh2-lzswkwzhsd"),{holderDocument:n,cardNumber:o,cvv:s,expMonth:d,expYear:c,holderName:l}=r.decryptCardData(e.cardId),u=await this.api.post("/api/cartao-credito/parcelado",{amount:Number(e.amount/100),chargeDay:i()(new Date).format("YYYY-MM-DD"),installments:e.installments,creditCardDataPayment:{customer:{documentNumber:e.customer.document},creditCard:{number:o,holder:l,expiresAt:"20".concat(c,"-").concat(d),cvv:s}},additionalInfo:""},{headers:t});return{paymentMethod:"CREDIT_CARD",transactionId:String(u.data.id),status:SaqpayPaymentProvider.parseStatus(u.data.status),amount:e.amount}}throw Error("Method not implemented.")}async getTransaction(e,t){let a={authorization:"Basic "+A.from("".concat(this.secretKey,":").concat(this.publicKey)).toString("base64")},r=await this.api.get("/api/transaction/".concat(e),{headers:a}),n=r.data;return{paymentMethod:"PIX",transactionId:String(n.idTransacaoComprovante),pixQrCode:await s.toDataURL(n.encodedValue),pixCode:n.encodedValue,status:SaqpayPaymentProvider.parseStatus(n.status),amount:100*n.amountSale}}async refoundTransaction(e,t){throw Error("Method not implemented.")}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://pix-service.saqja.com",headers:{"Content-Type":"application/json"}})}};SaqpayPaymentProvider.providerName="SAQPAY";var N=a(58192).Buffer;let PrimePagProvider=class PrimePagProvider extends BasePaymentProvider{static parseStatus(e){switch(e){case"awaiting_payment":return"PENDING";case"paid":return"APPROVED";default:return"REJECTED"}}async getAuthorization(){let e=await this.api.post("/auth/generate_token",{grant_type:"client_credentials"},{headers:{"Content-Type":"application/json",Authorization:"BASIC "+N.from(this.publicKey+":"+this.secretKey).toString("base64")}});return"Bearer ".concat(e.data.access_token)}static async processWebhook(e){if("pix_qrcode"===e.notification_type)return{transactionId:String(e.message.reference_code),type:"TRANSACTION",status:PrimePagProvider.parseStatus(e.message.status)}}async createTransaction(e){let t=await this.getAuthorization(),a={value_cents:e.amount,generator_name:e.customer.name,generator_document:e.customer.document,expiration_time:"1800"};if("PIX"===e.paymentMethod){let{data:r}=await this.api.post("/v1/pix/qrcodes",a,{headers:{Authorization:t}});return{paymentMethod:"PIX",amount:e.amount,transactionId:r.qrcode.reference_code,status:"PENDING",pixCode:r.qrcode.content,pixQrCode:await s.toDataURL(r.qrcode.content)}}throw Error("Method not implemented.")}async getTransaction(e,t){let a=await this.getAuthorization(),{data:r}=await this.api.get("/v1/pix/qrcodes/".concat(e),{headers:{Authorization:a}});return{paymentMethod:"PIX",transactionId:String(r.qrcode.reference_code),pixQrCode:await s.toDataURL(r.qrcode.content),pixCode:r.qrcode.content,status:PrimePagProvider.parseStatus(r.qrcode.status),amount:100*r.qrcode.value_cents}}createCardToken(e){throw Error("Method not implemented.")}createCardId(e){throw Error("Method not implemented.")}refoundTransaction(e,t){throw Error("Method not implemented.")}async withdraw(e){let t=await this.getAuthorization();if("PIX"===e.paymentMethod){let{data:a}=await this.api.post("/v1/pix/payments",{initiation_type:"dict",idempotent_id:(0,x.Z)(),receiver_document:e.document,value_cents:e.amount,pix_key_type:e.pixType.toLocaleLowerCase(),pix_key:e.pixKey,authorized:!0},{headers:{Authorization:t}});return{withdrawId:a.payment.reference_code,status:a.payment.status,amount:a.payment.value_cents}}throw Error("Method not implemented.")}async getWithdraw(e){let t=await this.getAuthorization(),{data:a}=await this.api.get("v1/pix/payments/".concat(e),{headers:{Authorization:t}});return{withdrawId:a.payment.reference_code,status:"APPROVED",amount:a.payment.value_cents}}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://api.primepag.com.br",headers:{"Content-Type":"application/json"}})}};PrimePagProvider.providerName="PRIMEPAG";let SuitpayPaymentProvider=class SuitpayPaymentProvider extends BasePaymentProvider{static parseStatus(e){switch(e){case"UNPAID":case"WAITING_FOR_APPROVAL":return"PENDING";case"PAID_OUT":case"PAYMENT_ACCEPT":return"APPROVED";case"CANCELED":default:return"REJECTED";case"CHARGEBACK":return"CHARGEBACK"}}static async processWebhook(e){return{transactionId:e.idTransaction,type:"TRANSACTION",status:this.parseStatus(e.statusTransaction)}}withdraw(e){throw Error("Method not implemented.")}getWithdraw(e){throw Error("Method not implemented.")}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}async createCardToken(e){throw Error("Method not implemented.")}async createCardId(e){throw Error("Method not implemented.")}async createTransaction(e){let t={ci:this.publicKey,cs:this.secretKey},a=i()(new Date).add(1,"days").format("YYYY-MM-DD"),r=e.items.map(e=>({description:e.title,quantity:e.quantity,value:e.unitPrice/100})),n={requestNumber:(0,x.Z)(),amount:Number(e.amount/100),client:{name:e.customer.name,document:e.customer.document,phoneNumber:e.customer.phone,email:e.customer.email},callbackUrl:e.webhookUrl,dueDate:a,products:r};if("PIX"===e.paymentMethod){let a=await this.api.post("/gateway/request-qrcode",n,{headers:t});return{paymentMethod:"PIX",transactionId:a.data.idTransaction,pixQrCode:await s.toDataURL(a.data.paymentCodeBase64),pixCode:a.data.paymentCode,status:"PENDING",amount:e.amount}}throw Error("Method not implemented.")}async getTransaction(e,t){throw Error("Method not implemented.")}async refoundTransaction(e,t){throw Error("Method not implemented.")}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://ws.suitpay.app/api/v1",headers:{"Content-Type":"application/json"}})}};SuitpayPaymentProvider.providerName="SUITPAY";let MercadoPagoPaymentProvider=class MercadoPagoPaymentProvider extends BasePaymentProvider{static async processWebhook(e){if(e.action.startsWith("payment"))return{transactionId:String(e.id),type:"TRANSACTION",status:this.parseStatus(e.status)}}withdraw(e){throw Error("Method not implemented.")}getWithdraw(e){throw Error("Method not implemented.")}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}static parseStatus(e){switch(e){case"pending":case"in_process":case"in_mediation":return"PENDING";case"approved":case"authorized":return"APPROVED";case"refunded":case"cancelled":return"REFUNDED";case"charged_back":return"CHARGEBACK";default:return"REJECTED"}}async createCardToken(e){throw Error("Method not implemented.")}async createCardId(e){throw Error("Method not implemented.")}async createTransaction(e){var t;let a={Authorization:"Bearer "+this.secretKey,"X-Idempotency-Key":(0,x.Z)()},r=e.items.map(e=>({id:e.id,title:e.title,unit_price:e.unitPrice,quantity:e.quantity,category_id:"others"})),n={transaction_amount:e.amount,description:e.description||(null===(t=e.items[0])||void 0===t?void 0:t.title)||"Payment",payment_method_id:{PIX:"pix",CREDIT_CARD:"credit_card",BILLET:"boleto"}[e.paymentMethod],payer:{entity_type:"individual",type:"customer",email:e.customer.email,first_name:e.customer.name,identification:{type:"CPF",number:e.customer.document}},additional_info:{items:r,payer:{first_name:e.customer.name}},metadata:{}};if("PIX"===e.paymentMethod){let e=await this.api.post("/payments",n,{headers:a});return{paymentMethod:"PIX",transactionId:String(e.data.id),pixQrCode:e.data.point_of_interaction.transaction_data.qr_code_base64,expiresAt:i()(e.data.date_of_expiration).toDate(),pixCode:e.data.point_of_interaction.transaction_data.qr_code,status:MercadoPagoPaymentProvider.parseStatus(e.data.status),amount:e.data.transaction_amount}}if("CREDIT_CARD"===e.paymentMethod){let t=await this.api.post("/payments",{...n,token:e.cardId,installments:e.installments},{headers:a});return{paymentMethod:"CREDIT_CARD",transactionId:String(t.data.id),status:MercadoPagoPaymentProvider.parseStatus(t.data.status),amount:t.data.transaction_amount}}throw Error("Method not implemented.")}async getTransaction(e,t){let a={Authorization:"Bearer "+this.secretKey},r=await this.api.get("/payments/".concat(e),{headers:a}),n=r.data;if("pix"===n.payment_type_id)return{paymentMethod:"PIX",transactionId:String(n.id),pixQrCode:n.point_of_interaction.transaction_data.qr_code_base64,pixCode:n.point_of_interaction.transaction_data.qr_code,expiresAt:i()(n.date_of_expiration).toDate(),status:MercadoPagoPaymentProvider.parseStatus(n.status),amount:n.transaction_amount};if("credit_card"===n.payment_type_id)return{paymentMethod:"CREDIT_CARD",transactionId:String(n.id),status:MercadoPagoPaymentProvider.parseStatus(n.status),amount:n.transaction_amount};throw Error("Payment method not supported")}async refoundTransaction(e,t){let a={Authorization:"Bearer "+this.secretKey,"X-Idempotency-Key":(0,x.Z)()},r=await this.api.post("/payments/".concat(e,"/refunds"),{amount:t},{headers:a});return{refundId:r.data.id,status:200===r.status}}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://api.mercadopago.com/v1",headers:{"Content-Type":"application/json"}})}};MercadoPagoPaymentProvider.providerName="MERCADOPAGO";var D=a(58192).Buffer;let SpacefyPaymentProvider=class SpacefyPaymentProvider extends BasePaymentProvider{static async processWebhook(e){if("transaction"===e.type)return{transactionId:String(e.data.id),type:"TRANSACTION",status:this.parseStatus(e.data.status)}}async withdraw(e){let t={authorization:"Basic "+D.from(this.secretKey+":x").toString("base64")};if("PIX"===e.paymentMethod){let a={amount:e.amount,pixKey:e.pixKey},r=await this.api.post("/transfers",a,{headers:t});return{amount:r.data.amount,withdrawId:r.data.id,status:r.data.status}}if("BANK_ACCOUNT"===e.paymentMethod){let a={amount:e.amount,bankAccount:{bankCode:e.bankCode,agencyNumber:e.branchNumber,accountNumber:e.accountNumber,accountDigit:e.accountNumber,type:"conta_corrente",legalName:e.accountHolder,documentNumber:e.accountDocument,documentType:11===e.accountDocument.length?"cpf":"cnpj"}},r=await this.api.post("/transfers",a,{headers:t});return{amount:r.data.amount,withdrawId:r.data.id,status:r.data.status}}{let a={amount:e.amount,recipientId:e.receiverId},r=await this.api.post("/transfers",a,{headers:t});return{amount:r.data.amount,withdrawId:r.data.id,status:r.data.status}}}async getWithdraw(e){let t={authorization:"Basic "+D.from(this.secretKey+":x").toString("base64")},a=await this.api.get("/transfers/".concat(e),{headers:t});return{amount:a.data.amount,withdrawId:a.data.id,status:a.data.status}}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}static parseStatus(e){switch(e){case"processing":case"waiting_payment":case"partially_paid":case"in_protest":return"PENDING";case"paid":case"authorized":return"APPROVED";case"refunded":case"canceled":return"REFUNDED";case"chargedback":return"CHARGEBACK";default:return"REJECTED"}}async createCardToken(e){let t=await this.api.post("/card-token?publicKey="+this.publicKey,{number:parseInt(e.cardNumber.replace(/\D/g,"")),holderName:e.holderName,expirationMonth:parseInt(e.expMonth),expirationYear:parseInt("20"+e.expYear),cvv:e.cvv});return t.data}async createCardId(e){return e.cardToken}async createTransaction(e){let t={authorization:"Basic "+D.from(this.secretKey+":x").toString("base64")},a=e.items.map(e=>({title:e.title,unitPrice:e.unitPrice,quantity:e.quantity,tangible:e.tangible})),r={amount:e.amount,postbackUrl:e.webhookUrl,customer:{document:{number:e.customer.document,type:"cpf"},email:e.customer.email,name:e.customer.name,phone:e.customer.phone},paymentMethod:{PIX:"pix",CREDIT_CARD:"credit_card",BILLET:"boleto"}[e.paymentMethod],traceable:!1,items:a};if("PIX"===e.paymentMethod){let e=await this.api.post("/transactions",{...r,pix:{expiresInDays:1}},{headers:t});return{paymentMethod:"PIX",transactionId:String(e.data.id),pixQrCode:await s.toDataURL(e.data.pix.qrcode),expiresAt:i()(e.data.pix.qrcode.expirationDate).toDate(),pixCode:e.data.pix.qrcode,status:SpacefyPaymentProvider.parseStatus(e.data.status),amount:e.data.amount}}if("CREDIT_CARD"===e.paymentMethod){let a=await this.api.post("/transactions",{...r,card:{hash:e.cardId},installments:e.installments},{headers:t});return{paymentMethod:"CREDIT_CARD",transactionId:String(a.data.id),status:SpacefyPaymentProvider.parseStatus(a.data.status),amount:a.data.amount}}if("BILLET"===e.paymentMethod){let e=await this.api.post("/transactions",{...r,boleto:{expiresInDays:3}},{headers:t});return{paymentMethod:"BILLET",transactionId:String(e.data.id),status:SpacefyPaymentProvider.parseStatus(e.data.status),amount:e.data.amount,billetCode:e.data.boleto.digitableLine,billetUrl:e.data.boleto.url,expiresAt:i()(e.data.boleto.expirationDate).toDate()}}throw Error("Method not implemented.")}async getTransaction(e,t){let a={authorization:"Basic "+D.from(this.secretKey+":x").toString("base64")},r=await this.api.get("/transactions/".concat(e),{headers:a}),n=r.data;if("pix"===n.paymentMethod)return{paymentMethod:"PIX",transactionId:String(n.id),pixQrCode:await s.toDataURL(n.pix.qrcode),pixCode:n.pix.qrcode,expiresAt:i()(n.pix.expirationDate).toDate(),status:SpacefyPaymentProvider.parseStatus(n.status),amount:n.amount};if("credit_card"===n.paymentMethod)return{paymentMethod:"CREDIT_CARD",transactionId:String(n.id),status:SpacefyPaymentProvider.parseStatus(n.status),amount:n.amount};if("boleto"===n.paymentMethod)return{paymentMethod:"BILLET",transactionId:String(n.id),status:SpacefyPaymentProvider.parseStatus(n.status),amount:n.amount,billetUrl:n.boleto.url,billetCode:n.boleto.digitableLine,expiresAt:i()(n.boleto.expirationDate).toDate()};throw Error("Method not implemented.")}async refoundTransaction(e,t){let a={authorization:"Basic "+D.from(this.secretKey+":x").toString("base64")},r=await this.api.post("/transactions/".concat(e,"/refund"),{amount:t},{headers:a});return{refundId:r.data.id,status:200===r.status}}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://api.spacefybrasil.com.br/v1",headers:{"Content-Type":"application/json"}})}};SpacefyPaymentProvider.providerName="SPACEFY";let PagstarPaymentProvider=class PagstarPaymentProvider extends BasePaymentProvider{static async processWebhook(e){if("pay"===e.type)return{transactionId:e.external_reference,type:"TRANSACTION",status:PagstarPaymentProvider.parseStatus(e.status)}}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}async withdraw(e){if("PIX"===e.paymentMethod){let t=await n.default.post(" https://api.pagstar.com/api/v3.1/wallet/partner/withdrawals/solicit-for-customer",{customer_document:e.document,value:e.amount/100,pix_key:e.pixKey,transaction_id:(0,x.Z)(),pix_key_type:{CPF:"CPF",EMAIL:"EMAIL",PHONE:"TELEFONE",RANDOM:"CHAVE_ALEATORIA",CNPJ:"CNPJ"}[e.pixType]},{headers:{Authorization:"Bearer ".concat(this.secretKey)}});return{amount:e.amount,withdrawId:t.data.data.external_reference,status:"PENDING"}}throw Error("Method not implemented.")}async getWithdraw(e){let{data:t}=await n.default.get("https://api.pagstar.com/api/v2/wallet/partner/transfers/".concat(e,"/check"),{headers:{Authorization:"Bearer ".concat(this.secretKey)}});return{amount:t.data.value,status:PagstarPaymentProvider.parseWithdrawStatus(t.data.status),withdrawId:e}}static parseWithdrawStatus(e){switch(e){case"pending":case"processing":return"PENDING";case"approved":return"APPROVED";default:return"REJECTED"}}static parseStatus(e){switch(e){case"pending":case"processing":return"PENDING";case"approved":return"APPROVED";case"canceled":return"REFUNDED";case"chargedback":return"CHARGEBACK";default:return"REJECTED"}}createCardToken(e){throw Error("Method not implemented.")}createCardId(e){throw Error("Method not implemented.")}async createTransaction(e){let t=await this.api.get("/identity/partner/get-tenant",{headers:{Authorization:"Bearer ".concat(this.secretKey)}});if("PIX"===e.paymentMethod){let a=await this.api.post("/wallet/partner/transactions/generate-anonymous-pix",{value:e.amount/100,tenant_id:t.data.data.tenant_id,name:e.customer.name,document:e.customer.document,description:e.description,expiration:86400,transaction_id:(0,x.Z)()},{headers:{Authorization:"Bearer ".concat(this.secretKey)}});return{paymentMethod:"PIX",amount:e.amount,transactionId:a.data.data.external_reference,pixQrCode:a.data.data.qr_code_url,pixCode:a.data.data.pix_key,status:"PENDING",expiresAt:i()(new Date).add(1,"day").toDate()}}throw Error("Not implemented yet.")}async getTransaction(e,t){let{data:a}=await n.default.get("https://api.pagstar.com/api/v3/wallet/partner/transactions/".concat(e),{headers:{Authorization:"Bearer ".concat(this.secretKey),"User-Agent":"Company X (contato@empresa.com)"}});return{paymentMethod:"PIX",transactionId:a.data.external_reference,pixQrCode:await s.toDataURL(a.data.details.pix_key),pixCode:a.data.details.pix_key,status:PagstarPaymentProvider.parseStatus(a.data.status),amount:a.data.value}}async refoundTransaction(e,t){throw Error("Not implemented yet.")}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://api.pagstar.com/api/v2",headers:{"Content-Type":"application/json","User-Agent":"Company X (contato@empresa.com)"}})}};PagstarPaymentProvider.providerName="PAGSTAR";let WalletzPaymentProvider=class WalletzPaymentProvider extends BasePaymentProvider{async getAuthorization(){let e=this.secretKey,[t,a,r,n]=e.split("-"),o=await this.api.get("/TokenAcessoSaquei",{headers:{"x-Afiliado":t,"x-Terminal":a,"x-User":r,"x-Password":n}});return{token:o.data.token,afilliate:t,terminal:a}}static parseWithdrawStatus(e){switch(e){case"pending":case"processing":return"PENDING";case"approved":return"APPROVED";default:return"REJECTED"}}static parseStatus(e){switch(e){case"aguardando":return"PENDING";case"pago":return"APPROVED";default:return"REJECTED"}}static async processWebhook(e){if("pay"===e.type)return{transactionId:e.external_reference,type:"TRANSACTION",status:WalletzPaymentProvider.parseStatus(e.status)}}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}async withdraw(e){if("PIX"===e.paymentMethod){let t=await n.default.post(" https://api.pagstar.com/api/v3.1/wallet/partner/withdrawals/solicit-for-customer",{customer_document:e.document,value:e.amount/100,pix_key:e.pixKey,transaction_id:(0,x.Z)(),pix_key_type:{CPF:"CPF",EMAIL:"EMAIL",PHONE:"TELEFONE",RANDOM:"CHAVE_ALEATORIA",CNPJ:"CNPJ"}[e.pixType]},{headers:{Authorization:"Bearer ".concat(this.secretKey)}});return{amount:e.amount,withdrawId:t.data.data.external_reference,status:"PENDING"}}throw Error("Method not implemented.")}async getWithdraw(e){let{data:t}=await n.default.get("https://api.pagstar.com/api/v2/wallet/partner/transfers/".concat(e,"/check"),{headers:{Authorization:"Bearer ".concat(this.secretKey)}});return{amount:t.data.value,status:WalletzPaymentProvider.parseWithdrawStatus(t.data.status),withdrawId:e}}createCardToken(e){throw Error("Method not implemented.")}createCardId(e){throw Error("Method not implemented.")}async createTransaction(e){let{token:t,afilliate:a,terminal:r}=await this.getAuthorization();if("PIX"===e.paymentMethod){let n=await this.api.post("/GeraCobrancaPix",{"x-afiliado":a,"x-terminal":r,"x-valor":(e.amount/100).toFixed(2).toString(),"x-documento":e.customer.document,"x-wallet":"pix","x-descricao":e.items[0].title,"x-cpfcliente":e.customer.document,"x-tempoqrcode":"8000"},{headers:{Authorization:"Bearer ".concat(t)}});return{paymentMethod:"PIX",amount:e.amount,transactionId:n.data.transactionIdentification,pixQrCode:await s.toDataURL(n.data.location.emv),pixCode:n.data.location.emv,status:"PENDING",expiresAt:i()(new Date).add(1,"day").toDate()}}throw Error("Not implemented yet.")}async getTransaction(e,t){let{token:a,afilliate:r,terminal:n}=await this.getAuthorization(),{data:o}=await this.api.get("/VerificaCobrancaPix?x-OrderId=".concat(e,"&x-Terminal=").concat(n,"&x-Afiliado=").concat(r),{headers:{Authorization:"Bearer ".concat(a)}});return{paymentMethod:"PIX",transactionId:e,pixQrCode:"",pixCode:"",status:WalletzPaymentProvider.parseStatus(o.retorno),amount:0}}async refoundTransaction(e,t){throw Error("Not implemented yet.")}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://api.jasaquei.com.br",headers:{"Content-Type":"application/json"}})}};WalletzPaymentProvider.providerName="WALLETZ";let SimPayPaymentProvider=class SimPayPaymentProvider extends BasePaymentProvider{static parseWithdrawStatus(e){switch(e){case"pending":case"processing":return"PENDING";case"approved":return"APPROVED";default:return"REJECTED"}}static parseStatus(e){switch(e){case"pending":case"in_process":case"in_review":return"PENDING";case"approved":return"APPROVED";case"refused":case"canceled":case"canceled_antifraud":default:return"REJECTED";case"refunded":case"partial_refunded":case"refunded_requested":case"charge_back":case"charge_back_requested":case"in_dispute":return"REFUNDED"}}static async processWebhook(e){return{transactionId:e.payment_code,type:"TRANSACTION",status:SimPayPaymentProvider.parseStatus(e.payment_status)}}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}async withdraw(e){throw Error("Method not implemented.")}async getWithdraw(e){throw Error("Method not implemented.")}async createCardToken(e){let t=new CardEncryption(this.secretKey),a=t.encryptCardData(e);return a}async createCardId(e){return e.cardToken}async createTransaction(e){let t=e.items.map(e=>({item_id:(0,x.Z)(),quantity:e.quantity,unit_price:e.unitPrice,description:e.title}));if("PIX"===e.paymentMethod){let a=await this.api.post("/payment",{external_code:e.orderId,payment_method:"pix",payment_format:"upsell",installments:1,payment_amount:e.amount,postback_url:e.webhookUrl,pix:{expires_in_days:"1"},items:t,customer:{ip:"1",name:e.customer.name,email:e.customer.email,phone:e.customer.phone,document:e.customer.document}});return{paymentMethod:"PIX",amount:e.amount,transactionId:a.data.payment_code,pixQrCode:await s.toDataURL(a.data.pix.pix_qrcode_text),pixCode:a.data.pix.pix_link,status:"PENDING",expiresAt:i()(new Date).add(1,"day").toDate()}}if("CREDIT_CARD"===e.paymentMethod){let a=new CardEncryption(this.secretKey),{cardNumber:r,cvv:n,expMonth:o,expYear:i,holderDocument:s,holderName:d}=a.decryptCardData(e.cardId),c=await this.api.post("/payment",{external_code:e.orderId,payment_method:"credit_card",payment_format:"upsell",installments:e.installments,payment_amount:e.amount,postback_url:e.webhookUrl,items:t,card:{number:r,holder_name:d,cvv:n,expiration_month:o,expiration_year:"20".concat(i),soft_descriptor:e.description},customer:{ip:"1",name:e.customer.name,email:e.customer.email,phone:e.customer.phone,document:e.customer.document}});return{paymentMethod:"CREDIT_CARD",transactionId:String(c.data.payment_code),status:SimPayPaymentProvider.parseStatus(c.data.payment_status),amount:c.data.amount}}throw Error("Not implemented yet.")}async getTransaction(e,t){let{data:a}=await n.default.get("https://seller.simpayments.com.br/api/payment/".concat(e),{headers:{Authorization:"Basic c2ltcGF5bWVudHNleHRlcm5hbGFwaWFjY2Vzcw=="}});return a.refund&&(a.data.status="refunded"),{paymentMethod:"CREDIT_CARD",transactionId:e,status:SimPayPaymentProvider.parseStatus(a.data.status),amount:100*a.data.value}}async refoundTransaction(e,t){throw Error("Not implemented yet.")}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://checkout.simpayments.com.br/api/v1",headers:{"Content-Type":"application/json",Authorization:"Basic ".concat(this.secretKey)}})}};SimPayPaymentProvider.providerName="SIMPAY";let FirebankPaymentProvider=class FirebankPaymentProvider extends BasePaymentProvider{static async processWebhook(e){if(e)return{transactionId:String(e.transactionId),type:"TRANSACTION",status:this.parseStatus(e.status)}}async withdraw(e){var t;let a;let r={apiKey:this.secretKey};if((t=a||(a={})).CPF="DOCUMENT",t.CNPJ="SOCIAL_NUMBER",t.PHONE="PHONE",t.EMAIL="MAIL",t.RANDOM="RANDOM_KEY","PIX"===e.paymentMethod){let t=await this.api.post("/payment/withdraw",{type:"PIX",value:e.amount/100,details:{key:e.pixKey,keyType:a[e.pixType],document:e.document,name:e.name}},{headers:r});if("ERROR"===t.data.status)throw Error("Error on withdraw");return{amount:e.amount,withdrawId:t.data.transactionId,status:FirebankPaymentProvider.parseWithdrawStatus(t.data.status)}}throw Error("Method not implemented.")}getWithdraw(e){throw Error("Method not implemented.")}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}static parseWithdrawStatus(e){switch(e){case"WAITING_CONFIRMATION":case"WAITING_PAYMENT":case"WAITING_WITHDRAW":case"WITHDRAW_REQUEST":return"PENDING";case"WITHDRAW_PAID":case"PAID":case"APPROVED":return"APPROVED";default:return"REJECTED"}}static parseStatus(e){switch(e){case"WAITING_CONFIRMATION":case"WAITING_PAYMENT":case"WAITING_WITHDRAW":case"WITHDRAW_REQUEST":return"PENDING";case"WITHDRAW_PAID":case"PAID":case"APPROVED":return"APPROVED";case"REFUND":case"SOFT_REFUND":case"REVERSED":case"REFUND_IN":case"REFUND_OUT":case"REFUNDED":return"CHARGEBACK";default:return"REJECTED"}}async createCardToken(e){throw Error("Method not implemented.")}async createCardId(e){throw Error("Method not implemented.")}async createTransaction(e){let t={apiKey:this.secretKey},a=i()().add(1,"days").format("YYYY-MM-DD");if("PIX"===e.paymentMethod){let r=await this.api.post("/payment",{type:"PIX",payer:{fullName:e.customer.name,document:e.customer.document,contact:{phone:e.customer.phone,mail:e.customer.email}},transaction:{value:e.amount/100,description:e.description,dueDate:a}},{headers:t});return{paymentMethod:"PIX",transactionId:String(r.data.transactionId),pixQrCode:await s.toDataURL(r.data.pixCode),expiresAt:i()(a).toDate(),pixCode:r.data.pixCode,status:FirebankPaymentProvider.parseStatus(r.data.status),amount:e.amount}}throw Error("Method not implemented.")}async getTransaction(e,t){let a={apiKey:this.secretKey},r=await this.api.get("/transactions/".concat(e),{headers:a}),n=r.data;if("PIX"===n.operation.method)return{paymentMethod:"PIX",transactionId:String(n._id),pixQrCode:await s.toDataURL(n.history[1].providerResponse.pixCode),pixCode:n.history[1].providerResponse.pixCode,expiresAt:i()(n.createdAt).add(1,"day").toDate(),status:FirebankPaymentProvider.parseStatus(n.operation.status),amount:Math.round(100*n.operation.value)};throw Error("Method not implemented.")}async refoundTransaction(e,t){let a={apiKey:this.secretKey},r=await this.api.post("/payment/refund/".concat(e),{},{headers:a});return{refundId:r.data.DocumentNumber,status:r.data.Success}}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://api.firebanking.io",headers:{"Content-Type":"application/json"}})}};FirebankPaymentProvider.providerName="FIREBANK";let PayupPaymentProvider=class PayupPaymentProvider extends BasePaymentProvider{static async processWebhook(e){if(e)return{transactionId:String(e.transactionId),type:"TRANSACTION",status:this.parseStatus(e.status)}}withdraw(e){throw Error("Method not implemented.")}getWithdraw(e){throw Error("Method not implemented.")}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}static parseStatus(e){switch(e){case"WAITING_CONFIRMATION":case"WAITING_PAYMENT":case"WAITING_WITHDRAW":case"WITHDRAW_REQUEST":return"PENDING";case"WITHDRAW_PAID":case"PAID":case"APPROVED":return"APPROVED";case"REFUND":return"REFUNDED";case"REVERSED":return"CHARGEBACK";default:return"REJECTED"}}async createCardToken(e){var t;let a=new CardEncryption(null!==(t=this.publicKey)&&void 0!==t?t:"payup-secret-public-secret-shddkzawdh2-lzswkwzhsd"),r=a.encryptCardData(e);return r}async createCardId(e){return e.cardToken}async createTransaction(e){let t={"Auth-API-Pag360":"Bearer "+this.secretKey};if("CREDIT_CARD"===e.paymentMethod){var a;let r=new CardEncryption(null!==(a=this.publicKey)&&void 0!==a?a:"payup-secret-public-secret-shddkzawdh2-lzswkwzhsd"),{cardNumber:n,cvv:o,expMonth:i,expYear:s,holderName:d}=r.decryptCardData(e.cardId),c=await this.api.post("/doPay",{pan:n,expiryMonth:i,expiryYear:"20".concat(s),securityCode:o,cardHolderName:d.toUpperCase(),paymentMethodType:"CARD",installmentNumber:e.installments,amount:e.amount/100,saleDetails:{itemDescription:e.description,buyerDocNumber:e.customer.document,buyerDocType:11===e.customer.document.length?"CPF":"CNPJ",buyerName:e.customer.name,buyerMail:e.customer.email}},{headers:t});return{paymentMethod:"CREDIT_CARD",transactionId:String(c.data.transactionId),status:0===c.data.status.result?"APPROVED":"REJECTED",amount:e.amount}}throw Error("Method not implemented.")}getTransaction(e,t){throw Error("Method not implemented.")}async refoundTransaction(e,t){let a={"Auth-API-Pag360":"Bearer "+this.secretKey},r=await this.api.post("/doCancel",{transactionId:e,amount:t},{headers:a});return{refundId:r.data.transactionId,status:0===r.data.result}}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://ws.pag360.app.br/hubPay/api/v1",headers:{"Content-Type":"application/json"}})}};PayupPaymentProvider.providerName="PAYUP";var R=a(58192).Buffer;let AktapayPaymentProvider=class AktapayPaymentProvider extends BasePaymentProvider{static async processWebhook(e){if("transaction"===e.type)return{transactionId:String(e.data.id),type:"TRANSACTION",status:this.parseStatus(e.data.status)}}withdraw(e){throw Error("Method not implemented.")}getWithdraw(e){throw Error("Method not implemented.")}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}static parseStatus(e){switch(e){case"processing":case"waiting_payment":case"partially_paid":case"in_protest":return"PENDING";case"paid":case"authorized":return"APPROVED";case"refunded":case"canceled":return"REFUNDED";case"chargedback":return"CHARGEBACK";default:return"REJECTED"}}async createCardToken(e){let t=await this.api.post("/card-token?publicKey="+this.publicKey,{number:e.cardNumber.replace(/\D/g,""),holderName:e.holderName,expirationMonth:parseInt(e.expMonth),expirationYear:parseInt("20"+e.expYear),cvv:e.cvv});return t.data}async createCardId(e){return e.cardToken}async createTransaction(e){let t={authorization:"Basic "+R.from(this.secretKey+":x").toString("base64")},a=e.items.map(e=>({title:e.title,unitPrice:e.unitPrice,quantity:e.quantity,tangible:e.tangible})),r={amount:e.amount,customer:{document:{number:e.customer.document,type:"cpf"},email:e.customer.email,name:e.customer.name,phone:e.customer.phone},paymentMethod:{PIX:"pix",CREDIT_CARD:"credit_card",BILLET:"boleto"}[e.paymentMethod],traceable:!1,items:a};if("PIX"===e.paymentMethod){let e=await this.api.post("/transactions",{...r,pix:{expiresInDays:1}},{headers:t});return{paymentMethod:"PIX",transactionId:String(e.data.id),pixQrCode:await s.toDataURL(e.data.pix.qrcode),expiresAt:i()(e.data.pix.qrcode.expirationDate).toDate(),pixCode:e.data.pix.qrcode,status:AktapayPaymentProvider.parseStatus(e.data.status),amount:e.data.amount}}if("CREDIT_CARD"===e.paymentMethod){let a=await this.api.post("/transactions",{...r,card:{hash:e.cardId}},{headers:t});return{paymentMethod:"CREDIT_CARD",transactionId:String(a.data.id),status:AktapayPaymentProvider.parseStatus(a.data.status),amount:a.data.amount}}if("BILLET"===e.paymentMethod){let e=await this.api.post("/transactions",{...r,boleto:{expiresInDays:3}},{headers:t});return{paymentMethod:"BILLET",transactionId:String(e.data.id),status:AktapayPaymentProvider.parseStatus(e.data.status),amount:e.data.amount,billetCode:e.data.boleto.digitableLine,billetUrl:e.data.boleto.url,expiresAt:i()(e.data.boleto.expirationDate).toDate()}}throw Error("Method not implemented.")}async getTransaction(e,t){let a={authorization:"Basic "+R.from(this.secretKey+":x").toString("base64")},r=await this.api.get("/transactions/".concat(e),{headers:a}),n=r.data;if("pix"===n.paymentMethod)return{paymentMethod:"PIX",transactionId:String(n.id),pixQrCode:await s.toDataURL(n.pix.qrcode),pixCode:n.pix.qrcode,expiresAt:i()(n.pix.expirationDate).toDate(),status:AktapayPaymentProvider.parseStatus(n.status),amount:n.amount};if("credit_card"===n.paymentMethod)return{paymentMethod:"CREDIT_CARD",transactionId:String(n.id),status:AktapayPaymentProvider.parseStatus(n.status),amount:n.amount};if("boleto"===n.paymentMethod)return{paymentMethod:"BILLET",transactionId:String(n.id),status:AktapayPaymentProvider.parseStatus(n.status),amount:n.amount,billetUrl:n.boleto.url,billetCode:n.boleto.digitableLine,expiresAt:i()(n.boleto.expirationDate).toDate()};throw Error("Method not implemented.")}async refoundTransaction(e,t){throw Error("Method not implemented.")}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://api.aktapay.com.br/v1",headers:{"Content-Type":"application/json"}})}};AktapayPaymentProvider.providerName="AKTAPAY";var T=a(78738),M=a.n(T),S=a(58192).Buffer;let k=new(M()).Agent({rejectUnauthorized:!1});let EzzebankPaymentProvider=class EzzebankPaymentProvider extends BasePaymentProvider{static async processWebhook(e){if("RECEIVEPIX"===e.requestBody.transactionType)return{transactionId:String(e.requestBody.transactionId),type:"TRANSACTION",status:"APPROVED"}}async getAuthorization(){let e=S.from(this.publicKey+":"+this.secretKey).toString("base64"),t=await this.api.post("/v2/oauth/token",{grant_type:"client_credentials"},{headers:{Authorization:"Basic ".concat(e),"Content-Type":"multipart/form-data"}}),a=t.data.access_token;return a}async withdraw(e){var t;let a;let r=await this.getAuthorization();if((t=a||(a={})).CPF="CPF",t.CNPJ="CNPJ",t.PHONE="TELEFONE",t.EMAIL="EMAIL",t.RANDOM="CHAVE_ALEATORIA","PIX"===e.paymentMethod)try{let t=await this.api.post("/v2/pix/payment",{amount:e.amount/100,external_id:(0,x.Z)(),description:e.description,creditParty:{name:e.name,keyType:a[e.pixType],key:e.pixKey,taxId:e.document}},{headers:{Authorization:"Bearer ".concat(r)}});return{amount:100*t.data.amount,withdrawId:t.data.transactionId,status:EzzebankPaymentProvider.parseWithdrawStatus(t.data.status)}}catch(e){console.error(e)}throw Error("Method not implemented.")}async getWithdraw(e){let t=await this.getAuthorization(),{data:a}=await this.api.get("/v2/pix/payment/".concat(e,"/receipt"),{headers:{Authorization:"Bearer ".concat(t)}});return{amount:100*Number(a.amount),withdrawId:a.transactionId,status:EzzebankPaymentProvider.parseWithdrawStatus(a.status)}}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}static parseWithdrawStatus(e){return({CONFIRMED:"APPROVED",PENDING:"PENDING",PROCESSING:"PENDING",CANCELED:"CANCELED"})[e]||"REJECTED"}static parseStatus(e){return({PAID:"APPROVED",PENDING:"PENDING"})[e]||"REJECTED"}createCardToken(e){throw Error("Method not implemented.")}createCardId(e){throw Error("Method not implemented.")}async createTransaction(e){let t=await this.getAuthorization();if("PIX"===e.paymentMethod){let{data:a}=await this.api.post("/v2/pix/qrcode",{amount:e.amount/100,external_id:(0,x.Z)(),payer:{name:e.customer.name,document:e.customer.document}},{headers:{authorization:"Bearer ".concat(t)}});return{paymentMethod:"PIX",amount:100*Number(a.amount),pixCode:a.emvqrcps,pixQrCode:await s.toDataURL(a.emvqrcps),transactionId:a.transactionId,status:EzzebankPaymentProvider.parseStatus(a.status)}}throw Error("Method not implemented.")}async getTransaction(e,t){let a=await this.getAuthorization(),{data:r}=await this.api.get("/v2/pix/qrcode/".concat(e,"/detail"),{headers:{authorization:"Bearer ".concat(a)}});return{paymentMethod:"PIX",amount:100*Number(r.originalValue),pixCode:r.emvqrcps,pixQrCode:await s.toDataURL(r.emvqrcps),transactionId:r.transactionId,status:EzzebankPaymentProvider.parseStatus(r.status)}}refoundTransaction(e,t){throw Error("Method not implemented.")}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://api.ezzebank.com",httpsAgent:k,proxy:{host:"brd.superproxy.io",port:33335,auth:{username:"brd-customer-hl_92cf3f01-zone-paymaker_fixed_ip",password:"0w5zqovsd8zd"}}})}};EzzebankPaymentProvider.providerName="EZZEBANK";let ViatechPaymentProvider=class ViatechPaymentProvider extends BasePaymentProvider{static async processWebhook(e){return{transactionId:String(e.txid),type:"TRANSACTION",status:this.parseStatus(e.status)}}static parseStatus(e){return({PAGO:"APPROVED",MED:"CHARGEBACK",FRAUDE:"CHARGEBACK",PENDENTE:"PENDING",REEMBOLSO:"REFUNDED"})[e]||"REJECTED"}withdraw(e){throw Error("Method not implemented.")}getWithdraw(e){throw Error("Method not implemented.")}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}async createCardToken(e){let t={adicionarCartao:{holder_name:e.holderName,expiration_month:e.expMonth,expiration_year:e.expYear,card_number:e.cardNumber,security_code:e.cvv}},{data:a}=await this.api.post("/wsAdicionarCartao",t),{tokenCartao:r}=a.data[0];return r}async createCardId(e){return e.cardToken}async createTransaction(e){if("PIX"===e.paymentMethod){let t={cobranca:{totalAmount:Number(e.amount/100).toFixed(2).toString(),description:e.description,reference:(0,x.Z)(),vencimento:i()().add(1,"day").format("YYYY-MM-DD"),dataLimite:i()().add(1,"day").format("YYYY-MM-DD"),juros:"0.00",multa:"0.00"},dadosSacado:{taxId:e.customer.document,razaoSocial:e.customer.name,email:e.customer.email,telefone:e.customer.phone},tiposPagamento:{boleto:"NAO",pix:"SIM",card:"NAO"}},a=await this.api.post("/wsLinkCobranca",t);return{paymentMethod:"PIX",transactionId:String(a.data.data[0].txid),pixQrCode:await s.toDataURL(a.data.data[0].pixCopiaECola),pixCode:a.data.data[0].pixCopiaECola,status:"PENDING",amount:e.amount}}throw Error("Method not implemented.")}async getTransaction(e,t){let a=await this.api.post("/wsBuscaTransacao",{taxid:e}),r=await h.payment.findFirst({where:{transactionId:e}}),n=a.data;return{paymentMethod:"PIX",transactionId:String(n.txid),pixQrCode:await s.toDataURL(null==r?void 0:r.pixCode),pixCode:null==r?void 0:r.pixCode,status:ViatechPaymentProvider.parseStatus(n.status),amount:100*Number(n.valor)}}async refoundTransaction(e,t){throw Error("Method not implemented.")}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://app.viatech.net.br",headers:{"Content-Type":"application/json","Api-Access-Key":this.secretKey,"Transaction-Hash":this.publicKey}})}};ViatechPaymentProvider.providerName="VIATECH";let AbmexPayPaymentProvider=class AbmexPayPaymentProvider extends BasePaymentProvider{static async processWebhook(e){if("sell.status_changed"===e.event)return{transactionId:String(e.sell_id),type:"TRANSACTION",status:this.parseStatus(e.status)}}withdraw(e){throw Error("Method not implemented.")}getWithdraw(e){throw Error("Method not implemented.")}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}static parseStatus(e){switch(e){case"created":case"awaiting_payment":return"PENDING";case"paid":case"captured":return"APPROVED";case"refunded":return"REFUNDED";default:return"REJECTED"}}async createCardToken(e){var t;let a=new CardEncryption(null!==(t=this.secretKey)&&void 0!==t?t:"abmexpay-secret-public-secret-shddkzawdh2-lzswkwzhsd"),r=a.encryptCardData(e);return r}async createCardId(e){return e.cardToken}async createTransaction(e){let t=e.items.map(e=>({description:e.title,price:e.unitPrice,quantity:e.quantity}));if("PIX"===e.paymentMethod||"BILLET"===e.paymentMethod){let a={items:t,customer:{name:e.customer.name,email:e.customer.email,phone:e.customer.phone,phone_prefix:"55",document:e.customer.document},payment_method:{PIX:"pix",BILLET:"boleto"}[e.paymentMethod],webhook:e.webhookUrl};if("PIX"===e.paymentMethod){let{data:e}=await this.api.post("/sells",a);return{paymentMethod:"PIX",transactionId:String(e.data.id),expiresAt:i()().add("1","days").toDate(),pixQrCode:e.data.pix_qr_code,pixCode:e.data.pix_qr_code_text,status:AbmexPayPaymentProvider.parseStatus(e.data.status),amount:e.data.total}}}if("CREDIT_CARD"===e.paymentMethod){var a;let r=new CardEncryption(null!==(a=this.secretKey)&&void 0!==a?a:"payup-secret-public-secret-shddkzawdh2-lzswkwzhsd"),{cardNumber:n,cvv:o,expMonth:i,expYear:s,holderName:d}=r.decryptCardData(e.cardId),c={items:t,credit_card:{number:n,verification_value:o,first_name:d.split(" ")[0],last_name:d.split(" ")[1],month:i,year:s,test:!1},customer:{name:e.customer.name,email:e.customer.email,phone:e.customer.phone,phone_prefix:"55",document:e.customer.document},payment_method:"credit_card",webhook:e.webhookUrl},l=await this.api.post("/sells",c);return{paymentMethod:"CREDIT_CARD",transactionId:String(l.data.data.id),status:AbmexPayPaymentProvider.parseStatus(l.data.data.status),amount:l.data.total}}throw Error("Method not implemented.")}async getTransaction(e,t){let a=await this.api.get("/sells/".concat(e)),r=a.data;if(r.pix_qr_code)return{paymentMethod:"PIX",transactionId:String(r.id),pixQrCode:await s.toDataURL(a.data.pix_qr_code),pixCode:a.data.pix_qr_code_text,status:AbmexPayPaymentProvider.parseStatus(r.status),amount:r.total};throw Error("Method not implemented.")}async refoundTransaction(e,t){let a=await this.api.post("/sells/".concat(e,"/refund"),{});return{refundId:a.data.id,status:200===a.status}}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://painel.abmexpay.com.br/api",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.secretKey)}})}};AbmexPayPaymentProvider.providerName="ABMEXPAY";let OwenPayPaymentProvider=class OwenPayPaymentProvider extends BasePaymentProvider{static async processWebhook(e){if("pix"===e.paymentMethod||"credit_card"===e.paymentMethod)return{transactionId:String(e.id),type:"TRANSACTION",status:this.parseStatus(e.status)}}withdraw(e){throw Error("Method not implemented.")}getWithdraw(e){throw Error("Method not implemented.")}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}static parseStatus(e){switch(e){case"PENDING":return"PENDING";case"CONFIRMED":case"RECEIVED":return"APPROVED";case"refunded":case"canceled":return"REFUNDED";case"chargedback":return"CHARGEBACK";default:return"REJECTED"}}async createCardToken(e){var t;let a=new CardEncryption(null!==(t=this.publicKey)&&void 0!==t?t:"owenpay-secret-public-secret-shddkzawdh2-lzswkwzhsd"),r=a.encryptCardData(e);return r}async createCardId(e){return e.cardToken}async createTransaction(e){let t={amount:e.amount,customer:{document:{number:e.customer.document,type:"cpf"},email:e.customer.email,name:e.customer.name,phone:e.customer.phone},paymentMethod:{PIX:"pix",CREDIT_CARD:"credit_card",BILLET:"boleto"}[e.paymentMethod],items:e.items.map(e=>({title:e.title,unitPrice:e.unitPrice,quantity:e.quantity,tangible:e.tangible})),postbackUrl:e.webhookUrl,apiKey:this.secretKey,clientId:this.publicKey,subsellerCnpj:e.userDocument};if("PIX"===e.paymentMethod){let e=await this.api.post("/apigateways",t);return{paymentMethod:"PIX",transactionId:String(e.data.id),pixQrCode:e.data.pixCode.encodedImage,expiresAt:i()(e.data.pixCode.expirationDate).toDate(),pixCode:e.data.pixCode.payload,status:OwenPayPaymentProvider.parseStatus(e.data.status),amount:e.data.amount}}if("CREDIT_CARD"===e.paymentMethod){var a;let r=new CardEncryption(null!==(a=this.publicKey)&&void 0!==a?a:"owenpay-secret-public-secret-shddkzawdh2-lzswkwzhsd"),{cardNumber:n,cvv:o,expMonth:i,expYear:s,holderName:d}=r.decryptCardData(e.cardId),c=await this.api.post("/apigateways",{...t,installments:e.installments,card:{number:n,holderName:d,expirationMonth:i,expirationYear:"20".concat(s),cvv:o}});return{paymentMethod:"CREDIT_CARD",transactionId:String(c.data.id),status:OwenPayPaymentProvider.parseStatus(c.data.status),amount:c.data.amount}}throw Error("Method not implemented.")}async getTransaction(e,t){let{data:a}=await this.api.post("/gettransaction",{clientId:this.publicKey,apiKey:this.secretKey,id:e}),r=await h.payment.findFirstOrThrow({where:{transactionId:e},select:{pixCode:!0,pixQrCode:!0,expiresAt:!0,amount:!0}});if("PIX"===a.paymentType)return{paymentMethod:"PIX",transactionId:String(a.id),pixQrCode:r.pixQrCode,pixCode:r.pixCode,expiresAt:i()(r.expiresAt).toDate(),status:OwenPayPaymentProvider.parseStatus(a.status),amount:r.amount};if("CREDIT_CARD"===a.paymentType)return{paymentMethod:"CREDIT_CARD",transactionId:String(a.id),status:OwenPayPaymentProvider.parseStatus(a.status),amount:a.amount};throw Error("Method not implemented.")}async refoundTransaction(e,t){let a=await this.api.post("/refundtransaction",{id:e,apiKey:this.secretKey});return{refundId:a.data.id,status:200===a.status}}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://compraonlineprotegida.com/services",headers:{"Content-Type":"application/json"}})}};OwenPayPaymentProvider.providerName="OWENPAY";var B=a(58192).Buffer;let ZenetPaymentProvider=class ZenetPaymentProvider extends BasePaymentProvider{async getAuthorization(){if(!this.publicKey)throw Error("Public key is required");let e=this.publicKey.split("|")[1],t=this.secretKey.split("|")[1],a=new FormData;a.append("identificator",e),a.append("password",t);let{data:r}=await this.api.post("/auth/login/",a);return{token:r.token}}static parseWithdrawStatus(e){switch(e){case"waiting":return"PENDING";case"paid":return"APPROVED";case"canceled":return"CANCELED";default:return"REJECTED"}}static parseStatus(e){switch(e){case"waiting":default:return"PENDING";case"paid":return"APPROVED"}}static async processWebhook(e){if(e)return{transactionId:e.id,type:"TRANSACTION",status:ZenetPaymentProvider.parseStatus(e.status)}}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}async withdraw(e){let{token:t}=await this.getAuthorization();if("PIX"===e.paymentMethod){let a=await this.api.post("/pix/create_withdraw/",{customer_document:e.document,value:e.amount/100,receiver_cpf:e.document,receiver_name:e.name,receiver_email:e.email,webhook_url:"",pix_key:e.pixKey,pix_key_type:{CPF:"cpf",EMAIL:"email",PHONE:"phone",RANDOM:"evp",CNPJ:"CNPJ"}[e.pixType]},{headers:{Authorization:"jwt ".concat(t)}});return{amount:e.amount,withdrawId:a.data.data.external_reference,status:"PENDING"}}throw Error("Method not implemented.")}async getWithdraw(e){let{data:t}=await this.api.get("/output-transactions/".concat(e));return{amount:100*t.value,status:ZenetPaymentProvider.parseWithdrawStatus(t.status),withdrawId:e,approvedAt:t.approved_at?new Date(t.approved_at):void 0}}createCardToken(e){throw Error("Method not implemented.")}createCardId(e){throw Error("Method not implemented.")}async createTransaction(e){let{token:t}=await this.getAuthorization();if("PIX"===e.paymentMethod){let a=await this.api.post("/pix/create_charge/",{value:e.amount/100,buyer_cpf:e.customer.document,buyer_name:e.customer.name,buyer_email:e.customer.email,webhook_url:e.webhookUrl},{headers:{Authorization:"jwt ".concat(t)}});return{paymentMethod:"PIX",amount:e.amount,transactionId:a.data.id,pixQrCode:await s.toDataURL(a.data.qr_code),pixCode:a.data.qr_code,status:"PENDING",expiresAt:i()(new Date).add(1,"day").toDate()}}throw Error("Not implemented yet.")}async getTransaction(e,t){let{token:a}=await this.getAuthorization(),{data:r}=await this.api.get("/entry-transactions/".concat(e),{headers:{Authorization:"jwt ".concat(a)}});return{paymentMethod:"PIX",transactionId:e,pixQrCode:"",pixCode:"",status:ZenetPaymentProvider.parseStatus(r.status),amount:r.value}}async refoundTransaction(e,t){throw Error("Method not implemented.")}constructor(e,t,a){var r;super(e,t,a),this.publicKey=e,this.secretKey=t,this.baseUrl=a;let o=String(null===(r=this.publicKey)||void 0===r?void 0:r.split("|")[0].replace(/\\n/g,"\n")),i=this.secretKey.split("|")[0].replace(/\\n/g,"\n"),s="-----BEGIN CERTIFICATE-----\n".concat(o,"\n-----END CERTIFICATE-----"),d="-----BEGIN RSA PRIVATE KEY-----\n".concat(i,"\n-----END RSA PRIVATE KEY-----\n");this.cert=B.from(s,"utf-8"),this.key=B.from(d,"utf-8");let c=new T.Agent({cert:this.cert,key:this.key,rejectUnauthorized:!0});this.agent=c,this.api=n.default.create({baseURL:"".concat(this.baseUrl,"/papi"),headers:{"Content-Type":"application/json"},httpsAgent:c})}};ZenetPaymentProvider.providerName="ZENET";let ArkamaPaymentProvider=class ArkamaPaymentProvider extends BasePaymentProvider{static async processWebhook(e){if(e&&e.event.startsWith("ORDER_"))return{transactionId:String(e.data.order.id),type:"TRANSACTION",status:this.parseStatus(e.data.order.status)}}static parseStatus(e){switch(e){case"PENDING":case"PROCESSING":case"IN_ANALYSIS":case"PROCESSING":case"IN_DISPUTE":return"PENDING";case"PAID":return"APPROVED";case"REFUSED":default:return"REJECTED";case"REFUNDED":case"CHARGEDBACK":return"CHARGEBACK"}}withdraw(e){throw Error("Method not implemented.")}getWithdraw(e){throw Error("Method not implemented.")}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}async createCardToken(e){let t=new CardEncryption("arkama-secret-public-secret-shddkzawdh2-lzswkwzhsd"),a=t.encryptCardData(e);return a}async createCardId(e){return e.cardToken}async createTransaction(e){if("PIX"===e.paymentMethod){let t=e.customer.phone.replace(/(\d{2})(\d{5})(\d{4})/,"($1)$2-$3"),a=await this.api.post("/orders",{token:this.secretKey,value:Number(e.amount/100),paymentMethod:"pix",customer:{name:e.customer.name,email:e.customer.email,document:e.customer.document,cellphone:t},items:e.items.map(e=>({title:e.title,unitPrice:e.unitPrice,quantity:e.quantity,isDigital:!e.tangible,externalRef:e.id})),ip:"0.0.0.0"});return{paymentMethod:"PIX",transactionId:a.data.id,pixQrCode:await s.toDataURL(a.data.pix.payload),pixCode:a.data.pix.payload,status:"PENDING",amount:a.data.value}}if("CREDIT_CARD"===e.paymentMethod){let t=new CardEncryption("arkama-secret-public-secret-shddkzawdh2-lzswkwzhsd"),{cardNumber:a,cvv:r,expMonth:n,expYear:o,holderName:i}=t.decryptCardData(e.cardId),s=e.customer.phone.replace(/(\d{2})(\d{5})(\d{4})/,"($1)$2-$3"),d=await this.api.post("/orders",{token:this.secretKey,value:Number(e.amount/100),paymentMethod:"credit_card",customer:{name:e.customer.name,email:e.customer.email,document:e.customer.document,cellphone:s},items:e.items.map(e=>({title:e.title,unitPrice:e.unitPrice,quantity:e.quantity,isDigital:!e.tangible,externalRef:e.id})),card:{number:a,holderName:i,expirationMonth:n,expirationYear:o,cvv:r},ip:"0.0.0.0"});return{paymentMethod:"CREDIT_CARD",transactionId:d.data.id,status:ArkamaPaymentProvider.parseStatus(d.data.status),amount:d.data.value}}throw Error("Method not implemented.")}async getTransaction(e,t){let{data:a}=await this.api.get("/orders/".concat(e,"?token=").concat(this.secretKey));return"PIX"===a.paymentMethod?{paymentMethod:"PIX",transactionId:a.id,pixQrCode:await s.toDataURL(a.pix.payload),pixCode:a.pix.payload,status:ArkamaPaymentProvider.parseStatus(a.status),amount:Math.round(100*a.value)}:{paymentMethod:"CREDIT_CARD",transactionId:a.id,status:ArkamaPaymentProvider.parseStatus(a.status),amount:Math.round(100*a.value)}}async refoundTransaction(e,t){let{data:a}=await this.api.post("/orders/".concat(e,"/refund"));return{refundId:e,status:a.success}}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://app.arkama.com.br/api/v1",headers:{"Content-Type":"application/json",Authorization:this.secretKey,"User-Agent":"PayMaker"}})}};ArkamaPaymentProvider.providerName="ARKAMA";var _=a(98410);let NoxPayPaymentProvider=class NoxPayPaymentProvider extends BasePaymentProvider{static parseWithdrawStatus(e){switch(e){case"WAITING_PAYMENT":case"SENDING":case"SENT":return"PENDING";case"PAID":return"APPROVED";default:return"REJECTED"}}static parseStatus(e){switch(e){case"WAITING_PAYMENT":case"SENDING":default:return"PENDING";case"PAID":return"APPROVED"}}static async processWebhook(e){if(e)return{transactionId:e.txid,type:"TRANSACTION",status:NoxPayPaymentProvider.parseStatus(e.status)}}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}async withdraw(e){if("PIX"===e.paymentMethod){let t=await this.api.post("/api/payment",{method:"PIXOUT",type:"PIX_KEY",code:(0,x.Z)(),pixkey:e.pixKey,amount:e.amount/100});return{amount:e.amount,withdrawId:t.data.txid,status:"PENDING"}}throw Error("Method not implemented.")}async getWithdraw(e){let{data:t}=await this.api.get("/payment/".concat(e));return{amount:Math.floor(100*t.amount),status:NoxPayPaymentProvider.parseWithdrawStatus(t.status),withdrawId:e}}createCardToken(e){throw Error("Method not implemented.")}createCardId(e){throw Error("Method not implemented.")}async createTransaction(e){if("PIX"===e.paymentMethod){let t=await this.api.post("/payment",{amount:e.amount/100,method:"PIX",code:e.orderId});return{paymentMethod:"PIX",amount:e.amount,transactionId:t.data.txid,pixQrCode:await s.toDataURL(t.data.QRCodeText),pixCode:t.data.QRCodeText,status:"PENDING",expiresAt:i()(new Date).add(1,"day").toDate()}}throw Error("Not implemented yet.")}async getTransaction(e,t){let{data:a}=await this.api.get("/payment/".concat(e));return{paymentMethod:"PIX",transactionId:e,pixQrCode:await s.toDataURL(a.QRCodeText),pixCode:a.QRCodeText,status:NoxPayPaymentProvider.parseStatus(a.status),amount:a.amount}}async refoundTransaction(e,t){throw Error("Method not implemented.")}constructor(e,t,a){super(e,t,a),this.publicKey=e,this.secretKey=t,this.baseUrl=a;let r=this.secretKey,o=new _.HttpsProxyAgent("http://7815696ecb:f10e2821bb@51.222.24.38:8083");this.api=n.default.create({baseURL:"https://api2.noxpay.io",headers:{"Content-Type":"application/json","api-key":r},httpsAgent:o})}};NoxPayPaymentProvider.providerName="NOXPAY";let NextPayPaymentProvider=class NextPayPaymentProvider extends BasePaymentProvider{async getAuthorization(){let e=await n.default.post("https://oauth2.nextpayments.com.br/oauth2/token",{grant_type:"client_credentials",client_id:this.publicKey,client_secret:this.secretKey},{headers:{"Content-Type":"application/x-www-form-urlencoded"}});return"Bearer ".concat(e.data.access_token)}static parseWithdrawStatus(e){switch(e){case"WAITING_PAYMENT":case"SENDING":case"SENT":return"PENDING";case"PAID":return"APPROVED";default:return"REJECTED"}}static parseStatus(e){switch(e){case"PROCESSING":case"SENDING":default:return"PENDING";case"PAID":case"CAPTURED":return"APPROVED"}}static async processWebhook(e){if(e)return{transactionId:e._id,type:"TRANSACTION",status:NextPayPaymentProvider.parseStatus(e.status)}}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}async withdraw(e){if("PIX"===e.paymentMethod){let t=await this.api.post("/pix/cashout",{description:e.description,destinatary:{dictKey:e.pixKey},amount:e.amount/100,customer:{name:e.name,document:e.document,email:e.email}});return{amount:e.amount,withdrawId:t.data,status:"PENDING"}}throw Error("Method not implemented.")}async getWithdraw(e){let{data:t}=await this.api.get("/pix/consult/".concat(e));return{amount:100*t.amount,status:NextPayPaymentProvider.parseWithdrawStatus(t.status),withdrawId:e}}createCardToken(e){throw Error("Method not implemented.")}createCardId(e){throw Error("Method not implemented.")}async createTransaction(e){let t=await this.getAuthorization();if("PIX"===e.paymentMethod){let a=await this.api.post("/pix/generate",{amount:e.amount/100,fixedAmount:!0,description:e.description,customer:{name:e.customer.name,document:e.customer.document,email:e.customer.email,mobilePhone:e.customer.phone}},{headers:{Authorization:t}});return{paymentMethod:"PIX",amount:e.amount,transactionId:a.data.id,pixQrCode:await s.toDataURL(a.data.emv),pixCode:a.data.emv,status:"PENDING",expiresAt:i()(new Date).add(1,"day").toDate()}}throw Error("Not implemented yet.")}async getTransaction(e,t){let a=await this.getAuthorization(),{data:r}=await this.api.get("/payments/queryTransaction/".concat(e),{headers:{Authorization:a}});return{paymentMethod:"PIX",transactionId:e,pixQrCode:await s.toDataURL(r.emv),pixCode:r.emv,status:NextPayPaymentProvider.parseStatus(r.status),amount:r.amount}}async refoundTransaction(e,t){let a=await this.getAuthorization(),r=await this.api.put("/payments/cancel/".concat(e),{headers:{Authorization:a}});return{refundId:e,status:200===r.status}}constructor(e,t,a){super(e,t,a),this.api=n.default.create({baseURL:"https://api.nextpayments.com.br",headers:{"Content-Type":"application/json"}})}};NextPayPaymentProvider.providerName="NEXTPAY";var j=a(58192).Buffer;let AxisBankingPaymentProvider=class AxisBankingPaymentProvider extends BasePaymentProvider{static async processWebhook(e){if(e)return{transactionId:String(e.transactionId),type:"TRANSACTION",status:this.parseStatus(e.status)}}async withdraw(e){var t,a,r;let n;let o={authorization:"Basic "+j.from("secret:"+this.secretKey).toString("base64")};if((t=n||(n={})).CPF="CPF",t.CNPJ="CNPJ",t.PHONE="PHONE",t.EMAIL="EMAIL",t.RANDOM="RANDOM","PIX"===e.paymentMethod){let t=(a=e.pixKey,"EMAIL"===(r=n[e.pixType])||"RANDOM"===r?a:a.replace(/\D/g,"")),i=await this.api.post("/withdraws/cash-out",{bankAccount:0,institution:"",name:e.name,bankAgency:0,amount:e.amount,document:"",pixType:n[e.pixType],pixKey:t},{headers:o});return{amount:e.amount,withdrawId:i.data.id,status:AxisBankingPaymentProvider.parseWithdrawStatus(i.data.status)}}throw Error("Method not implemented.")}getWithdraw(e){throw Error("Method not implemented.")}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}static parseWithdrawStatus(e){switch(e){case"WITHDRAW_INFORMATION":case"WITHDRAW_REQUEST":return"PENDING";case"WITHDRAW_APPROVED":return"APPROVED";default:return"REJECTED"}}static parseStatus(e){switch(e){case"PENDING":return"PENDING";case"APPROVED":return"APPROVED";case"REFUNDED":case"REFUND":case"CHARGEBACK":case"BLOCKED":return"CHARGEBACK";default:return"REJECTED"}}async createCardToken(e){let t=new CardEncryption("axisbank-secret-public-secret-shddkzawdh2-lzswkwzhsd"),a=t.encryptCardData(e);return a}async createCardId(e){return e.cardToken}async createTransaction(e){var t,a,r;let n={authorization:"Basic "+j.from("secret:"+this.secretKey).toString("base64")},o=null===(a=e.fingerPrints)||void 0===a?void 0:null===(t=a.find(e=>"axisbanking"===e.provider))||void 0===t?void 0:t.value,d=i()().add(1,"days").format("YYYY-MM-DD");if("PIX"===e.paymentMethod){let t=await this.api.post("/transactions/v2/purchase",{name:e.customer.name,phone:e.customer.phone,email:e.customer.email,paymentMethod:"PIX",cpf:e.customer.document,description:e.items[0].title,amount:e.amount,postbackUrl:e.webhookUrl,referrerUrl:e.referrerUrl,checkoutUrl:e.checkoutUrl,responsibleDocument:e.userDocument,responsibleExternalId:e.userId,currency:null!==(r=e.currency)&&void 0!==r?r:"BRL"},{headers:n});return{paymentMethod:"PIX",transactionId:String(t.data.id),pixQrCode:await s.toDataURL(t.data.pixCode),pixCode:t.data.pixCode,expiresAt:i()(d).toDate(),status:AxisBankingPaymentProvider.parseStatus(t.data.status),amount:e.amount}}if("CREDIT_CARD"===e.paymentMethod){let t=new CardEncryption("axisbank-secret-public-secret-shddkzawdh2-lzswkwzhsd"),{cardNumber:a,cvv:r,expMonth:i,expYear:s,holderName:d}=t.decryptCardData(e.cardId),c={name:e.customer.name,phone:e.customer.phone,email:e.customer.email,cpf:e.customer.document,description:e.items[0].title,amount:e.amount,postbackUrl:e.webhookUrl,referrerUrl:e.referrerUrl,checkoutUrl:e.checkoutUrl,responsibleDocument:e.userDocument,responsibleExternalId:e.userId,paymentMethod:"CREDIT_CARD",creditCard:{number:a,holder:d,expMonth:i,expYear:s,cvv:r,installments:e.installments}};o&&(c.fingerPrint=o);let l=await this.api.post("/transactions/v2/purchase",c,{headers:n});return{paymentMethod:"CREDIT_CARD",transactionId:String(l.data.id),status:AxisBankingPaymentProvider.parseStatus(l.data.status),amount:e.amount}}throw Error("Method not implemented.")}async getTransaction(e){let t={authorization:"Basic "+j.from("secret:"+this.secretKey).toString("base64")},a=await this.api.get("/transactions/".concat(e),{headers:t}),r=a.data;return{paymentMethod:"PIX",transactionId:String(r.id),pixQrCode:await s.toDataURL(r.pixCode),pixCode:r.pixCode,expiresAt:i()(r.createdAt).add(1,"day").toDate(),status:AxisBankingPaymentProvider.parseStatus(r.status),amount:r.amount}}async refoundTransaction(e,t){let a={authorization:"Basic "+j.from("secret:"+this.secretKey).toString("base64")};return await this.api.post("/transactions/refund/".concat(e),{},{headers:a}),{refundId:e,status:!0}}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://api.axisbanking.com.br",headers:{"Content-Type":"application/json"}})}};AxisBankingPaymentProvider.providerName="AXISBANK";var L=a(58192).Buffer;let VolutiPaymentProvider=class VolutiPaymentProvider extends BasePaymentProvider{async getAuthorization(e){var t;let a=await fetch(e),r=await a.arrayBuffer(),n=L.from(r),o=new T.Agent({cert:this.cert,key:this.key,pfx:n,passphrase:"V0lut1@123*.*",rejectUnauthorized:!1});this.agent=o;let i=await this.api.post("/oauth/token",{grant_type:"client_credentials",client_id:null===(t=this.publicKey)||void 0===t?void 0:t.split("|")[1],client_secret:this.secretKey.split("|")[1]},{httpsAgent:o});return"Bearer ".concat(i.data.access_token)}async getCashOutAuthorization(e){var t;let a=await fetch(e),r=await a.arrayBuffer(),o=L.from(r),i=new T.Agent({cert:this.cert,key:this.key,pfx:o,passphrase:"V0lut1@123*.*",rejectUnauthorized:!1});this.agent=i;let s=await n.default.post("https://accounts.voluti.com.br/api/v2/oauth/token",{grant_type:"client_credentials",client_id:null===(t=this.publicKey)||void 0===t?void 0:t.split("|")[1],client_secret:this.secretKey.split("|")[1]},{httpsAgent:i});return"Bearer ".concat(s.data.access_token)}static async processWebhook(e){if("RECEIVE"===e.type||"REFUND"===e.type){if("CANCELED"===e.data.status)return;let t="PENDING";return"REFUND"===e.type&&(t="CHARGEBACK"),"RECEIVE"===e.type&&"LIQUIDATED"===e.data.status&&(t="APPROVED"),{transactionId:String(e.data.txId),type:"TRANSACTION",status:t}}}async withdraw(e){if("PIX"===e.paymentMethod){let t=await h.platform.findUnique({where:{id:e.receiverId}});if(!t||!t.certCashOutUrl)throw Error("Unauthorized.");"PHONE"===e.pixType&&(e.pixKey="+55".concat(e.pixKey));let a=t.certCashOutUrl,r=await this.getCashOutAuthorization(a),o=await n.default.post("https://accounts.voluti.com.br/api/v2/pix/payments/dict",{pixKey:e.pixKey,payment:{currency:"BRL",amount:e.amount/100}},{headers:{Authorization:r,"x-idempotency-key":(0,x.Z)()},httpsAgent:this.agent});return{amount:100*o.data.payment.amount,withdrawId:o.data.endToEndId,status:"APPROVED"}}throw Error("Method not implemented.")}getWithdraw(e){throw Error("Method not implemented.")}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}static parseStatus(e){switch(e){case"ATIVA":case"REMOVIDA_PELO_PSP":return"PENDING";case"LIQUIDATED":case"CONCLUIDA":return"APPROVED";case"REFUND":return"CHARGEBACK";default:return"REJECTED"}}async createCardToken(e){throw Error("Method not implemented.")}async createCardId(e){throw Error("Method not implemented.")}async createTransaction(e){let t=await h.user.findFirstOrThrow({where:{id:e.userId},include:{platform:!0}});if(!t.platform.certCashInUrl)throw Error("Unauthorized.");let a=await this.getAuthorization(t.platform.certCashInUrl);if("PIX"===e.paymentMethod){let r={devedor:{nome:e.customer.name,cpf:e.customer.document},valor:{original:e.amount/100,modalidadeAlteracao:0},chave:t.platform.defaultReceiverId},n=await this.api.post("/cob",r,{headers:{Authorization:a},httpsAgent:this.agent});return{paymentMethod:"PIX",transactionId:String(n.data.txid),expiresAt:i()().add("1","days").toDate(),pixQrCode:await s.toDataURL(n.data.pixCopiaECola),pixCode:n.data.pixCopiaECola,status:VolutiPaymentProvider.parseStatus(n.data.status),amount:100*Number(n.data.valor.original)}}throw Error("Method not implemented.")}async getTransaction(e){let t=await h.payment.findFirstOrThrow({where:{transactionId:e},include:{offer:{include:{product:{include:{platform:!0}}}}}});if(!t.offer.product.platform.certCashInUrl)throw Error("Method not implemented.");let a=await this.getAuthorization(t.offer.product.platform.certCashInUrl),r=await this.api.get("/cob/".concat(e),{headers:{Authorization:a},httpsAgent:this.agent}),n=r.data;return{paymentMethod:"PIX",transactionId:String(n.txid),pixQrCode:"",pixCode:"",status:VolutiPaymentProvider.parseStatus(n.status),amount:Math.round(100*Number(n.valor.original))}}async refoundTransaction(e,t){let a={authorization:"Basic "+L.from(this.secretKey+":x").toString("base64")},r=await this.api.post("/sells/".concat(e,"/refund"),{},{headers:a});return{refundId:r.data.id,status:200===r.status}}constructor(e,t,a){var r;super(e,t,a),this.publicKey=e,this.secretKey=t,this.baseUrl=a;let o=String(null===(r=this.publicKey)||void 0===r?void 0:r.split("|")[0].replace(/\\n/g,"\n")),i=this.secretKey.split("|")[0].replace(/\\n/g,"\n"),s="-----BEGIN CERTIFICATE-----\n".concat(o,"\n-----END CERTIFICATE-----"),d="-----BEGIN RSA PRIVATE KEY-----\n".concat(i,"\n-----END RSA PRIVATE KEY-----\n");this.cert=L.from(s,"utf-8"),this.key=L.from(d,"utf-8"),this.agent=new T.Agent,this.api=n.default.create({baseURL:"https://api.pix.voluti.com.br",headers:{"Content-Type":"application/json"}})}};VolutiPaymentProvider.providerName="VOLUTI";let CrmCoinPaymentProvider=class CrmCoinPaymentProvider extends BasePaymentProvider{static async processWebhook(e){if(e)return{transactionId:String(e.transactionid),type:"TRANSACTION",status:this.parseStatus(e.status_process)}}async withdraw(e){var t,a,r;let n;if((t=n||(n={})).CPF="CPF",t.CNPJ="CNPJ",t.PHONE="TELEFONE",t.EMAIL="EMAIL",t.RANDOM="ALEATORIA","PIX"===e.paymentMethod){let t=(a=e.pixKey,"EMAIL"===(r=n[e.pixType])||"ALEATORIA"===r?a:a.replace(/\D/g,"")),o=await this.api.post("/consulta",{partner:this.secretKey,tipo:n[e.pixType],chave:t}),{id:i}=o.data,s=await this.api.post("/pixout",{partner:this.secretKey,valor:e.amount/100,id:i,obs:"",idTransacao:e.withdrawReference.slice(0,22)}),{code:d}=s.data;if(0===d)return{amount:e.amount,withdrawId:e.withdrawReference,status:CrmCoinPaymentProvider.parseWithdrawStatus("2")}}throw Error("Method not implemented.")}getWithdraw(e){throw Error("Method not implemented.")}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}static parseWithdrawStatus(e){switch(e){case"0":case"1":return"PENDING";case"2":return"APPROVED";default:return"CANCELED"}}static parseStatus(e){switch(e){case"0":case"1":return"PENDING";case"2":return"APPROVED";case"3":return"CHARGEBACK";default:return"REJECTED"}}async createCardToken(e){throw Error("Method not implemented.")}async createCardId(e){throw Error("Method not implemented.")}async createTransaction(e){let t=i()().add(1,"days").format("YYYY-MM-DD");if("PIX"===e.paymentMethod){let a=await this.api.post("/createpix",{partner:this.secretKey,id:e.orderId,valor:e.amount/100,img:"N",nome:e.customer.name,cpf:e.customer.document,mudavalor:"false",imgtype:"png",webhook:e.webhookUrl});return{paymentMethod:"PIX",transactionId:String(e.orderId),pixQrCode:await s.toDataURL(a.data.pixstring),expiresAt:i()(t).toDate(),pixCode:a.data.pixstring,status:CrmCoinPaymentProvider.parseStatus("1"),amount:e.amount}}throw Error("Method not implemented.")}async getTransaction(e){let t=await this.api.post("/getstatus",{partner:this.secretKey,id:e}),a=t.data;return{paymentMethod:"PIX",transactionId:String(a.id),pixQrCode:"",pixCode:"",status:CrmCoinPaymentProvider.parseStatus(a.status_process),amount:a.value}}async refoundTransaction(e,t,a){let r=await this.api.post("/devolver",{partner:this.secretKey,id:e,obs:"Devolu\xe7\xe3o",valor:t,motivo:"MD06",webhookUrl:a});return{refundId:r.data.DocumentNumber,status:r.data.Success}}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://www.crmcoins.com.br/script/pixapi.prg",headers:{"Content-Type":"application/json"}})}};CrmCoinPaymentProvider.providerName="CRMCOIN";let IuguBaaSPaymentProvider=class IuguBaaSPaymentProvider extends BasePaymentProvider{static async processWebhook(e){if(e.event&&e.event.startsWith("invoice.status_changed")){let t=e["data[id]"],a=IuguBaaSPaymentProvider.parseStatus(e["data[status]"]);return{transactionId:t,status:a,type:"TRANSACTION"}}}async withdraw(e){throw Error("Method not implemented.")}async getWithdraw(e){throw Error("Method not implemented.")}async createReceiver(e){throw Error("Method not implemented.")}async getReceiver(e){throw Error("Method not implemented.")}static parseStatus(e){switch(e){case"created":case"pending":return"PENDING";case"paid":case"authorized":case"externally_paid":return"APPROVED";case"expired":default:return"REJECTED";case"chargedback":case"refunded":return"CHARGEBACK"}}async createCardToken(e){let t=window,a=t.Iugu;a.setAccountID(e.receiverId);let r=a.CreditCard(e.cardNumber,e.expMonth,"20".concat(e.expYear),e.holderName.split(" ")[0],e.holderName.split(" ")[1],e.cvv),n=await new Promise((e,t)=>{a.createPaymentToken(r,function(a){a.errors&&t(Error("Erro salvando cart\xe3o")),e(a.id)})});return n}async createCardId(e){return e.cardToken}async createTransaction(e){var t,a,r,n,o,s;let d={api_token:this.secretKey},c=i()(new Date).add(1,"days").format("YYYY-MM-DD"),l={email:e.customer.email,payer:{cpf_cnpj:e.customer.document,name:e.customer.name,phone:e.customer.phone,email:e.customer.email,address:{zip_code:null===(t=e.address)||void 0===t?void 0:t.zipCode,street:null===(a=e.address)||void 0===a?void 0:a.address,number:null===(r=e.address)||void 0===r?void 0:r.number,district:null===(n=e.address)||void 0===n?void 0:n.district,city:null===(o=e.address)||void 0===o?void 0:o.city,state:null===(s=e.address)||void 0===s?void 0:s.state}},payable_with:[e.paymentMethod.toLocaleLowerCase()],due_date:c,return_url:e.webhookUrl,items:e.items.map(e=>({description:e.title,quantity:e.quantity,price_cents:e.unitPrice}))};if("PIX"===e.paymentMethod){let{data:e}=await this.api.post("/invoices",{...l},{params:d});return{paymentMethod:e.payable_with,amount:e.total_cents,transactionId:e.id,status:IuguBaaSPaymentProvider.parseStatus(e.status),pixCode:e.pix.qrcode_text,pixQrCode:e.pix.qrcode}}if("CREDIT_CARD"===e.paymentMethod){let{data:t}=await this.api.post("/invoices",{...l},{params:d});return await this.api.post("/charge",{token:e.cardId,months:e.installments,invoice_id:t.id},{params:d}),{paymentMethod:t.payable_with,amount:t.total_cents,transactionId:t.id,status:IuguBaaSPaymentProvider.parseStatus(t.status)}}if("BILLET"===e.paymentMethod){let{data:e}=await this.api.post("/invoices",{...l,payable_with:"bank_slip"},{params:d});return{paymentMethod:"BILLET",amount:e.total_cents,transactionId:e.id,status:IuguBaaSPaymentProvider.parseStatus(e.status),billetUrl:e.bank_slip.bank_slip_pdf_url,billetCode:e.bank_slip.digitable_line}}throw Error("Method not implemented.")}async getTransaction(e){let{data:t}=await this.api.get("/invoices/".concat(e),{params:{api_token:this.secretKey}});if("pix"===t.payable_with)return{paymentMethod:"PIX",amount:t.total_cents,status:IuguBaaSPaymentProvider.parseStatus(t.status),transactionId:t.id,expiresAt:t.due_date,pixCode:t.pix.qrcode_text,pixQrCode:t.pix.qrcode};if("credit_card"===t.payable_with)return{paymentMethod:"CREDIT_CARD",amount:t.total_cents,status:IuguBaaSPaymentProvider.parseStatus(t.status),transactionId:t.id};if("bank_slip"===t.payable_with)return{paymentMethod:"BILLET",amount:t.total_cents,status:IuguBaaSPaymentProvider.parseStatus(t.status),transactionId:t.id,billetUrl:t.bank_slip.bank_slip_pdf_url,billetCode:t.bank_slip.digitable_line};throw Error("Method not implemented.")}async refoundTransaction(e,t){try{let a={api_token:this.secretKey},r=await this.api.post("/invoices/".concat(e,"/refund"),{partial_value_refund_cents:t},{params:a});return{refundId:r.data.id,status:200===r.status}}catch(e){throw console.error(e),new c.bR({code:"BAD_REQUEST",message:"Erro ao aprovar o reembolso."})}}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://api.iugu.com/v1",headers:{"Content-Type":"application/json"}})}};IuguBaaSPaymentProvider.providerName="IUGUBAAS";var U=a(58192).Buffer;let VilletPaymentProvider=class VilletPaymentProvider extends BasePaymentProvider{static async processWebhook(e){if("transaction"===e.type)return{transactionId:String(e.data.id),type:"TRANSACTION",status:this.parseStatus(e.data.status)}}async createReceiver(e){let t=await this.api.post("/recipients",{legalName:e.name,document:{number:e.document,type:e.documentType.toLocaleLowerCase()},transferSettings:{transferEnabled:!1,automaticAnticipationEnabled:!1,anticipatableVolumePercentage:0},bankAccount:{bankCode:e.bankAccount.bankCode,agencyNumber:e.bankAccount.branchNumber,accountNumber:e.bankAccount.accountNumber,accountDigit:e.bankAccount.accountDigit,type:"CHECKING"===e.bankAccount.accountType?"conta_corrente":"conta_poupanca",legalName:e.name,documentNumber:e.document,documentType:e.documentType.toLocaleLowerCase()}}),a="PENDING";return t.data.createdAt&&(a="ACTIVE"),{receiverProvider:"VILLET",status:a,receiverId:String(t.data.id),name:t.data.legalName,email:e.email,document:t.data.document.number,documentType:t.data.document.type.toUpperCase(),balance:0}}async getReceiver(e){let t=await this.api.get("/recipients/".concat(e)),a=await this.api.get("balance/available?recipientId=".concat(e));return{receiverProvider:"VILLET",name:t.data.legalName,document:t.data.document.number,documentType:t.data.document.type.toUpperCase(),email:"",status:"ACTIVE",receiverId:t.data.id,balance:a.data.amount}}parseWithdrawStatus(e){switch(e){case"pending":case"bank_processing":return"PENDING";case"success":return"APPROVED";default:return"REJECTED"}}async withdraw(e){if("RECEIVER"===e.paymentMethod){let t=await this.api.post("/transfers",{amount:e.amount,recipientId:e.receiverId});return{withdrawId:String(t.data.id),status:this.parseWithdrawStatus(t.data.status),amount:t.data.amount}}throw Error("Method not implemented.")}getWithdraw(e){throw Error("Method not implemented.")}async createCardToken(e){var t;let a=new CardEncryption(null!==(t=this.publicKey)&&void 0!==t?t:"villet-secret-public-secret-shddkzawdh2-lzswkwzhsd"),r=a.encryptCardData(e);return r}async createCardId(e){return e.cardToken}static parseStatus(e){switch(e){case"processing":case"authorized":case"waiting_payment":case"partially_paid":return"PENDING";case"paid":return"APPROVED";case"refused":case"canceled":default:return"REJECTED";case"refunded":case"in_protest":case"chargedback":return"CHARGEBACK"}}async createTransaction(e){let t=e.items.map(e=>({title:e.title,unitPrice:e.unitPrice,quantity:e.quantity,tangible:e.tangible,externalRef:e.id})),a={name:e.customer.name,email:e.customer.email,document:{number:e.customer.document,type:"cpf"},phone:e.customer.phone};if("PIX"===e.paymentMethod){let r=await this.api.post("/transactions",{amount:e.amount,paymentMethod:"pix",customer:a,items:t,postbackUrl:e.webhookUrl,pix:{expiresInDays:1}});return{paymentMethod:"PIX",transactionId:String(r.data.id),pixQrCode:await s.toDataURL(r.data.pix.qrcode),pixCode:r.data.pix.qrcode,expiresAt:i()(r.data.pix.expirationDate).toDate(),status:VilletPaymentProvider.parseStatus(r.data.status),amount:e.amount}}if("CREDIT_CARD"===e.paymentMethod){var r;let n=new CardEncryption(null!==(r=this.publicKey)&&void 0!==r?r:"villet-secret-public-secret-shddkzawdh2-lzswkwzhsd"),{cardNumber:o,cvv:i,expMonth:s,expYear:d,holderName:c}=n.decryptCardData(e.cardId),l=await this.api.post("/transactions",{amount:e.amount,paymentMethod:"credit_card",customer:a,items:t,postbackUrl:e.webhookUrl,card:{number:o,holderName:c,expirationMonth:parseInt(s,10),expirationYear:2e3+parseInt(d,10),cvv:i},installments:e.installments});return{paymentMethod:"CREDIT_CARD",transactionId:String(l.data.id),status:VilletPaymentProvider.parseStatus(l.data.status),amount:e.amount}}throw Error("Not implemented yet.")}async getTransaction(e,t){let a=await this.api.get("/transactions/".concat(e));if("pix"===a.data.paymentMethod)return{paymentMethod:"PIX",transactionId:String(a.data.id),pixQrCode:await s.toDataURL(a.data.pix.qrcode),pixCode:a.data.pix.qrcode,status:VilletPaymentProvider.parseStatus(a.data.status),expiresAt:i()(a.data.pix.expirationDate).toDate(),amount:a.data.amount};if("credit_card"===a.data.paymentMethod)return{paymentMethod:"CREDIT_CARD",transactionId:String(a.data.id),status:VilletPaymentProvider.parseStatus(a.data.status),amount:a.data.amount};throw Error("Method not implemented.")}async refoundTransaction(e,t,a){let r=await this.api.post("/transactions/".concat(e,"/refund"),{amount:t});return{refundId:String(r.data.id),status:200===r.status}}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://api.villetpay.com/v1",headers:{"Content-Type":"application/json",authorization:"Basic "+U.from("".concat(this.secretKey,":x")).toString("base64")}})}};VilletPaymentProvider.providerName="VILLET";var z=a(58192).Buffer;let MediusPaymentProvider=class MediusPaymentProvider extends BasePaymentProvider{static async processWebhook(e){if("transaction"===e.type)return{transactionId:e.data.id,type:"TRANSACTION",status:this.parseStatus(e.data.status)}}async createReceiver(e){throw Error("Method not implemented.")}async getReceiver(e){throw Error("Method not implemented.")}parseWithdrawStatus(e){throw Error("Method not implemented.")}async withdraw(e){throw Error("Method not implemented.")}getWithdraw(e){throw Error("Method not implemented.")}async createCardToken(e){let t={number:e.cardNumber,holderName:e.holderName,expirationMonth:parseInt(e.expMonth),expirationYear:parseInt("20"+e.expYear),cvv:e.cvv};return JSON.stringify(t)}async createCardId(e){return e.cardToken}static parseStatus(e){switch(e){case"processing":case"authorized":case"waiting_payment":case"partially_paid":return"PENDING";case"paid":return"APPROVED";case"refunded":return"REFUNDED";case"refused":case"canceled":case"in_protest":default:return"REJECTED";case"chargedback":return"CHARGEBACK"}}async createTransaction(e){let t=e.items.map(e=>({title:e.title,unitPrice:e.unitPrice,quantity:e.quantity,externalRef:e.id})),a={name:e.customer.name,email:e.customer.email,document:{number:e.customer.document,type:"cpf"},phone:e.customer.phone};if("PIX"===e.paymentMethod){let r=await this.api.post("/transactions",{amount:e.amount,paymentMethod:"PIX",customer:a,items:t,postbackUrl:e.webhookUrl,pix:{expiresInDays:1}});return{paymentMethod:"PIX",transactionId:String(r.data.id),pixQrCode:await s.toDataURL(r.data.pix.qrcode),pixCode:r.data.pix.qrcode,expiresAt:i()(r.data.pix.expirationDate).toDate(),status:MediusPaymentProvider.parseStatus(r.data.status),amount:e.amount}}throw e.paymentMethod,Error("Not implemented yet.")}async getTransaction(e,t){let a=await this.api.get("/transactions/".concat(e));if("pix"===a.data.paymentMethod)return{paymentMethod:"PIX",transactionId:String(a.data.id),pixQrCode:a.data.pix.url,pixCode:a.data.pix.qrcode,status:MediusPaymentProvider.parseStatus(a.data.status),expiresAt:i()(a.data.pix.expirationDate).toDate(),amount:a.data.amount};if("credit_card"===a.data.paymentMethod)return{paymentMethod:"CREDIT_CARD",transactionId:String(a.data.id),status:MediusPaymentProvider.parseStatus(a.data.status),amount:a.data.amount};throw Error("Method not implemented.")}async refoundTransaction(e,t,a){throw Error("Not implemented yet.")}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://api.mediuspag.com/functions/v1",headers:{"Content-Type":"application/json",authorization:"Basic "+z.from("".concat(this.secretKey,":x")).toString("base64")}})}};MediusPaymentProvider.providerName="MEDIUS";let O=[{name:"Banco ABC Brasil",value:"246"},{name:"Banco C6",value:"336"},{name:"Banco da Amazonia",value:"003"},{name:"Banco do Brasil",value:"001"},{name:"Banco do Nordeste",value:"004"},{name:"Banco Topazio",value:"082-5"},{name:"Banestes",value:"021"},{name:"BCO FIBRA S.A.",value:"224"},{name:"Banco BMG",value:"318"},{name:"BRB",value:"070"},{name:"Bradesco/Next",value:"036"},{name:"Bradesco/Next",value:"204"},{name:"Bradesco/Next",value:"237"},{name:"Caixa Econ\xf4mica",value:"104"},{name:"Citibank",value:"477"},{name:"Cora",value:"403"},{name:"Inter",value:"077"},{name:"Ita\xfa",value:"184"},{name:"Ita\xfa",value:"341"},{name:"Ita\xfa",value:"479"},{name:"Mercado Pago",value:"323"},{name:"Neon/Votorantim",value:"655"},{name:"Nubank",value:"260"},{name:"Picpay",value:"380"},{name:"Safra",value:"422"},{name:"Santander",value:"033"},{name:"Sicoob",value:"756"},{name:"XP Investimentos",value:"102"}];let AbmexSplitPaymentProvider=class AbmexSplitPaymentProvider extends BasePaymentProvider{static async processWebhook(e){if("sell.status_changed"===e.event)return{transactionId:String(e.sell_id),type:"TRANSACTION",status:this.parseStatus(e.status)}}withdraw(e){throw Error("Method not implemented.")}getWithdraw(e){throw Error("Method not implemented.")}async createReceiver(e){var t;if("CPF"===e.documentType)throw new c.bR({code:"BAD_REQUEST",message:"Adquirente n\xe3o aceita CPF"});let a=null===(t=O.find(t=>t.value===e.bankAccount.bankCode))||void 0===t?void 0:t.name;if(!a||e.bankAccount.branchDigit>"0"&&["001","036","246","204","237"].includes(e.bankAccount.bankCode))throw new c.bR({code:"BAD_REQUEST",message:"Banco n\xe3o suportado, tente outro."});let r=await this.api.post("/marketplaces",{marketplace:{name:e.name,price_range:Math.floor(149951*Math.random()+50),description:e.description||"Descri\xe7\xe3o do marketplace",document:e.document,phone:"(85) 4002-8922",address:{zip_code:e.address.zipcode,street:e.address.street,neighborhood:e.address.district,city:e.address.city,state:e.address.state,country:"BR"},bank:{bank:a,agency:e.bankAccount.branchNumber,number:e.bankAccount.accountNumber,digit:e.bankAccount.accountDigit,type:"SAVINGS"===e.bankAccount.accountType?"cp":"cc"}}});return{status:"ACTIVE",balance:0,name:r.data.data.name,document:e.document,documentType:"CNPJ",email:e.email,receiverId:r.data.data.id,receiverToken:r.data.token,receiverProvider:AbmexSplitPaymentProvider.providerName}}async getReceiver(e){let t=await h.receiver.findFirst({where:{receiverId:e}});if(!t)throw Error("Receiver not found.");let a=await this.api.get("/marketplaces/".concat(e));return{receiverProvider:AbmexSplitPaymentProvider.providerName,name:a.data.data.name,document:t.document,documentType:"CNPJ",email:t.email,status:"ACTIVE",receiverId:a.data.id,balance:a.data.data.balance,receiverToken:t.receiverToken}}static parseStatus(e){switch(e){case"created":case"awaiting_payment":return"PENDING";case"paid":case"captured":return"APPROVED";case"refunded":return"REFUNDED";default:return"REJECTED"}}async createCardToken(e){var t;let a=new CardEncryption(null!==(t=this.secretKey)&&void 0!==t?t:"abmexpay-secret-public-secret-shddkzawdh2-lzswkwzhsd"),r=a.encryptCardData(e);return r}async createCardId(e){return e.cardToken}async createTransaction(e){var t,a;let r=e.items.map(e=>({description:e.title,price:e.unitPrice,quantity:e.quantity})),n=null===(t=e.splits)||void 0===t?void 0:t.map(e=>({marketplace_id:e.recipientId,..."FIXED"===e.type?{cents:e.amount}:{percent:e.amount},permit_aggregated:!1}));if(n[0].marketplace_id||null==n||n.shift(),"PIX"===e.paymentMethod||"BILLET"===e.paymentMethod){let t={items:r,customer:{name:e.customer.name,email:e.customer.email,phone:e.customer.phone,phone_prefix:"55",document:e.customer.document},splits:n,payment_method:{PIX:"pix",BILLET:"boleto"}[e.paymentMethod],webhook:e.webhookUrl};if("PIX"===e.paymentMethod){let{data:e}=await this.api.post("/sells",t);return{paymentMethod:"PIX",transactionId:String(e.data.id),expiresAt:i()().add("1","days").toDate(),pixQrCode:e.data.pix_qr_code,pixCode:e.data.pix_qr_code_text,status:AbmexSplitPaymentProvider.parseStatus(e.data.status),amount:e.data.total}}}if("CREDIT_CARD"===e.paymentMethod){let t=new CardEncryption(null!==(a=this.secretKey)&&void 0!==a?a:"payup-secret-public-secret-shddkzawdh2-lzswkwzhsd"),{cardNumber:o,cvv:i,expMonth:s,expYear:d,holderName:c}=t.decryptCardData(e.cardId),l={items:r,credit_card:{number:o,verification_value:i,first_name:c.split(" ")[0],last_name:c.split(" ")[1],month:s,year:d,test:!1},customer:{name:e.customer.name,email:e.customer.email,phone:e.customer.phone,phone_prefix:"55",document:e.customer.document},splits:n,payment_method:"credit_card",webhook:e.webhookUrl},u=await this.api.post("/sells",l);return{paymentMethod:"CREDIT_CARD",transactionId:String(u.data.data.id),status:AbmexSplitPaymentProvider.parseStatus(u.data.data.status),amount:u.data.total}}throw Error("Method not implemented.")}async getTransaction(e,t){let a=await this.api.get("/sells/".concat(e)),r=a.data;if(r.pix_qr_code)return{paymentMethod:"PIX",transactionId:String(r.id),pixQrCode:await s.toDataURL(a.data.pix_qr_code),pixCode:a.data.pix_qr_code_text,status:AbmexSplitPaymentProvider.parseStatus(r.status),amount:r.total};throw Error("Method not implemented.")}async refoundTransaction(e,t){let a=await this.api.post("/sells/".concat(e,"/refund"),{});return{refundId:a.data.id,status:200===a.status}}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://painel.abmexpay.com.br/api",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.secretKey)}})}};AbmexSplitPaymentProvider.providerName="ABMEXSPLIT";var V=a(58192).Buffer;let CelcoinPaymentProvider=class CelcoinPaymentProvider extends BasePaymentProvider{async getToken(){let e={Authorization:"Basic ".concat(V.from(this.publicKey+":"+this.secretKey).toString("base64"))},{data:t}=await this.api.post("/token",{grant_type:"authorization_code",scope:"customers.read customers.write plans.read plans.write transactions.read transactions.write webhooks.write balance.read balance.write cards.read cards.write card-brands.read subscriptions.read subscriptions.write charges.read charges.write boletos.read"},{headers:e});return t}static async processWebhook(e){throw Error("Method not implemented.")}async withdraw(e){throw Error("Method not implemented.")}async getWithdraw(e){throw Error("Method not implemented.")}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}parseStatus(e){switch(e){case"pendingPix":case"notSend":return"PENDING";case"authorized":case"payedPix":return"APPROVED";case"denied":default:return"REJECTED";case"reversed":return"REFUNDED";case"chargeback":return"CHARGEBACK"}}async createCardToken(e){return JSON.stringify({number:e.cardNumber,holder:e.holderName,expiresAt:"20".concat(e.expYear,"-").concat(e.expMonth),cvv:e.cvv})}async createCardId(e){return e.cardToken}parsePaymentMethod(e){switch(e){case"BILLET":return"boleto";case"PIX":return"pix";case"CREDIT_CARD":return"creditcard"}}async createTransaction(e){let t,a=await this.getToken();"CREDIT_CARD"==e.paymentMethod&&(t=JSON.parse(e.cardId));let r={Authorization:"".concat(a.token_type," ").concat(a.access_token)},n={myId:e.orderId,value:e.amount,payday:i()().add(5,"days").format("YYYY-MM-DD"),payedOutsideGalaxPay:!1,mainPaymentMethodId:this.parsePaymentMethod(e.paymentMethod),Customer:{name:e.customer.name,document:e.customer.document,emails:[e.customer.email]},...{..."CREDIT_CARD"==e.paymentMethod&&{PaymentMethodCreditCard:{Card:{number:t.number,holder:t.holder,expiresAt:t.expiresAt,cvv:t.cvv},preAuthorize:!1,qtdInstallments:e.installments}}},...{..."PIX"==e.paymentMethod&&{PaymentMethodPix:{instructions:e.description,Deadline:{type:"days",value:5}}}}};try{let{data:t}=await this.api.post("/charges",n,{headers:r});switch(e.paymentMethod){case"PIX":var o,d;return{paymentMethod:"PIX",transactionId:String(t.Charge.galaxPayId),pixQrCode:await s.toDataURL(null===(o=t.Charge.Transactions[0].Pix)||void 0===o?void 0:o.qrCode),expiresAt:i()().add(1,"day").toDate(),pixCode:null===(d=t.Charge.Transactions[0].Pix)||void 0===d?void 0:d.qrCode,status:this.parseStatus(t.Charge.Transactions[0].status),amount:e.amount};case"CREDIT_CARD":try{console.log("/charges/".concat(t.Charge.Transactions[0].galaxPayId,"/galaxPayId/capture"));let e=await this.api.put("/charges/".concat(t.Charge.Transactions[0].galaxPayId,"/galaxPayId/capture"),n,{headers:r});console.log(e.data)}catch(e){throw console.log(e.response.data),Error("oooooi")}return{paymentMethod:"CREDIT_CARD",transactionId:String(t.Charge.galaxPayId),status:this.parseStatus(t.Charge.Transactions[0].status),amount:e.amount};default:throw Error("Method not implemented.")}}catch(e){throw Error("Method not implemented.")}}async getTransaction(e,t){let a=await this.getToken(),r={Authorization:"".concat(a.token_type," ").concat(a.access_token)};try{let{data:t}=await this.api.get("/charges",{headers:r,params:{galaxPayIds:e,startAt:0,limit:10}});switch(t.Charges[0].mainPaymentMethodId){case"pix":return{paymentMethod:"PIX",transactionId:t.Charges[0].galaxPayId,pixQrCode:t.Charges[0].Transactions[0].Pix.qrCode,expiresAt:i()().add(5,"days").toDate(),pixCode:t.Charges[0].Transactions[0].Pix.image,status:this.parseStatus(t.Charges[0].Transactions[0].status),amount:t.Charges[0].value};case"creditcard":var n,o,s,d;return{paymentMethod:"CREDIT_CARD",transactionId:null===(n=t.Charges[0])||void 0===n?void 0:n.galaxPayId,status:this.parseStatus(null===(s=t.Charges[0])||void 0===s?void 0:null===(o=s.Transactions[0])||void 0===o?void 0:o.status),amount:null===(d=t.Charges[0])||void 0===d?void 0:d.value};default:throw Error("Method not implemented.")}}catch(e){throw console.log(e),Error("Method not implemented.")}}async refoundTransaction(e,t){throw Error("Method not implemented.")}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://api-celcash.celcoin.com.br/v2",headers:{"Content-Type":"application/json"}})}};CelcoinPaymentProvider.providerName="CELCOIN";var F=a(67743),G=a(58192).Buffer;let PagarmeBaasPaymentProvider=class PagarmeBaasPaymentProvider extends BasePaymentProvider{static async processWebhook(e){if(e.type&&e.type.startsWith("order."))return{transactionId:e.data.id,type:"TRANSACTION",status:PagarmeBaasPaymentProvider.parseStatus(e.data.charges[0].status)}}async createReceiver(e){throw Error("Method not implemented.")}async getReceiver(e){throw Error("Method not implemented.")}parseWithdrawStatus(e){switch(e){case"created":case"pending":case"processing":return"PENDING";case"transferred":return"APPROVED";case"canceled":return"CANCELED";default:return"REJECTED"}}async withdraw(e){let t={Authorization:"Basic ".concat(G.from(this.secretKey+":").toString("base64"))};if("RECEIVER"===e.paymentMethod){let a=await this.api.post("/recipients/".concat(e.receiverId,"/withdrawals"),{amount:e.amount},{headers:t});return{withdrawId:a.data.id,status:this.parseWithdrawStatus(a.data.status),amount:a.data.amount}}throw Error("Method not implemented.")}async getWithdraw(e){throw Error("Method not implemented.")}static parseStatus(e){switch(e){case"pending":case"processing":return"PENDING";case"paid":return"APPROVED";case"canceled":return"REFUNDED";case"failed":case"overpaid":case"underpaid":default:return"REJECTED";case"chargedback":return"CHARGEBACK"}}async createCardToken(e){try{let t=await this.api.post("/tokens",{type:"card",card:{number:e.cardNumber,holder_name:e.holderName,holder_document:e.holderDocument,exp_month:e.expMonth,exp_year:e.expYear,cvv:e.cvv}},{params:{appId:this.publicKey}});return t.data.id}catch(e){if(console.log(e.response.data),e.response.data.errors)throw Error(e.response.data.errors[0].message);throw e}}async createCardId(e){let t={Authorization:"Basic ".concat(G.from(this.secretKey+":").toString("base64"))},a=await this.api.post("/customers",{name:e.customer.name,email:e.customer.email,document:e.customer.document,document_type:"cpf",type:"individual",phones:{mobile_phone:{country_code:"55",number:e.customer.phone.substring(2),area_code:e.customer.phone.substring(0,2)}}},{headers:t}),r=a.data.id,n=await this.api.post("/customers/".concat(r,"/cards"),{token:e.cardToken,holder_document:e.customer.document,billing_address:{line_1:"10880, Malibu Point, Malibu Central",zip_code:"90265",city:"Malibu",state:"CA",country:"US"}},{headers:t});return n.data.id}async createTransaction(e){let t=e.items.map(t=>({code:t.id,title:t.title,amount:t.unitPrice,quantity:t.quantity,tangible:t.tangible,description:e.description})),a={name:e.customer.name,type:"individual",country:"br",email:e.customer.email,document_type:"cpf",document:e.customer.document,phones:{mobile_phone:{country_code:"55",number:e.customer.phone.substring(2),area_code:e.customer.phone.substring(0,2)}}},r={Authorization:"Basic ".concat(G.from(this.secretKey+":").toString("base64"))};if("PIX"===e.paymentMethod){let n=await this.api.post("/orders",{items:t,customer:a,payments:[{payment_method:"pix",pix:{expires_at:i()(new Date).add(1,"days").toISOString(),additional_information:[{name:"Pagamento de",value:e.items[0].title}]}}]},{headers:r}),o=n.data.charges[0],s=o.last_transaction;return{paymentMethod:"PIX",transactionId:n.data.id,pixQrCode:s.qr_code_url,expiresAt:i()(s.expires_at).toDate(),pixCode:s.qr_code,status:PagarmeBaasPaymentProvider.parseStatus(o.status),amount:e.amount}}if("CREDIT_CARD"===e.paymentMethod)try{let n=await this.api.post("/orders",{items:t,customer:a,payments:[{payment_method:"credit_card",credit_card:{recurrence:!1,installments:e.installments,statement_descriptor:(0,F.Mh)(),card_id:e.cardId}}]},{headers:r}),o=n.data.charges[0],i=o.last_transaction;return console.dir(i,{depth:null}),{paymentMethod:"CREDIT_CARD",transactionId:n.data.id,status:PagarmeBaasPaymentProvider.parseStatus(o.status),amount:e.amount}}catch(e){if(console.log(e.response.data),e.response.data.errors)throw Error(e.response.data.errors[0].message);throw e}else if("BILLET"===e.paymentMethod){let n=await this.api.post("/orders",{items:t,customer:a,payments:[{payment_method:"boleto",boleto:{instructions:"Pagar at\xe9 o vencimento",due_at:i()().add(5,"days").format("YYYY-MM-DD"),type:"DM"}}]},{headers:r}),o=n.data.charges[0],s=o.last_transaction,d=s.url,c=s.line,l=s.due_at;return{paymentMethod:"BILLET",transactionId:n.data.id,status:PagarmeBaasPaymentProvider.parseStatus(o.status),amount:e.amount,billetUrl:d,billetCode:c,expiresAt:l}}throw Error("Not implemented yet.")}async getTransaction(e,t){let a={Authorization:"Basic ".concat(G.from(this.secretKey+":").toString("base64"))},r=await this.api.get("/orders/".concat(e),{headers:a}),n=r.data.charges[0],o=n.last_transaction;if("pix"===o.transaction_type)return{paymentMethod:"PIX",transactionId:r.data.id,pixQrCode:o.qr_code_url,expiresAt:i()(o.expires_at).toDate(),pixCode:o.qr_code,status:PagarmeBaasPaymentProvider.parseStatus(n.status),amount:n.amount};if("credit_card"===o.transaction_type)return{paymentMethod:"CREDIT_CARD",transactionId:r.data.id,status:PagarmeBaasPaymentProvider.parseStatus(n.status),amount:n.amount};if("boleto"===o.transaction_type)return{paymentMethod:"BILLET",transactionId:r.data.id,status:PagarmeBaasPaymentProvider.parseStatus(n.status),amount:n.amount,billetUrl:o.url,billetCode:o.line,expiresAt:o.due_at};throw Error("Not implemented yet.")}async refoundTransaction(e,t){let a={Authorization:"Basic ".concat(G.from(this.secretKey+":").toString("base64"))},r=await this.api.get("/orders/".concat(e),{headers:a}),n=r.data.charges[0],o=await this.api.delete("/charges/".concat(n.id),{headers:a,data:{amount:t}});return{refundId:o.data.id,status:200===o.status}}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://api.pagar.me/core/v5/",headers:{"Content-Type":"application/json"}})}};PagarmeBaasPaymentProvider.providerName="PAGARMEBAAS";let PronttusPaymentProvider=class PronttusPaymentProvider extends BasePaymentProvider{static async processWebhook(e){if(e&&"PAYMENT"===e.type)return{transactionId:String(e.transactionId),type:"TRANSACTION",status:this.parseStatus(e.status)}}async withdraw(e){var t;let a;if((t=a||(a={})).CPF="CPF",t.CNPJ="CNPJ",t.PHONE="PHONE",t.EMAIL="EMAIL",t.RANDOM="RANDOM","PIX"===e.paymentMethod){let t=await this.api.post("/payment/withdraw",{amount:e.amount,type:"PIX",description:"Transfer\xeancia",details:{key:e.pixKey,keyType:a[e.pixType],document:e.document,name:e.name}});return{amount:e.amount,withdrawId:t.data.transactionId,status:PronttusPaymentProvider.parseWithdrawStatus(t.data.status)}}throw Error("Method not implemented.")}getWithdraw(e){throw Error("Method not implemented.")}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}static parseWithdrawStatus(e){switch(e){case"WAITING_CONFIRMATION":case"WAITING_PAYMENT":case"WAITING_WITHDRAW":case"WITHDRAW_REQUEST":return"PENDING";case"WITHDRAW_PAID":case"PAID":case"APPROVED":return"APPROVED";default:return"REJECTED"}}static parseStatus(e){switch(e){case"WAITING_PAYMENT":return"PENDING";case"PAID":case"INFRACTION":return"APPROVED";case"REFUND":return"CHARGEBACK";default:return"REJECTED"}}async createCardToken(e){throw Error("Method not implemented.")}async createCardId(e){throw Error("Method not implemented.")}async createTransaction(e){let t=i()().add(1,"days").format("YYYY-MM-DD");if("PIX"===e.paymentMethod){let a=await this.api.post("/payment",{amount:e.amount,description:e.description,customer:{name:e.customer.name,document:e.customer.document,email:e.customer.email,phone:e.customer.phone}});return{paymentMethod:"PIX",transactionId:String(a.data.transactionId),pixQrCode:await s.toDataURL(a.data.pixCode),expiresAt:i()(t).toDate(),pixCode:a.data.pixCode,status:"PENDING",amount:e.amount}}throw Error("Method not implemented.")}async getTransaction(e,t){let a=await this.api.get("/payment/".concat(e)),r=a.data;if("PIX"===r.operation.method)return{paymentMethod:"PIX",transactionId:String(r.id),pixQrCode:"",pixCode:"",expiresAt:i()(r.createdAt).add(1,"day").toDate(),status:PronttusPaymentProvider.parseStatus(r.operation.status),amount:r.operation.value};throw Error("Method not implemented.")}async refoundTransaction(e,t){let a=await this.api.post("/v1/payment/refund",{transactionId:e,description:"Reembolso"});return{refundId:a.data.DocumentNumber,status:a.data.Success}}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://api.pronttus.com.br/v1",headers:{"Content-Type":"application/json","x-client-id":this.publicKey,"x-client-secret":this.secretKey}})}};PronttusPaymentProvider.providerName="PRONTTUS";let CashtimePaymentProvider=class CashtimePaymentProvider extends BasePaymentProvider{static async processWebhook(e){if(e)return{transactionId:String(e.orderId),type:"TRANSACTION",status:this.parseStatus(e.status)}}async withdraw(e){throw Error("Method not implemented.")}getWithdraw(e){throw Error("Method not implemented.")}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}static parseWithdrawStatus(e){switch(e){case"WAITING_CONFIRMATION":case"WAITING_PAYMENT":case"WAITING_WITHDRAW":case"WITHDRAW_REQUEST":return"PENDING";case"WITHDRAW_PAID":case"PAID":case"APPROVED":return"APPROVED";default:return"REJECTED"}}static parseStatus(e){switch(e){case"awaiting_payment":case"pending":case"waiting_payment":return"PENDING";case"approved":case"paid":case"received":return"APPROVED";case"refund":case"refunded":case"chargeback":case"chargedback":case"infraction":return"CHARGEBACK";default:return"REJECTED"}}async createCardToken(e){let t=new CardEncryption("cashtime-secret-public-secret-shddkzawdh2-lzswkwzhsd"),a=t.encryptCardData(e);return a}async createCardId(e){return e.cardToken}async createTransaction(e){let t=i()().add(1,"days").format("YYYY-MM-DD"),a=[{title:e.items[0].title,description:e.items[0].title,unitPrice:e.amount,quantity:1,tangible:!0}];if("PIX"===e.paymentMethod){let r=await this.api.post("/transactions",{postbackUrl:e.webhookUrl,paymentMethod:"pix",isInfoProducts:!0,customer:{name:e.customer.name,email:e.customer.email,phone:e.customer.phone,document:{number:e.customer.document,type:"cpf"}},items:a});return{paymentMethod:"PIX",transactionId:String(r.data.orderId),pixQrCode:await s.toDataURL(r.data.pix.payload),expiresAt:i()(t).toDate(),pixCode:r.data.pix.payload,status:"PENDING",amount:e.amount}}if("BILLET"===e.paymentMethod){let r=await this.api.post("/transactions",{postbackUrl:e.webhookUrl,paymentMethod:"invoice",isInfoProducts:!0,customer:{name:e.customer.name,email:e.customer.email,phone:e.customer.phone,document:{number:e.customer.document,type:"cpf"}},items:a});return{paymentMethod:"BILLET",transactionId:String(r.data.orderId),billetCode:"",billetUrl:"",expiresAt:i()(t).toDate(),status:"PENDING",amount:e.amount}}if("CREDIT_CARD"===e.paymentMethod){let t=new CardEncryption("cashtime-secret-public-secret-shddkzawdh2-lzswkwzhsd"),{cardNumber:r,cvv:n,expMonth:o,expYear:i,holderName:s}=t.decryptCardData(e.cardId),d=await this.api.post("/transactions",{postbackUrl:e.webhookUrl,paymentMethod:"credit_card",isInfoProducts:!0,customer:{name:e.customer.name,email:e.customer.email,phone:e.customer.phone,document:{number:e.customer.document,type:"cpf"}},card:{number:r,holderName:s,expirationMonth:Number(o),expirationYear:Number(i),cvv:n},installments:e.installments,items:a});return{paymentMethod:"CREDIT_CARD",transactionId:String(d.data.orderId),status:CashtimePaymentProvider.parseStatus(d.data.status),amount:e.amount}}throw Error("Method not implemented.")}async getTransaction(e,t){let a=await this.api.get("/details/orders/".concat(e)),{orders:r}=a.data;return{transactionId:String(r.id),status:CashtimePaymentProvider.parseStatus(r.status.toLowerCase()),amount:Math.round(100*r.total),paymentMethod:"credit_card"===r.paymentMethod?"CREDIT_CARD":"PIX",..."credit_card"===r.paymentMethod?{}:{billetCode:r.billetCode||"",billetUrl:r.billetUrl||"",expiresAt:r.expiresAt?i()(r.expiresAt).toDate():void 0},pixQrCode:await s.toDataURL(r.paymentCode),pixCode:r.paymentCode||""}}async refoundTransaction(e,t){throw Error("Method not implemented.")}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://api.cashtime.com.br/v1",headers:{"Content-Type":"application/json","x-authorization-key":this.secretKey.trim()}})}};CashtimePaymentProvider.providerName="CASHTIME";var K=a(58192).Buffer;let LynxpayPaymentProvider=class LynxpayPaymentProvider extends BasePaymentProvider{async createCardToken(e){var t,a,r,o;let i=this.publicKey,s={cardNumber:e.cardNumber,holderName:e.holderName,holderDocument:e.holderDocument,expMonth:e.expMonth,expYear:"20"+e.expYear,cvv:e.cvv};async function aesGcmEncrypt(e,t){let a=P().randomBytes(12),r=P().createHash("sha256").update(t,"utf8").digest(),n=P().createCipheriv("aes-256-gcm",r,a),o=n.update(e,"utf8","base64");o+=n.final("base64");let i=n.getAuthTag();return K.concat([a,i,K.from(o,"base64")]).toString("base64")}try{!function(e){if(!e)throw Error("card \xe9 obrigat\xf3rio.");if(!e.cardNumber)throw Error("card.cardNumber \xe9 obrigat\xf3rio.");if(!e.holderName)throw Error("card.holderName \xe9 inv\xe1lido. Obrigat\xf3rio nome e sobrenome.");if(!e.expMonth||e.expMonth.toString().length>2)throw Error("card.expMonth \xe9 inv\xe1lido. Precisa ser menor ou igual a 2 caracteres.");if(!e.expYear||4!==e.expYear.toString().length)throw Error("card.expYear \xe9 inv\xe1lido. Precisa ter 4 caracteres.");if(!e.cvv||e.cvv.length<3||e.cvv.length>4)throw Error("card.cvv \xe9 inv\xe1lido. Precisa ter entre 3 e 4 caracteres.")}(s);let e={number:s.cardNumber,holderName:s.holderName,expirationMonth:parseInt(s.expMonth),expirationYear:parseInt(s.expYear),cvv:s.cvv},a=(o=function(e){let t="0123456789abcdefghijklmnopqrstuvwxyz",a="";for(let e=0;e<20;e++)a+=t.charAt(Math.floor(Math.random()*t.length));return a}(0),P().createHash("sha1").update(o).digest("hex")),r=await aesGcmEncrypt(a,this.publicKey);e.encryption=r;let d=await n.default.post("".concat("https://api.hopysplit.com.br","/v1/card-token?publicKey=").concat(i),e);if(d.status>201)throw Error((null===(t=d.data)||void 0===t?void 0:t.message)||"Ocorreu um erro desconhecido.");return d.data}catch(e){throw console.error("Erro ao gerar token do cart\xe3o:",e),Error((null===(r=e.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.message)||e.message||"Erro desconhecido.")}}async createCardId(e){return e.cardToken}withdraw(e){throw Error("Method not implemented.")}getWithdraw(e){throw Error("Method not implemented.")}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}static async processWebhook(e){if("transaction"===e.type)return{transactionId:e.external_reference,type:"TRANSACTION",status:LynxpayPaymentProvider.parseStatus(e.status)}}async createTransaction(e){try{let t={amount:e.amount,paymentMethod:{CREDIT_CARD:"credit_card",PIX:"pix",BILLET:"boleto"}[e.paymentMethod],customer:{name:e.customer.name,email:e.customer.email,document:{number:e.customer.document,type:"cpf"},phone:e.customer.phone},items:e.items.map(e=>({title:e.title,unitPrice:e.unitPrice,quantity:e.quantity,tangible:e.tangible})),postbackUrl:e.webhookUrl};if("CREDIT_CARD"===e.paymentMethod){if(!e.cardId)throw Error("Card token is required for credit card payments.");t.card={hash:e.cardId,installments:e.installments||1}}console.log("Payload:",t);let a=await this.api.post("/transactions",t),r=a.data;return console.log("Transaction:",r),{paymentMethod:r.paymentMethod.toUpperCase(),amount:r.amount,transactionId:String(r.id),status:LynxpayPaymentProvider.parseStatus(r.status),pixQrCode:await s.toDataURL(r.pix),pixCode:r.pix,expiresAt:r.expiresAt?new Date(r.expiresAt):void 0}}catch(e){var t,a,r;throw(null===(t=e.response)||void 0===t?void 0:t.data)?console.error("Erro ao criar transa\xe7\xe3o:",e.response.data):console.error("Erro ao criar transa\xe7\xe3o:",e),Error((null===(r=e.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.message)||e.message||"Erro desconhecido.")}}async getTransaction(e){var t,a;let{data:r}=await this.api.get("/transactions/".concat(e));return{paymentMethod:r.paymentMethod.toUpperCase(),transactionId:r.id,status:LynxpayPaymentProvider.parseStatus(r.status),amount:r.amount,pixQrCode:null===(t=r.pix)||void 0===t?void 0:t.qrCode,pixCode:null===(a=r.pix)||void 0===a?void 0:a.code,expiresAt:r.expiresAt?new Date(r.expiresAt):void 0}}async refoundTransaction(e,t){let a=await this.api.post("/transactions/".concat(e,"/refund"),{amount:t});return{refundId:a.data.id,status:"approved"===a.data.status}}static parseStatus(e){switch(e){case"pending":return"PENDING";case"approved":return"APPROVED";case"refunded":return"REFUNDED";default:return"REJECTED"}}static parseRefundStatus(e){switch(e){case"pending":return"PENDING";case"approved":return"APPROVED";default:return"REJECTED"}}constructor(e,t,a){super(e,t,a),this.publicKey=e,this.secretKey=t,this.baseUrl=a,this.api=n.default.create({baseURL:"https://api.lynxpagamentos.com/v1",headers:{"Content-Type":"application/json","User-Agent":"Company X (contato@empresa.com)"}}),this.api.defaults.headers.authorization="Basic "+K.from("".concat(t,":x")).toString("base64")}};LynxpayPaymentProvider.providerName="LYNXPAY";let ReflowpayPaymentProvider=class ReflowpayPaymentProvider extends BasePaymentProvider{static async processWebhook(e){if(e)return{transactionId:String(e.orderId),type:"TRANSACTION",status:this.parseStatus(e.status)}}async withdraw(e){throw Error("Method not implemented.")}getWithdraw(e){throw Error("Method not implemented.")}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}static parseWithdrawStatus(e){switch(e){case"WAITING_CONFIRMATION":case"WAITING_PAYMENT":case"WAITING_WITHDRAW":case"WITHDRAW_REQUEST":return"PENDING";case"WITHDRAW_PAID":case"PAID":case"APPROVED":return"APPROVED";default:return"REJECTED"}}static parseStatus(e){switch(e){case"awaiting_payment":case"pending":case"waiting_payment":return"PENDING";case"approved":case"paid":case"received":case"infraction":return"APPROVED";case"refund":case"refunded":case"chargeback":case"chargedback":return"CHARGEBACK";default:return"REJECTED"}}async createCardToken(e){let t=new CardEncryption("reflowpay-secret-public-secret-shddkzawdh2-lzswkwzhsd"),a=t.encryptCardData(e);return a}async createCardId(e){return e.cardToken}async createTransaction(e){let t=i()().add(1,"days").format("YYYY-MM-DD"),a=[{title:e.items[0].title,description:e.items[0].title,unitPrice:e.amount,quantity:1,tangible:!0}];if("PIX"===e.paymentMethod){let r=await this.api.post("/transactions",{postbackUrl:e.webhookUrl,paymentMethod:"pix",isInfoProducts:!0,customer:{name:e.customer.name,email:e.customer.email,phone:e.customer.phone,document:{number:e.customer.document,type:"cpf"}},items:a});return{paymentMethod:"PIX",transactionId:String(r.data.orderId),pixQrCode:await s.toDataURL(r.data.pix.payload),expiresAt:i()(t).toDate(),pixCode:r.data.pix.payload,status:"PENDING",amount:e.amount}}if("CREDIT_CARD"===e.paymentMethod){let t=new CardEncryption("reflowpay-secret-public-secret-shddkzawdh2-lzswkwzhsd"),{cardNumber:r,cvv:n,expMonth:o,expYear:i,holderName:s}=t.decryptCardData(e.cardId),d=await this.api.post("/transactions",{postbackUrl:e.webhookUrl,paymentMethod:"credit_card",isInfoProducts:!0,customer:{name:e.customer.name,email:e.customer.email,phone:e.customer.phone,document:{number:e.customer.document,type:"cpf"}},card:{number:r,holderName:s,expirationMonth:Number(o),expirationYear:Number(i),cvv:n},installments:e.installments,items:a});return{paymentMethod:"CREDIT_CARD",transactionId:String(d.data.orderId),status:ReflowpayPaymentProvider.parseStatus(d.data.status),amount:e.amount}}throw Error("Method not implemented.")}async getTransaction(e,t){throw Error("Method not implemented.")}async refoundTransaction(e,t){throw Error("Method not implemented.")}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://api.reflowpay.com/v1",headers:{"Content-Type":"application/json","x-authorization-key":this.secretKey}})}};ReflowpayPaymentProvider.providerName="REFLOWPAY";var q=a(58192).Buffer;let W=new(M()).Agent({rejectUnauthorized:!1});let ZendryPaymentProvider=class ZendryPaymentProvider extends BasePaymentProvider{static async processWebhook(e){if("pix_qrcode"===e.notification_type)return{transactionId:String(e.message.reference_code),type:"TRANSACTION",status:ZendryPaymentProvider.parseStatus(e.message.status)}}async getAuthorization(){let e=q.from(this.publicKey+":"+this.secretKey).toString("base64"),t=await this.api.post("/auth/generate_token",{grant_type:"client_credentials"},{headers:{Authorization:"Basic ".concat(e),"Content-Type":"application/json"}}),a=t.data.access_token;return a}async withdraw(e){let t=await this.getAuthorization();if("PIX"===e.paymentMethod){let a=e.pixType,r=e.pixKey;"RANDOM"===e.pixType&&(a="token"),"PHONE"===e.pixType&&(r="+55".concat(e.pixKey));let{data:n}=await this.api.post("/v1/pix/payments",{initiation_type:"dict",idempotent_id:(0,x.Z)(),value_cents:e.amount,pix_key_type:a.toLowerCase(),pix_key:r,authorized:!0},{headers:{Authorization:t}});return{withdrawId:n.payment.reference_code,status:n.payment.status,amount:n.payment.value_cents}}throw Error("Method not implemented.")}async getWithdraw(e){throw Error("Method not implemented.")}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}static parseWithdrawStatus(e){return({CONFIRMED:"APPROVED",PENDING:"PENDING",PROCESSING:"PENDING",CANCELED:"CANCELED"})[e]||"REJECTED"}static parseStatus(e){switch(e){case"awaiting_payment":case"canceled":return"PENDING";case"paid":return"APPROVED";case"error":return"CHARGEBACK";default:return"REJECTED"}}createCardToken(e){throw Error("Method not implemented.")}createCardId(e){throw Error("Method not implemented.")}async createTransaction(e){let t=await this.getAuthorization();if("PIX"===e.paymentMethod){let{data:a}=await this.api.post("/v1/pix/qrcodes",{value_cents:e.amount,generator_name:e.customer.name,generator_document:e.customer.document},{headers:{authorization:"Bearer ".concat(t)}});return{paymentMethod:"PIX",amount:e.amount,pixCode:a.qrcode.content,pixQrCode:await s.toDataURL(a.qrcode.content),transactionId:a.qrcode.reference_code,status:"PENDING"}}throw Error("Method not implemented.")}async getTransaction(e,t){let a=await this.getAuthorization(),{data:r}=await this.api.get("/v1/pix/qrcodes/".concat(e),{headers:{authorization:"Bearer ".concat(a)}});return{paymentMethod:"PIX",amount:Number(r.qrcode.value_cents),pixCode:r.qrcode.content,pixQrCode:await s.toDataURL(r.qrcode.content),transactionId:r.qrcode.reference_code,status:ZendryPaymentProvider.parseStatus(r.qrcode.status)}}refoundTransaction(e,t){throw Error("Method not implemented.")}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://api.zendry.com.br",httpsAgent:W,proxy:{host:"brd.superproxy.io",port:33335,auth:{username:"brd-customer-hl_92cf3f01-zone-paymaker_fixed_ip",password:"0w5zqovsd8zd"}}})}};ZendryPaymentProvider.providerName="ZENDRY";var X=a(58192).Buffer;let PagueSafePaymentProvider=class PagueSafePaymentProvider extends BasePaymentProvider{static async processWebhook(e){if("transaction"===e.type)return{transactionId:String(e.data.id),type:"TRANSACTION",status:this.parseStatus(e.data.status)}}async createReceiver(e){throw Error("Method not implemented.")}async getReceiver(e){throw Error("Method not implemented.")}parseWithdrawStatus(e){throw Error("Method not implemented.")}async withdraw(e){throw Error("Method not implemented.")}getWithdraw(e){throw Error("Method not implemented.")}async createCardToken(e){let t=new CardEncryption("paguesafe-secret-public-secret-shddkzawdh2-lzswkwzhsd"),a=t.encryptCardData(e);return a}async createCardId(e){return e.cardToken}static parseStatus(e){switch(e){case"processing":case"authorized":case"waiting_payment":case"partially_paid":return"PENDING";case"paid":return"APPROVED";case"refunded":return"REFUNDED";case"refused":case"canceled":case"in_protest":default:return"REJECTED";case"chargedback":return"CHARGEBACK"}}async createTransaction(e){let t=e.items.map(t=>({title:t.title,unitPrice:t.unitPrice,quantity:t.quantity,externalRef:t.id,tangible:!!e.address})),a={name:e.customer.name,email:e.customer.email,document:{number:e.customer.document,type:"cpf"},phone:e.customer.phone};if("PIX"===e.paymentMethod){let r=await this.api.post("/transactions",{amount:e.amount,paymentMethod:"pix",customer:a,items:t,postbackUrl:e.webhookUrl,pix:{expiresInDays:1}});return{paymentMethod:"PIX",transactionId:String(r.data.id),pixQrCode:await s.toDataURL(r.data.pix.qrcode),pixCode:r.data.pix.qrcode,expiresAt:i()(r.data.pix.expirationDate).toDate(),status:PagueSafePaymentProvider.parseStatus(r.data.status),amount:e.amount}}if("CREDIT_CARD"===e.paymentMethod){let r=new CardEncryption("paguesafe-secret-public-secret-shddkzawdh2-lzswkwzhsd"),{cardNumber:n,cvv:o,expMonth:i,expYear:s,holderName:d}=r.decryptCardData(e.cardId),c=await this.api.post("/transactions",{amount:e.amount,paymentMethod:"credit_card",customer:a,items:t,postbackUrl:e.webhookUrl,card:{number:n,holderName:d,expirationMonth:Number(i),expirationYear:Number("20".concat(s)),cvv:o},installments:e.installments});return{paymentMethod:"CREDIT_CARD",transactionId:String(c.data.id),status:PagueSafePaymentProvider.parseStatus(c.data.status),amount:e.amount}}if("BILLET"===e.paymentMethod){let r=await this.api.post("/transactions",{amount:e.amount,paymentMethod:"boleto",customer:a,items:t,postbackUrl:e.webhookUrl,boleto:{expiresInDays:3}});return{paymentMethod:"BILLET",transactionId:String(r.data.id),billetCode:r.data.boleto.barcode,billetUrl:r.data.boleto.url,status:"PENDING",amount:e.amount}}throw Error("Not implemented yet.")}async getTransaction(e,t){let a=await this.api.get("/transactions/".concat(e));if("pix"===a.data.paymentMethod)return{paymentMethod:"PIX",transactionId:String(a.data.id),pixQrCode:a.data.pix.url,pixCode:a.data.pix.qrcode,status:PagueSafePaymentProvider.parseStatus(a.data.status),expiresAt:i()(a.data.pix.expirationDate).toDate(),amount:a.data.amount};if("credit_card"===a.data.paymentMethod)return{paymentMethod:"CREDIT_CARD",transactionId:String(a.data.id),status:PagueSafePaymentProvider.parseStatus(a.data.status),amount:a.data.amount};throw Error("Method not implemented.")}async refoundTransaction(e,t,a){try{let t=await this.api.post("/transactions/".concat(e,"/refund"));return{refundId:t.data.id,status:!0}}catch(e){throw Error("Internal server error")}}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://api.paguesafe.io/v1",headers:{"Content-Type":"application/json",authorization:"Basic "+X.from("".concat(this.secretKey,":x")).toString("base64")}})}};PagueSafePaymentProvider.providerName="PAGUESAFE";var H=a(58192).Buffer;let TreealPaymentProvider=class TreealPaymentProvider extends BasePaymentProvider{async getAuthorization(e){let t=await fetch(e),a=await t.arrayBuffer(),r=H.from(a),n=new T.Agent({cert:this.cert,key:this.key,pfx:r,passphrase:"onzsoftware",rejectUnauthorized:!1});this.agent=n;let o=await this.api.post("/oauth/token",{grant_type:"client_credentials",client_id:this.publicKey,client_secret:this.secretKey},{httpsAgent:n});return"Bearer ".concat(o.data.access_token)}async getCashOutAuthorization(e){let t=await fetch(e),a=await t.arrayBuffer(),r=H.from(a),o=new T.Agent({cert:this.certOut,key:this.keyOut,pfx:r,passphrase:"onzsoftware",rejectUnauthorized:!1});this.agent=o;let i=await n.default.post("https://secureapi.treeal-prod.onz.software/api/v2/oauth/token",{grant_type:"client_credentials",client_id:this.publicKey,client_secret:this.secretKey},{httpsAgent:o});return"Bearer ".concat(i.data.access_token)}static async processWebhook(e){if("RECEIVE"===e.type||"REFUND"===e.type){if("CANCELED"===e.data.status)return;let t="PENDING";return"REFUND"===e.type&&(t="CHARGEBACK"),"RECEIVE"===e.type&&"LIQUIDATED"===e.data.status&&(t="APPROVED"),{transactionId:String(e.data.txId),type:"TRANSACTION",status:t}}}async withdraw(e){if("PIX"===e.paymentMethod){let t=await h.platform.findUnique({where:{id:e.receiverId}});if(!t)throw Error("Unauthorized.");"PHONE"===e.pixType&&(e.pixKey="+55".concat(e.pixKey));let a=await this.getCashOutAuthorization(this.certCashOutPFXUrl),r=await n.default.post("https://secureapi.treeal-prod.onz.software/api/v2/pix/payments/dict",{pixKey:e.pixKey,payment:{currency:"BRL",amount:e.amount/100}},{headers:{Authorization:a,"x-idempotency-key":(0,x.Z)()},httpsAgent:this.agent});return{amount:100*r.data.payment.amount,withdrawId:r.data.endToEndId,status:"APPROVED"}}throw Error("Method not implemented.")}getWithdraw(e){throw Error("Method not implemented.")}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}static parseStatus(e){switch(e){case"ATIVA":case"REMOVIDA_PELO_PSP":return"PENDING";case"LIQUIDATED":case"CONCLUIDA":return"APPROVED";case"REFUND":return"CHARGEBACK";default:return"REJECTED"}}async createCardToken(e){throw Error("Method not implemented.")}async createCardId(e){throw Error("Method not implemented.")}async createTransaction(e){let t=await h.user.findFirstOrThrow({where:{id:e.userId},include:{platform:!0}}),a=await this.getAuthorization(this.certCashInPFXUrl);if("PIX"===e.paymentMethod){let r={devedor:{nome:e.customer.name,cpf:e.customer.document},valor:{original:e.amount/100,modalidadeAlteracao:0},chave:t.platform.defaultReceiverId},n=await this.api.post("/cob",r,{headers:{Authorization:a},httpsAgent:this.agent});return{paymentMethod:"PIX",transactionId:String(n.data.txid),expiresAt:i()().add("1","days").toDate(),pixQrCode:await s.toDataURL(n.data.pixCopiaECola),pixCode:n.data.pixCopiaECola,status:TreealPaymentProvider.parseStatus(n.data.status),amount:100*Number(n.data.valor.original)}}throw Error("Method not implemented.")}async getTransaction(e,t){let a=await h.payment.findFirstOrThrow({where:{transactionId:e},include:{createdByUser:{include:{platform:!0}}}});if(!a.createdByUser.platform.certCashInUrl)throw Error("Method not implemented.");let r=await this.getAuthorization(a.createdByUser.platform.certCashInUrl),n=await this.api.get("/cob/".concat(e),{headers:{Authorization:r},httpsAgent:this.agent}),o=n.data;return{paymentMethod:"PIX",transactionId:String(o.txid),pixQrCode:"",pixCode:"",status:TreealPaymentProvider.parseStatus(o.status),amount:100*Number(o.valor.original)}}async refoundTransaction(e,t){let a={authorization:"Basic "+H.from(this.secretKey+":x").toString("base64")},r=await this.api.post("/sells/".concat(e,"/refund"),{},{headers:a});return{refundId:r.data.id,status:200===r.status}}constructor(e,t,a){super(e,t,a),this.publicKey=e,this.secretKey=t,this.baseUrl=a,this.cert=H.from("-----BEGIN CERTIFICATE-----\nMIIFFDCCAvwCFCLxI3+NKvBM9fQbn+jVVrDlU9tDMA0GCSqGSIb3DQEBCwUAMEgx\nCzAJBgNVBAYTAkJSMQswCQYDVQQIDAJTQzEVMBMGA1UECgwMT05aIFNvZnR3YXJl\nMRUwEwYDVQQDDAxvbnouc29mdHdhcmUwHhcNMjQxMTE5MTk1ODE1WhcNMzQxMTE3\nMTk1ODE1WjBFMQswCQYDVQQGEwJCUjELMAkGA1UECAwCU0MxFTATBgNVBAoMDE9O\nWiBTb2Z0d2FyZTESMBAGA1UEAwwJVFJFRUFMXzE2MIICIjANBgkqhkiG9w0BAQEF\nAAOCAg8AMIICCgKCAgEAwKMRLZEjbIil9PjN1CisK0duAU57wCPDp8QurakK4Rn9\nXF5VX4XCgRgIbnXIcBTutmTkvxQ0+qn8/MgdjWf4OgQHDIt6ewaMhizvq/CCdzgV\nZishgJ3zXjmdK7PmOYvQmeVxKL4zmUK5XdkB9lvU7xCRVZRxPhrql4Rgv3+9rhCC\nrlrDWQgknYeiHXZh8AMM1Hyxte5nJVEktVbA5F2jByALOuTRcDkEalcOpkMNS4Wu\nVD335o+UsZVPtKdVtO+AnbHSy80wOXOrwjAttqfdbC/sE+dkeoMC/XroGlv4zobr\nhln/HhEG3lSsaR9YfAc6+SVtlMyg0acTnX/3oKv31MA2O3Art51NXd2FCvB1DoHc\nn+4ZO80H169iuCxCHUoF4WWlTCzmx5JiVUDdPNmo3/emv56bU5wZ7Gfdm+51BRvM\nX+8wx9rGNT+XjH0A6D1d3HqjefKDoOFJ6Impgh530QqlLUjZE4VxNYwBBoAA1HIb\nPC6/nDWHcUNZB5meUe3PkY7LUVEZawrgvJZDln2F03++D2+q/iukSabBD0TQFBhb\nztfYNCFqaMa47nXjfowlcTBnPc8gV1h8Q5tPIAqKSEhrBPdzaZdina5VT/m/YakH\na3jNeygugcce0wtdDPnvt2FOIbzQO6qDSq6aFc+NNpv8FOqdAha0+Xzz9Bc+wv0C\nAwEAATANBgkqhkiG9w0BAQsFAAOCAgEAIIwzQxK7HDAsK2oIsSbowsVnmtvmYVjd\n8ymA8N0dyVVbRIddzE87zc302IbrQNUNOvlx7eUtawGkGuLDuvsWZvx2Gx7sYyRY\ntSjfDA7mdD2wR0yv50yHDS9aq6spJu92H8rtPwagm2qJFkNbr9iC7JPYfY1b6m+K\nzyOerH5Nq6yfA6n6X2UdkNlkLnlJEl83tbG94tMfWNj1qo8JEINUjh5EAYu6ZVoo\nb/PdEJsnYABBhxgb5fbIcIdtbhXcav0x1U9+ehBs8Yg2VLuLxPrSuenTQMxFqpsA\n52DJoECIx/5DamPj3kYCEW1x639HT7r2s+OR+0gaKxs0Wu6cfRPmxS9v9KO9p7VR\nW8ZhX37PFxL9oQ51BqmDZb2KAhyZVEMTqLyfTAW4JV+tg4/DKEofvXk96/HwTaei\nv8m8wEbTLcwY4HqyRjn56WmeCpSh4+Qbl5RnLAq9dMXzYlXT8DsE/1544uWgQ22Q\n64Xn6F7xNsmdji3ITFe1x+3G7QYt5bLx1Ue/CoJqcPXKt3VovLeWCh+1KN7ywMfY\nPysbM7LQjTdww6e6k5ld3qVyBdmsJbNvQIWxNwwCN791uS4f+gdVuI4yAGUl5xTL\ndSfDgPWiM6a4J7fHRbt/DL6ZVY1PSepTog72KU5G5+IEL7Q7SDJe9nc1seJd+he3\nfbtUeGKEuu0=\n-----END CERTIFICATE-----","utf-8"),this.key=H.from("-----BEGIN PRIVATE KEY-----\nMIIJQwIBADANBgkqhkiG9w0BAQEFAASCCS0wggkpAgEAAoICAQDAoxEtkSNsiKX0\n+M3UKKwrR24BTnvAI8OnxC6tqQrhGf1cXlVfhcKBGAhudchwFO62ZOS/FDT6qfz8\nyB2NZ/g6BAcMi3p7BoyGLO+r8IJ3OBVmKyGAnfNeOZ0rs+Y5i9CZ5XEovjOZQrld\n2QH2W9TvEJFVlHE+GuqXhGC/f72uEIKuWsNZCCSdh6IddmHwAwzUfLG17mclUSS1\nVsDkXaMHIAs65NFwOQRqVw6mQw1Lha5UPffmj5SxlU+0p1W074CdsdLLzTA5c6vC\nMC22p91sL+wT52R6gwL9eugaW/jOhuuGWf8eEQbeVKxpH1h8Bzr5JW2UzKDRpxOd\nf/egq/fUwDY7cCu3nU1d3YUK8HUOgdyf7hk7zQfXr2K4LEIdSgXhZaVMLObHkmJV\nQN082ajf96a/nptTnBnsZ92b7nUFG8xf7zDH2sY1P5eMfQDoPV3ceqN58oOg4Uno\niamCHnfRCqUtSNkThXE1jAEGgADUchs8Lr+cNYdxQ1kHmZ5R7c+RjstRURlrCuC8\nlkOWfYXTf74Pb6r+K6RJpsEPRNAUGFvO19g0IWpoxrjudeN+jCVxMGc9zyBXWHxD\nm08gCopISGsE93Npl2KdrlVP+b9hqQdreM17KC6Bxx7TC10M+e+3YU4hvNA7qoNK\nrpoVz402m/wU6p0CFrT5fPP0Fz7C/QIDAQABAoICABvfnIKI5TofnaUlg8wxOb77\naMXvSsW3BxOqizcykLHt659Ra63/h0YxqYqo0qCxJAdSmwIGVPzOMEk4ADAFUsFm\nSB9/ERu7C1tLe5SCn7DLddaLjXSe+5IZ6Q2OoX9DJU3CCXkj6F3CmLAlJdJgCvQF\nOYT2DoVg1Kqpi2w6JMKKfguSHiuu8Mlge6B4EDIakYvaInFY4SY2UwbwL3H7wIqt\nOXgYmDDSTJAXL7X2rsug42QqIUmEY2ISC5nwD903Pdd+Mv+tSCSQAagpW3v6AcvV\nNVDTTafSdtIhq3L2SuPrWX9eXKVHlm8A4SpG0FawnyO3et8p1WfwnSHQMeRW7cGO\nToGowTvgnJFTzApVch7sC8mxtKxq9QCzFITpzjs4f/TCi3kuQGQJGko7M9lbmpi7\nN8RMre56mS+ZC1X83r64NSML/q88SD6vwJzFeXmfJimBt4+SBPtVCDhk0IyNMpfv\nV4HTVM3qxOF9AEwmiFtrcUXl7s3TNfew6shKeNNmwN+vL/M4z7cAS+6U2kN3ldUL\ntEMX8k42Jbfc7k0WhhAt7wPqTUmEaDazhe5yjy9qo1K1QztNrqLJ/Vr/LwYlT8y9\nAUHWXQWLQXdQN3Ji5zpbw13LEGyNxzMMUMAxXazb3bcEd8crRh3xQfr+y/orwAG3\nNugh3JvOed1ZI9Viu+MbAoIBAQD0JTYCjPv7TMISvOgnCftsPl7HRZQkoagO0wlv\n86zcZj97zwi1m8Eh4jqwVvRkoX70ksgwGFUDRz2Y8P4DzHZ4CEMJogCsz2jGPBdY\n1KEkeMoQ2yR8I4OLDUJNU/1Z8KwVTa81rZTP53BViP0z1VlCaDyvEjXaBwyL+uI3\nmgvBkA4hBwkiZF9q9geg7dcw0dwMgRHVRc4MFhDXf7wydBKJD4kffMRHlItmvr6/\nbVUim8UPMLpawB5vAvl6/9Jl6lWeCHipfy1rB4W+X0g+JYj3kNZszvpypmbXDTBv\n1tsQaCDYAEj+X3iIwZKLYRGu1LET84t63/Qe85Kt1WMkxyf7AoIBAQDJ/ZgJiOKO\ncxwhh0rHB8OG21u5nOhrBWRBAvA0ulL29Qu4ZpVX/4N/0iiW2TWGbdfBTnG4oL1w\n4dlxR+q/ImSUu6tyQooIvvLz4C76/0bsRFrqJb3j7c2rvJ9Cv0eXnatIsaaOM4vu\nRqobeVm8tkvz9eTxRY1bgvqMS8425WzpAbrZqF/49ab6bFh+S4wulvb2lrV0az1m\n8uLChH6ynjMdo44TI8e9ms2hOAozq66qYEYAQJTOcz3rwEWUr2RGV5satQHv3gUM\nc1tPcH2wAxRSzdv3ta1uiLC5uycdbujCsrxLZgABADIpUn0CL0agb03x4KCPeHB2\nAeHUlMpoGHdnAoIBAQCU1Vpnk6rJN7HX2nFr2xn6kssUj8YPzry0zNIj/ViTw4FP\n6JZWn+zMyy0b8uZpsknCrvh62Vp59SQH6GHxzuMpqV+0r53Zu1cUAe35qSXTJg+I\n1w8W3k+CpUKWAW2hNqaxFfqJrpfZZi2E903kG1uesAzObTuG/mUXsInXe4FPLpJu\nb+uRm77PZcygvl1A1a5fsQ8+BJ/nnkwGE0iXOUtTYrUlDNpbCKMyr3V5HR2ZS3yG\nFh6E1Dm5UwbjhLCukHxBKsjkCzOU27EcrNlNiXRF93XAPy1OV0K6NsAgbcp95fyf\nsQzOhUTlmZvMfBBblC2fDAkrjvszIyl3723RLdehAoIBAF2X+v3YBppY7hz/EoAc\nsdXoCJ19/hew3N5e3SyhdVXm/7JHHkYzKBxvJc2YAfwzI3j3vyv8lysaC2Y5G6XK\n6u4b83ozKMCasfqc00gMRzGtDq9WI6Hci6Na+DS2axbuwPIjFvjnG5yh86pdVV5i\n3djCBH5javePPkcJzRiUwB1LZuf549Z5BREeaPbETMU9wFtMQ/IYys/MFZRqTka3\nlRnTsj5eIuxRMZzVWazNjVZ225i8U/dBYNy/L76QcpdBeqYqXyZlKtO1FAdAKY0I\nMD+aEaW68gy4m6LD/IDf5kxpA2Swc6oDDDsndLMxcrleObCtE9jGxt13S8vz0cHg\nLFsCggEBANjnVYTKJEZAnmWj9pxYRcs/PDNz/b5GlGfgUFVvwCmXMLz4fDsaaY6+\nMkP/1JnFBET1wNryvd32BWLjVilahpiE9H+GgayLcfvNT+MYxRUbRo5DYaGF/h1B\nGE7ryBiXjhliScH9YaoCxLCDH1UjBj6ulL4mV0+mu+o2PMR2vrQ0fAWhwqIJ7d13\nN2WzOQBu4vKJK6B6jdSPXGfl1fCrf8ZpAFVBcvuEQhw8/PuFLezya78Be4/uoyo0\ngvxVRGokhtutNNpVIPnbmMsdv2Rpny5olsbdqWmGoAn7bW63Jc0jKzy6AsfPy3iW\ntJ4zZZnsY26mjTltTvKdDyXzaCdJZlI=\n-----END PRIVATE KEY-----","utf-8"),this.certOut=H.from("-----BEGIN CERTIFICATE-----\nMIID7TCCAtUCFGDsOKU28e7FFNPIqYHebqAwfscHMA0GCSqGSIb3DQEBCwUAMCEx\nHzAdBgNVBAMMFk9OWi1TRUNVUkUtQVJFQS1UUkVFQUwwHhcNMjQxMTE5MTk1NjU1\nWhcNMzQxMTE3MTk1NjU1WjBFMQswCQYDVQQGEwJCUjELMAkGA1UECAwCU0MxFTAT\nBgNVBAoMDE9OWiBTb2Z0d2FyZTESMBAGA1UEAwwJVFJFRUFMXzE2MIICIjANBgkq\nhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAraAGHSJ2cnsH8otGWjMPSi+zgXV8AmAk\nBHttxmWzHRcwHtELoLsfNA1vVDXE3AvuYfoAvKzWjQgK7GpI7O1iyFv1ZlSI/11u\nl5uUA5oKA+0mRJxyDFsAd0GXwWCKlTjq7TmriKm7y8Nb/sbcoCidR86KUAG74Ktb\nmF5XPSDWhE/tusuSJJWFfddpGlgmmT4vHT/sUvrQnaO4ZiP+Shwq29KJrV48umDT\nR4NzgXsoFmI/n4I1nFA5vGVfUzjLa5h7FXnVrmIw/+KRVOur0wbRtEoGst42JMYu\neDIZV1IqEAl1FZTn4jn8KGEaYzWTkUkobNPKw269rup2PdLdQWjR5+abRNuWrBCV\nxv9ncRaawT3PMixuI1WShRMJC9XQmSvjH1mOiaDbkHWAkc2r+Q1dcg1r9qfnLFnL\n+OCpjIsxMby1JZOxQ4bL2f3QZ19MTeZoHeDzyhsc3WHrPIYxYlRx4dFD8jtzvV0R\nbuX8k3WpnI1e8VG4rAjfMWA4tVwjCqxwGTgqN6K1AR8MKuvh4tMSR8fGNwlxNGd0\nOBP3s0fcN1Umh2olQVZG+JnY3HlhZ5P4pZwVdtKJ63IDdk/Cx82lvWog9UE1C271\nEzTxSFzuHTJ7/0IIwVoafBL/5fHOp2Vph+IYp6R8ZXDDeeys0AM8wOTvvPU81Xcq\nWn0GN70hl1ECAwEAATANBgkqhkiG9w0BAQsFAAOCAQEARbBaDTUC36oIAiCXGs8H\nFoXYDaqEjUE5EKsdSFwyhYg2JkS4CSqOgm+MzTYDg6kOdfnqLxqBUac1P5Th2QMg\n/w2x1dCvIwouVOhd77kEe1b59dJM2ZYqyBSmBEp7jg+ohYHjVovf9tDjWvFGdx+y\nPuwD1X8wp4fr9JGF5s+pm2Hv+aeKkThJ7CJiphwNX6ofY+dJLZDVj6eKguGTymtc\nUHTshbTjNEJ3IPE8A0t9DPv0WmfST3H+Tn1WQXUTS1+Nn8wgzOftktTyI5eaZs5E\nRkJaQbNyhemvMpLEAFnN9ibz36d3NmA0X24floFufzXHBqCtKiZZ2b9/teNwyU2n\nKg==\n-----END CERTIFICATE-----","utf-8"),this.keyOut=H.from("-----BEGIN PRIVATE KEY-----\nMIIJQgIBADANBgkqhkiG9w0BAQEFAASCCSwwggkoAgEAAoICAQCtoAYdInZyewfy\ni0ZaMw9KL7OBdXwCYCQEe23GZbMdFzAe0Qugux80DW9UNcTcC+5h+gC8rNaNCArs\nakjs7WLIW/VmVIj/XW6Xm5QDmgoD7SZEnHIMWwB3QZfBYIqVOOrtOauIqbvLw1v+\nxtygKJ1HzopQAbvgq1uYXlc9INaET+26y5IklYV912kaWCaZPi8dP+xS+tCdo7hm\nI/5KHCrb0omtXjy6YNNHg3OBeygWYj+fgjWcUDm8ZV9TOMtrmHsVedWuYjD/4pFU\n66vTBtG0Sgay3jYkxi54MhlXUioQCXUVlOfiOfwoYRpjNZORSShs08rDbr2u6nY9\n0t1BaNHn5ptE25asEJXG/2dxFprBPc8yLG4jVZKFEwkL1dCZK+MfWY6JoNuQdYCR\nzav5DV1yDWv2p+csWcv44KmMizExvLUlk7FDhsvZ/dBnX0xN5mgd4PPKGxzdYes8\nhjFiVHHh0UPyO3O9XRFu5fyTdamcjV7xUbisCN8xYDi1XCMKrHAZOCo3orUBHwwq\n6+Hi0xJHx8Y3CXE0Z3Q4E/ezR9w3VSaHaiVBVkb4mdjceWFnk/ilnBV20onrcgN2\nT8LHzaW9aiD1QTULbvUTNPFIXO4dMnv/QgjBWhp8Ev/l8c6nZWmH4hinpHxlcMN5\n7KzQAzzA5O+89TzVdypafQY3vSGXUQIDAQABAoICACRNNYoI5xgHhkFdgl+gll1N\n/Ouf60Y54L35KpoVMG5wJzUCQzqfdSY2euTx+w+BBR4CHf5U6uUA3fvROx8igQlg\nRL5ZBW3TFKjpM/jOz7JDdsFYrnXL3xyQH9EkRMVvaZsg+C7yQhwX5Bewb3ejFkNp\nuTyCKEyQt21zqCzVPVTbu1pXbt5sTsVhcQ27iZJ30HT+pQQygcS78vWUJ/pJymI8\nsmGHtw3G6dXlc5SKcfbAIwpQOLJOicvMrDIjyVBdSLrURuuXhyQxNG67eaj9H4Jh\nCeaDFHH658NkwiyiNr40pADXqeYAdqrgpppAnPJ/B889NwNGl61HQ2KowG8JIf3Q\n637ax4RwzFA7f5SBKOGOwRa9pA4lJUroBFwMZSCSFO3B/pkmdy9WEkWDlP/Oopza\nkEz+32EORyc6/Cklaj5TXES1+MqYv8ijNZgzsLg3ggwlUOVCUXAnokaQtCNqDhAS\nYAyHCpn/C0etH6oqHd9a1RiRO9i+iHzdaQWdOG7ExsHQWMHEnhYC+Ca2LVp5xduO\nqbtxOw4rCTH+MzLPnbuuBt8F1Gn99OVOQvtoNpDf2a19PfMU+15fMfPiWXJiWDYM\n1uHfSwEhRYVb3ucf54n5Sgwwu4dcCKu3jdfa9fqQSQ515Ge3AXp9I0FIJADRDqG3\nbE3k7kUR3qMfUNnYiVWTAoIBAQDV209cu0xmI7byjh5rxh4jW+HCzjr680UzBqvN\nuJGhBzyNm1y0Eh85ZLIwQy9E2MFTZMY8UIoYb7x4ZBOq/VKj0wHp7wjUIzZYHseC\nOB2hC0wIieF+4iN+Aay0wpu/FGWPrqqNcxmq3BHP6j2M6YpFHWi5eloI2h748hxB\nc6xZbrVUJvuz37NCuXK6IWQn+383EkcYgnD6RDD9FlAPVki3GvSjILNKC8XEdYB9\nCOCT6SfcMe5QIzA8gleCLrQCHwELp3GL5za7d7f8FyDLJqj4De/XM+lRDsCrYJLI\nDPHYtBD8qRJRMkGlaDdXbKKk1IqeGPEupXAe77Ta37cpXturAoIBAQDP1xoLC41l\nLLPYWp3cXFNfTYmpWIsrj7uHunuX3Qx652XBMPwMvMd1yi6DxsFKGmn0BpSyUG9Q\nXjKPFjY25HvtaCr2rOk4xl/6glJMBLFm0+aHmc9Ki3uSnaQNR219xPKrHpvySRJX\ngg1U254rL3LxXRLjLA7w0SxWQgeZQnUtu6CR+bjzYpvGoSMI4dv6EGDilXa6dDKA\nwD+Y49Dt4CLXDfkgf/eIaHY/SSdVjAZOTYLx4ol5CsvdC4LX516wSP3LhIPAbCxM\nnEYYDLz1yOBNOW5usdSr2LRw9mzm+BNQM939C0OxX0eIQMA1JDXBldSCTkaB64PL\nfP+0JHGy0TzzAoIBAHBgS/XInj7V6Z7Pu4CanN+ruphpUmjoSKaljMYPhMb/THyE\n9VPSagH4vgHKbB5bYEt4Gws6rzZkEL+apxMlBrX7fXf2GcePsVDg66mr3zXu/8dE\n3O+V2VyveJeL49em2i+Ecy7dGtHDzsBYsHtJhVUIPS2p84HPTJM4dkyWgiyEllhg\nG8fLdyFK3dSdE0pHR/QicKWadc+s4ak8fllw18kQKxlFZ7EzOnsf26LYdVqEHGQD\nAN2vf/tr6pwH+qNas2vyUyJXH1WndVDMvnjCGewvNqb5KlNj0y67EqZ41uUuyfZa\nybtNE13dw6b2+Qhwf17QcHw4hxBamcih4lek9v0CggEAOsvzRiSif3jB9/bKqchE\nnbVluE6gMFadCqyqwi96lFpZ4ulkpIXTN3NW7ViQ3dHTH4GtFzTCCM5dJzV1aNoC\nZQsO/HG2GKWmCUxM08yQEzLnCH1usvv6nWOTQV5vjyDkNZyXKVeapL7Z3qOyfy0R\nK07VRQb1wxKppE1RsP2oAKQPrLwkolXHE84KBz096eQwRGlcCStODjZUx3/LX0AF\nGymMzLDm6eQDb6vWQNE4B3bOEHexxFhVi9bx0PpXQy+i/KwkSY9QiOu8uJkB69ZD\n/hS9NPuB2ouXoE1WSZDshcfmiOti3w7BQb5voZj4zCcC00opkB98TVizTdbxg1DG\nGQKCAQEAvuv0DtAbHvjysBKgISkm6mmo8JYWAxFczr0ehLc6dpuHeycvJ3Jv9LUl\nhfOBfH0JNlVJOFjrOxG+LZncXzqxMF2EQAGb8Vy98kgkhzcvvED8GYCL0mB16wmA\nCyA/gou3uxQtW02lIxnrJYR5uRMCzoTClyz+ERnu2I0eYwVcfzmTb4WvReTdcQAL\nXxpuefMPjyJzas4FoyFO6iR6shLFZR1bvTqa5Evnpp1fpSyuk/ap7GVo1yjcchQL\nXN+Ma7hhDfWCruyk7KNr07bxulMkFU5AK5j8EAc1DS1ywTWo4LoC5q4CGDJQKlNx\nSTJ7hbiG4gGyv404fkMXZzRXY3XAaw==\n-----END PRIVATE KEY-----","utf-8"),this.certCashInPFXUrl="https://paymaker-bucket.nyc3.cdn.digitaloceanspaces.com/certs/07fc71c2-fe06-46fc-94c4-d150fa97c113-treeal_cashin.pfx",this.certCashOutPFXUrl="https://paymaker-bucket.nyc3.cdn.digitaloceanspaces.com/certs/c889b37c-9e02-4de9-95cf-61fff03d2f5c-treeal_cashout.pfx",this.agent=new T.Agent,this.api=n.default.create({baseURL:"https://api.pix.treeal.com",headers:{"Content-Type":"application/json"}})}};TreealPaymentProvider.providerName="TREEAL";var Q=a(96301);let VenitPayPaymentProvider=class VenitPayPaymentProvider extends BasePaymentProvider{static async processWebhook(e){if(e.data)return{transactionId:String(e.data.id),type:"TRANSACTION",status:this.parseStatus(e.data.status)}}static parseStatus(e){return"paid"===e?"APPROVED":"PENDING"}withdraw(e){throw Error("Method not implemented.")}getWithdraw(e){throw Error("Method not implemented.")}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}async createCardToken(e){throw Error("Method not implemented.")}async createCardId(e){throw Error("Method not implemented.")}async createTransaction(e){try{if("PIX"===e.paymentMethod){let t=await this.api.post("/transaction",{amount:e.amount,externalRef:e.orderId,postbackUrl:e.webhookUrl,customer:{name:e.customer.name,email:e.customer.email,phone:e.customer.phone,document:{type:"cpf",number:e.customer.document}},traceable:!1,metadata:'{"provider":"Checkout Transparent"}',items:[{title:e.items[0].title,unitPrice:e.amount,quantity:1,tangible:!1,externalRef:e.items[0].id,product_image:""}],paymentMethod:"pix",installments:"1"});return{paymentMethod:"PIX",transactionId:t.data.id,pixQrCode:await s.toDataURL(t.data.pix.payload),pixCode:t.data.pix.payload,status:"PENDING",amount:e.amount}}}catch(e){if(e instanceof Q.d7){var t,a,r;console.log(null===(t=e.response)||void 0===t?void 0:t.data),console.log(null===(a=e.response)||void 0===a?void 0:a.status),console.log(null===(r=e.response)||void 0===r?void 0:r.headers)}throw Error("Erro ao criar transa\xe7\xe3o")}throw Error("Method not implemented.")}async getTransaction(e,t){let{data:a}=await this.api.get("/transaction?id=".concat(e));return{paymentMethod:"PIX",transactionId:e,pixQrCode:"",pixCode:"",status:VenitPayPaymentProvider.parseStatus(a.status),amount:a.amount}}async refoundTransaction(e,t){throw Error("Method not implemented.")}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://srv.venitpay.com.br/v1",headers:{"Content-Type":"application/json","x-public-key":this.publicKey,"x-secret-key":this.secretKey}})}};VenitPayPaymentProvider.providerName="VENIT";var Y=a(58192).Buffer;let FairpayPaymentProvider=class FairpayPaymentProvider extends BasePaymentProvider{static async processWebhook(e){if(e&&"transaction"===e.type)return{transactionId:String(e.data.id),type:"TRANSACTION",status:this.parseStatus(e.data.status)}}static parseStatus(e){switch(e){case"waiting_payment":case"processing":return"PENDING";case"paid":case"authorized":return"APPROVED";case"refunded":case"chargedback":return"CHARGEBACK";default:return"REJECTED"}}withdraw(e){throw Error("Method not implemented.")}getWithdraw(e){throw Error("Method not implemented.")}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}async createCardToken(e){let t=new CardEncryption("fairpay-secret-public-secret-shddkzawdh2-lzswkwzhsd"),a=t.encryptCardData(e);return a}async createCardId(e){return e.cardToken}async createTransaction(e){if("PIX"===e.paymentMethod){let t=await this.api.post("/transactions",{amount:e.amount,paymentMethod:"PIX",customer:{name:e.customer.name,email:e.customer.email,document:{type:"CPF",number:e.customer.document},phone:e.customer.phone},items:e.items.map(e=>({title:e.title,unitPrice:e.unitPrice,quantity:e.quantity,externalRef:e.id})),pix:{expiresInDays:1}});return{paymentMethod:"PIX",transactionId:t.data.id,pixQrCode:await s.toDataURL(t.data.pix.qrcode),pixCode:t.data.pix.qrcode,status:"PENDING",amount:t.data.amount}}if("CREDIT_CARD"===e.paymentMethod){var t,a;let r=null===(a=e.fingerPrints)||void 0===a?void 0:null===(t=a.find(e=>"fairpay"===e.provider))||void 0===t?void 0:t.value,n=new CardEncryption("fairpay-secret-public-secret-shddkzawdh2-lzswkwzhsd"),{cardNumber:o,cvv:i,expMonth:s,expYear:d,holderName:c}=n.decryptCardData(e.cardId),l={amount:e.amount,paymentMethod:"CREDIT_CARD",customer:{name:e.customer.name,email:e.customer.email,document:{type:"CPF",number:e.customer.document},phone:e.customer.phone},items:e.items.map(e=>({title:e.title,unitPrice:e.unitPrice,quantity:e.quantity,externalRef:e.id})),card:{number:o,holderName:c,expirationMonth:s,expirationYear:d,cvv:i}};l.sessionId=r;let u=await this.api.post("/transactions",l);return{paymentMethod:"CREDIT_CARD",transactionId:u.data.id,status:FairpayPaymentProvider.parseStatus(u.data.status),amount:u.data.amount}}throw Error("Method not implemented.")}async getTransaction(e,t){let{data:a}=await this.api.get("/transactions/".concat(e));return"PIX"===a.paymentMethod?{paymentMethod:"PIX",transactionId:a.id,pixQrCode:await s.toDataURL(a.pix.qrcode),pixCode:a.pix.qrcode,status:FairpayPaymentProvider.parseStatus(a.status),amount:a.amount}:{paymentMethod:"CREDIT_CARD",transactionId:a.id,status:FairpayPaymentProvider.parseStatus(a.status),amount:a.amount}}async refoundTransaction(e,t){let{data:a}=await this.api.delete("/transactions/".concat(e));return{refundId:e,status:a.success}}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://api.fairpayments.com.br/functions/v1",headers:{"Content-Type":"application/json",authorization:"Basic "+Y.from("".concat(this.secretKey,":x")).toString("base64")}})}};FairpayPaymentProvider.providerName="FAIRPAY";var J=a(58192).Buffer;let RoyaltyPaymentProvider=class RoyaltyPaymentProvider extends BasePaymentProvider{static async processWebhook(e){if(e&&"transaction"===e.type){let{data:t}=e;return{transactionId:String(t.id),type:"TRANSACTION",status:this.parseStatus(t.status)}}}async withdraw(e){throw Error("Method not implemented.")}getWithdraw(e){throw Error("Method not implemented.")}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}static parseWithdrawStatus(e){switch(e){case"WAITING_CONFIRMATION":case"WAITING_PAYMENT":case"WAITING_WITHDRAW":case"WITHDRAW_REQUEST":return"PENDING";case"WITHDRAW_PAID":case"PAID":case"APPROVED":return"APPROVED";default:return"REJECTED"}}static parseStatus(e){switch(e){case"waiting_payment":case"authorized":case"processing":return"PENDING";case"paid":return"APPROVED";case"refunded":case"chargedback":return"CHARGEBACK";default:return"REJECTED"}}async createCardToken(e){let t=new CardEncryption("royalty-secret-public-secret-shddkzawdh2-lzswkwzhsd"),a=t.encryptCardData(e);return a}async createCardId(e){return e.cardToken}async createTransaction(e){let t=i()().add(1,"days").format("YYYY-MM-DD"),a=[{title:e.items[0].title,unitPrice:e.amount,quantity:1,tangible:!0}];if("PIX"===e.paymentMethod){let r=await this.api.post("/user/transactions",{postbackUrl:e.webhookUrl,paymentMethod:"pix",amount:e.amount,currency:"BRL",customer:{name:e.customer.name,email:e.customer.email,phone:e.customer.phone,document:{number:e.customer.document,type:"cpf"}},pix:{expiresInDays:1},items:a});return{paymentMethod:"PIX",transactionId:String(r.data.data.id),pixQrCode:await s.toDataURL(r.data.data.pix.qrcode),expiresAt:i()(t).toDate(),pixCode:r.data.data.pix.qrcode,status:"PENDING",amount:e.amount}}if("CREDIT_CARD"===e.paymentMethod){let t=new CardEncryption("royalty-secret-public-secret-shddkzawdh2-lzswkwzhsd"),{cardNumber:r,cvv:n,expMonth:o,expYear:i,holderName:s}=t.decryptCardData(e.cardId),d=await this.api.post("/user/transactions",{postbackUrl:e.webhookUrl,paymentMethod:"credit_card",currency:"BRL",amount:e.amount,customer:{name:e.customer.name,email:e.customer.email,phone:e.customer.phone,document:{number:e.customer.document,type:"cpf"}},card:{number:r,holderName:s,expirationMonth:Number(o),expirationYear:Number(i),cvv:n},installments:e.installments,items:a});return{paymentMethod:"CREDIT_CARD",transactionId:String(d.data.data.id),status:RoyaltyPaymentProvider.parseStatus(d.data.data.status),amount:e.amount}}throw Error("Method not implemented.")}async getTransaction(e,t){let a=await this.api.get("/user/transactions/".concat(e)),r=a.data.data;if("pix"===r.paymentMethod)return{paymentMethod:"PIX",transactionId:String(r.id),pixQrCode:await s.toDataURL(r.pix.qrcode),pixCode:r.pix.qrcode,status:RoyaltyPaymentProvider.parseStatus(r.status),amount:r.amount};if("credit_card"===r.paymentMethod)return{paymentMethod:"CREDIT_CARD",transactionId:String(r.id),status:RoyaltyPaymentProvider.parseStatus(r.status),amount:r.amount};throw Error("Method not implemented.")}async refoundTransaction(e,t){let{data:a}=await this.api.post("/user/transactions/".concat(e,"/refund"),{amount:t});return{refundId:e,status:!0}}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://api-account.royaltypay.com.br/api",headers:{"Content-Type":"application/json",Authorization:"Basic ".concat(J.from("x:"+this.secretKey.trim()).toString("base64"))}})}};RoyaltyPaymentProvider.providerName="ROYALTY";var Z=a(58192).Buffer;let NewLevelPaymentProvider=class NewLevelPaymentProvider extends BasePaymentProvider{createCardToken(e){throw Error("Method not implemented.")}createCardId(e){throw Error("Method not implemented.")}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}static async processWebhook(e){if(e)return{transactionId:String(e.data.id),type:"TRANSACTION",status:this.parseStatus(e.data.status)}}async withdraw(e){let t={Authorization:"Basic ".concat(Z.from("x:".concat(this.secretKey)).toString("base64"))};if("PIX"===e.paymentMethod){let a=await this.api.post("/cashout",{amount:e.amount,pixKey:e.pixKey,pixType:e.pixType,beneficiaryName:e.name,beneficiaryDocument:e.document,description:"Saque via API",postbackUrl:"http://localhost:3000/postback"},{headers:t});if("REFUSED"===a.data.status)throw Error("Error on withdraw");return{amount:e.amount,withdrawId:a.data.transactionId,status:NewLevelPaymentProvider.parseWithdrawStatus(a.data.status)}}throw Error("Method not implemented.")}getWithdraw(e){throw Error("Method not implemented.")}static parseWithdrawStatus(e){switch(e.toLocaleLowerCase()){case"processaing":case"waiting_payment":return"PENDING";case"paid":return"APPROVED";default:return"REJECTED"}}static parseStatus(e){switch(e.toLocaleLowerCase()){case"processing":case"waiting_payment":return"PENDING";case"authorized":case"paid":return"APPROVED";case"refunded":case"chargedback":return"CHARGEBACK";default:return"REJECTED"}}async createTransaction(e){let t={Authorization:"Basic ".concat(Z.from("x:".concat(this.secretKey)).toString("base64"))},a=i()().add(1,"days").format("YYYY-MM-DD");if("PIX"===e.paymentMethod){let r=await this.api.post("/transactions",{amount:e.amount,currency:"BRL",paymentMethod:"PIX",customer:{name:e.customer.name,email:e.customer.email,document:{number:e.customer.document,type:"CPF"},phone:e.customer.phone},items:e.items.map(e=>({title:e.title,unitPrice:e.unitPrice,quantity:e.quantity,tangible:e.tangible})),ip:"127.0.0.1",returnUrl:e.checkoutUrl,postbackUrl:e.webhookUrl,pix:{expiresInDays:2}},{headers:t});return console.dir(r.data,{depth:null}),{paymentMethod:"PIX",transactionId:String(r.data.data.id),pixQrCode:await s.toDataURL(r.data.data.qrCode),expiresAt:i()(a).toDate(),pixCode:r.data.data.qrCode,status:NewLevelPaymentProvider.parseStatus(r.data.data.status),amount:e.amount}}throw Error("Method not implemented.")}async getTransaction(e){let t={Authorization:"Basic ".concat(Z.from("x:".concat(this.secretKey)).toString("base64"))},a=await this.api.get("/transactions/".concat(e),{headers:t}),r=a.data;if("PIX"===r.paymentMethod)return{paymentMethod:"PIX",transactionId:String(r.data.id),pixQrCode:await s.toDataURL(r.data.qrCode),pixCode:r.data.qrCode,expiresAt:i()(r.data.createdAt).add(1,"day").toDate(),status:NewLevelPaymentProvider.parseStatus(r.data.status),amount:r.data.amount};throw Error("Method not implemented.")}async refoundTransaction(e){let t={Authorization:"Basic ".concat(Z.from("x:".concat(this.secretKey)).toString("base64"))},a=await this.api.post("/transactions/".concat(e,"/refund"),{},{headers:t});return{refundId:a.data.data.id,status:"REFUNDED"===a.data.data.status}}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://api.newleveltech.com.br/api/user",headers:{"Content-Type":"application/json"}})}};NewLevelPaymentProvider.providerName="NEWLEVEL";var $=a(58192).Buffer;let PixiumPaymentProvider=class PixiumPaymentProvider extends BasePaymentProvider{static async processWebhook(e){if("transaction"===e.type)return{transactionId:String(e.data.id),type:"TRANSACTION",status:this.parseStatus(e.data.status)}}async createReceiver(e){throw Error("Method not implemented.")}async getReceiver(e){throw Error("Method not implemented.")}parseWithdrawStatus(e){throw Error("Method not implemented.")}async withdraw(e){throw Error("Method not implemented.")}getWithdraw(e){throw Error("Method not implemented.")}async createCardToken(e){let t=new CardEncryption("paguesafe-secret-public-secret-shddkzawdh2-lzswkwzhsd"),a=t.encryptCardData(e);return a}async createCardId(e){return e.cardToken}static parseStatus(e){switch(e){case"processing":case"authorized":case"waiting_payment":case"partially_paid":return"PENDING";case"paid":return"APPROVED";case"refunded":return"REFUNDED";case"refused":case"canceled":case"in_protest":default:return"REJECTED";case"chargedback":return"CHARGEBACK"}}async createTransaction(e){let t=e.items.map(t=>({title:t.title,unitPrice:t.unitPrice,quantity:t.quantity,externalRef:t.id,tangible:!!e.address})),a={name:e.customer.name,email:e.customer.email,document:{number:e.customer.document,type:"cpf"},phone:e.customer.phone};if("PIX"===e.paymentMethod){let r=await this.api.post("/transactions",{amount:e.amount,paymentMethod:"pix",customer:a,items:t,postbackUrl:e.webhookUrl,pix:{expiresInDays:1}});return{paymentMethod:"PIX",transactionId:String(r.data.id),pixQrCode:await s.toDataURL(r.data.pix.qrcode),pixCode:r.data.pix.qrcode,expiresAt:i()(r.data.pix.expirationDate).toDate(),status:PixiumPaymentProvider.parseStatus(r.data.status),amount:e.amount}}if("CREDIT_CARD"===e.paymentMethod){let r=new CardEncryption("paguesafe-secret-public-secret-shddkzawdh2-lzswkwzhsd"),{cardNumber:n,cvv:o,expMonth:i,expYear:s,holderName:d}=r.decryptCardData(e.cardId),c=await this.api.post("/transactions",{amount:e.amount,paymentMethod:"credit_card",customer:a,items:t,postbackUrl:e.webhookUrl,card:{number:n,holderName:d,expirationMonth:Number(i),expirationYear:Number("20".concat(s)),cvv:o},installments:e.installments});return{paymentMethod:"CREDIT_CARD",transactionId:String(c.data.id),status:PixiumPaymentProvider.parseStatus(c.data.status),amount:e.amount}}if("BILLET"===e.paymentMethod){let r=await this.api.post("/transactions",{amount:e.amount,paymentMethod:"boleto",customer:a,items:t,postbackUrl:e.webhookUrl,boleto:{expiresInDays:3}});return{paymentMethod:"BILLET",transactionId:String(r.data.id),billetCode:r.data.boleto.barcode,billetUrl:r.data.boleto.url,status:"PENDING",amount:e.amount}}throw Error("Not implemented yet.")}async getTransaction(e,t){let a=await this.api.get("/transactions/".concat(e));return"PIX"===a.data.paymentMethod?{paymentMethod:"PIX",transactionId:String(a.data.id),pixQrCode:a.data.pix.url,pixCode:a.data.pix.qrcode,status:PixiumPaymentProvider.parseStatus(a.data.status),expiresAt:i()(a.data.pix.expirationDate).toDate(),amount:a.data.amount}:"CREDIT_CARD"===a.data.paymentMethod?{paymentMethod:"CREDIT_CARD",transactionId:String(a.data.id),status:PixiumPaymentProvider.parseStatus(a.data.status),amount:a.data.amount}:{paymentMethod:"BILLET",transactionId:String(a.data.id),status:PixiumPaymentProvider.parseStatus(a.data.status),amount:a.data.amount,billetCode:"",billetUrl:""}}async refoundTransaction(e,t,a){try{let t=await this.api.post("/transactions/".concat(e,"/refund"));return{refundId:t.data.id,status:!0}}catch(e){throw Error("Internal server error")}}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://api.pixium.com.br/functions/v1",headers:{"Content-Type":"application/json",authorization:"Basic "+$.from("".concat(this.secretKey,":x")).toString("base64")}})}};PixiumPaymentProvider.providerName="PIXIUM";var ee=a(58192).Buffer;let HorizonPaymentProvider=class HorizonPaymentProvider extends BasePaymentProvider{static async processWebhook(e){if("transaction"===e.type)return{transactionId:String(e.data.id),type:"TRANSACTION",status:this.parseStatus(e.data.status)}}async createReceiver(e){throw Error("Method not implemented.")}async getReceiver(e){throw Error("Method not implemented.")}parseWithdrawStatus(e){throw Error("Method not implemented.")}async withdraw(e){throw Error("Method not implemented.")}getWithdraw(e){throw Error("Method not implemented.")}async createCardToken(e){let t=new CardEncryption("paguesafe-secret-public-secret-shddkzawdh2-lzswkwzhsd"),a=t.encryptCardData(e);return a}async createCardId(e){return e.cardToken}static parseStatus(e){switch(e){case"processing":case"authorized":case"waiting_payment":case"partially_paid":return"PENDING";case"paid":return"APPROVED";case"refunded":return"REFUNDED";case"refused":case"canceled":case"in_protest":default:return"REJECTED";case"chargedback":return"CHARGEBACK"}}async createTransaction(e){let t=e.items.map(t=>({title:t.title,unitPrice:t.unitPrice,quantity:t.quantity,externalRef:t.id,tangible:!!e.address})),a={name:e.customer.name,email:e.customer.email,document:{number:e.customer.document,type:"cpf"},phone:e.customer.phone};if("PIX"===e.paymentMethod){let r=await this.api.post("/transactions",{amount:e.amount,paymentMethod:"pix",customer:a,items:t,postbackUrl:e.webhookUrl,pix:{expiresInDays:1}});return{paymentMethod:"PIX",transactionId:String(r.data.id),pixQrCode:await s.toDataURL(r.data.pix.qrcode),pixCode:r.data.pix.qrcode,expiresAt:i()(r.data.pix.expirationDate).toDate(),status:HorizonPaymentProvider.parseStatus(r.data.status),amount:e.amount}}if("CREDIT_CARD"===e.paymentMethod){let r=new CardEncryption("paguesafe-secret-public-secret-shddkzawdh2-lzswkwzhsd"),{cardNumber:n,cvv:o,expMonth:i,expYear:s,holderName:d}=r.decryptCardData(e.cardId),c=await this.api.post("/transactions",{amount:e.amount,paymentMethod:"credit_card",customer:a,items:t,postbackUrl:e.webhookUrl,card:{number:n,holderName:d,expirationMonth:Number(i),expirationYear:Number("20".concat(s)),cvv:o},installments:e.installments});return{paymentMethod:"CREDIT_CARD",transactionId:String(c.data.id),status:HorizonPaymentProvider.parseStatus(c.data.status),amount:e.amount}}if("BILLET"===e.paymentMethod){let r=await this.api.post("/transactions",{amount:e.amount,paymentMethod:"boleto",customer:a,items:t,postbackUrl:e.webhookUrl,boleto:{expiresInDays:3}});return{paymentMethod:"BILLET",transactionId:String(r.data.id),billetCode:r.data.boleto.barcode,billetUrl:r.data.boleto.url,status:"PENDING",amount:e.amount}}throw Error("Not implemented yet.")}async getTransaction(e,t){let a=await this.api.get("/transactions/".concat(e));return"pix"===a.data.paymentMethod?{paymentMethod:"PIX",transactionId:String(a.data.id),pixQrCode:a.data.pix.url,pixCode:a.data.pix.qrcode,status:HorizonPaymentProvider.parseStatus(a.data.status),expiresAt:i()(a.data.pix.expirationDate).toDate(),amount:a.data.amount}:"credit_card"===a.data.paymentMethod?{paymentMethod:"CREDIT_CARD",transactionId:String(a.data.id),status:HorizonPaymentProvider.parseStatus(a.data.status),amount:a.data.amount}:{paymentMethod:"BILLET",transactionId:String(a.data.id),status:HorizonPaymentProvider.parseStatus(a.data.status),amount:a.data.amount,billetCode:"",billetUrl:""}}async refoundTransaction(e,t,a){try{let t=await this.api.post("/transactions/".concat(e,"/refund"));return{refundId:t.data.id,status:!0}}catch(e){throw Error("Internal server error")}}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://api.pay.horizonbank.com.br/v1",headers:{"Content-Type":"application/json",authorization:"Basic "+ee.from("".concat(this.secretKey,":x")).toString("base64")}})}};HorizonPaymentProvider.providerName="HORIZONBANK";var et=a(58192).Buffer;let BmbPaymentProvider=class BmbPaymentProvider extends BasePaymentProvider{static async processWebhook(e){if(e&&"QR_CODE_STATIC"===e.initiationType)return{transactionId:String(e.transactionId),type:"TRANSACTION",status:"APPROVED"}}static parseStatus(e){return"Paid"===e?"APPROVED":"PENDING"}withdraw(e){throw Error("Method not implemented.")}getWithdraw(e){throw Error("Method not implemented.")}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}async createCardToken(e){throw Error("Method not implemented.")}async createCardId(e){throw Error("Method not implemented.")}async createTransaction(e){try{if("PIX"===e.paymentMethod){let t=await this.api.post("/GerarQRCode",{valor:e.amount/100,descricao:e.description,pagador:{documento:e.customer.document,nome:e.customer.name}});return{paymentMethod:"PIX",transactionId:t.data.txId,pixQrCode:await s.toDataURL(t.data.EMV),pixCode:t.data.EMV,status:"PENDING",amount:100*t.data.Valor}}}catch(e){throw Error("Method not implemented.")}throw Error("Method not implemented.")}async getTransaction(e,t){let{data:a}=await this.api.post("/consultaQRCode",{txId:e});return{paymentMethod:"PIX",transactionId:e,pixQrCode:await s.toDataURL(a.EMV),pixCode:a.EMV,status:BmbPaymentProvider.parseStatus(a.Status),amount:a.Valor}}async refoundTransaction(e,t){throw Error("Method not implemented.")}constructor(...e){var t,a;super(...e),this.api=n.default.create({baseURL:"https://conta.bmb.app.br/api",headers:{"Content-Type":"application/json","client-id":null===(t=this.baseUrl)||void 0===t?void 0:t.trim().split(":")[0],"client-secret":null===(a=this.baseUrl)||void 0===a?void 0:a.trim().split(":")[1],Authorization:"Basic ".concat(et.from(this.publicKey+":"+this.secretKey).toString("base64"))}})}};BmbPaymentProvider.providerName="BMB";var ea=a(58192).Buffer;let TransacPagamentosPaymentProvider=class TransacPagamentosPaymentProvider extends BasePaymentProvider{static async processWebhook(e){if(e&&"transaction"===e.type){let{data:t}=e;return{transactionId:String(t.id),type:"TRANSACTION",status:this.parseStatus(t.status)}}}async withdraw(e){throw Error("Method not implemented.")}getWithdraw(e){throw Error("Method not implemented.")}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}static parseWithdrawStatus(e){switch(e){case"WAITING_CONFIRMATION":case"WAITING_PAYMENT":case"WAITING_WITHDRAW":case"WITHDRAW_REQUEST":return"PENDING";case"WITHDRAW_PAID":case"PAID":case"APPROVED":return"APPROVED";default:return"REJECTED"}}static parseStatus(e){switch(e){case"waiting_payment":case"authorized":case"processing":case"pending":return"PENDING";case"paid":case"approved":return"APPROVED";case"refunded":case"chargeback":return"CHARGEBACK";default:return"REJECTED"}}async createCardToken(e){let t=new CardEncryption("royalty-secret-public-secret-shddkzawdh2-lzswkwzhsd"),a=t.encryptCardData(e);return a}async createCardId(e){return e.cardToken}async createTransaction(e){let t=i()().add(1,"days").format("YYYY-MM-DD"),a=[{title:e.items[0].title,unitPrice:e.amount,quantity:1,tangible:!0}];if("PIX"===e.paymentMethod){let r=await this.api.post("/transactions",{postbackUrl:e.webhookUrl,paymentMethod:"pix",amount:e.amount,customer:{name:e.customer.name,email:e.customer.email,phone:e.customer.phone,document:{number:e.customer.document,type:"cpf"}},pix:{expiresInDays:1},items:a});return{paymentMethod:"PIX",transactionId:String(r.data.id),pixQrCode:await s.toDataURL(r.data.pix.qrcode),expiresAt:i()(t).toDate(),pixCode:r.data.pix.qrcode,status:"PENDING",amount:e.amount}}if("CREDIT_CARD"===e.paymentMethod){let t=new CardEncryption("royalty-secret-public-secret-shddkzawdh2-lzswkwzhsd"),{cardNumber:r,cvv:n,expMonth:o,expYear:i,holderName:s}=t.decryptCardData(e.cardId),d=await this.api.post("/transactions",{postbackUrl:e.webhookUrl,paymentMethod:"credit_card",amount:e.amount,customer:{name:e.customer.name,email:e.customer.email,phone:e.customer.phone,document:{number:e.customer.document,type:"cpf"}},card:{number:r,holderName:s,expirationMonth:Number(o),expirationYear:Number(i),cvv:n},installments:e.installments,items:a});return{paymentMethod:"CREDIT_CARD",transactionId:String(d.data.id),status:TransacPagamentosPaymentProvider.parseStatus(d.data.status),amount:e.amount}}throw Error("Method not implemented.")}async getTransaction(e,t){let{data:a}=await this.api.get("/transactions/".concat(e));return"pix"===a.paymentMethod?{paymentMethod:"PIX",transactionId:String(a.id),pixQrCode:await s.toDataURL(a.pix.qrcode),pixCode:a.pix.qrcode,status:TransacPagamentosPaymentProvider.parseStatus(a.status),amount:a.amount}:{paymentMethod:"CREDIT_CARD",transactionId:String(a.id),status:TransacPagamentosPaymentProvider.parseStatus(a.status),amount:a.amount}}async refoundTransaction(e,t){throw Error("Method not implemented.")}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://api.transacpagamentos.com/v1",headers:{"Content-Type":"application/json",Authorization:"Basic ".concat(ea.from(this.secretKey.trim()+":x").toString("base64"))}})}};TransacPagamentosPaymentProvider.providerName="TRANSAC";let VenitipPaymentProvider=class VenitipPaymentProvider extends BasePaymentProvider{static async processWebhook(e){if(e)return{transactionId:String(e.orderId),type:"TRANSACTION",status:VenitipPaymentProvider.parseStatus(e.status)}}static parseStatus(e){switch(e.toLowerCase()){case"paid":case"received":case"confirmed":return"APPROVED";case"refused":case"refunded":case"infraction":return"REJECTED";default:return"PENDING"}}withdraw(e){throw Error("Method not implemented.")}getWithdraw(e){throw Error("Method not implemented.")}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}async createCardToken(e){throw Error("Method not implemented.")}async createCardId(e){throw Error("Method not implemented.")}async createTransaction(e){try{if("PIX"===e.paymentMethod){let t=await this.api.post("/transactions",{postbackUrl:e.webhookUrl,paymentMethod:"pix",customer:{name:e.customer.name,email:e.customer.email,phone:e.customer.phone,document:{number:e.customer.document,type:"cpf"}},shipping:{fee:0,address:{street:"Rua",streetNumber:"20",zipCode:"00000000",neighborhood:"Bairro",city:"Cidade",state:"Estado",country:"Brasil",complement:"Complemento"}},items:[{title:e.items[0].title,description:e.description,unitPrice:e.items[0].unitPrice,quantity:e.items[0].quantity,tangible:e.items[0].tangible}],isInfoProducts:!1});return{paymentMethod:"PIX",transactionId:t.data.id,status:VenitipPaymentProvider.parseStatus(t.data.status),amount:t.data.amount,pixQrCode:t.data.pix.encodedImage||"",pixCode:t.data.pix.payload||""}}throw Error("Invalid payment method")}catch(e){if(e instanceof Q.d7){var t,a,r;console.log(null===(t=e.response)||void 0===t?void 0:t.data),console.log(null===(a=e.response)||void 0===a?void 0:a.status),console.log(null===(r=e.response)||void 0===r?void 0:r.headers)}throw Error("Erro ao criar transa\xe7\xe3o")}throw Error("Method not implemented.")}async getTransaction(e,t){let{data:a}=await this.api.get("/transactions/".concat(e));return{paymentMethod:"PIX",transactionId:e,status:VenitipPaymentProvider.parseStatus(a.status),amount:a.amount,pixQrCode:await s.toDataURL(a.pixCode),pixCode:a.pixCode}}async refoundTransaction(e,t){throw Error("Method not implemented.")}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://api.venitip.com/v1",headers:{"Content-Type":"application/json","x-authorization-key":this.secretKey}})}};VenitipPaymentProvider.providerName="VENITIP";var er=a(58192).Buffer;let UnicoPayPaymentProvider=class UnicoPayPaymentProvider extends BasePaymentProvider{static async processWebhook(e){if(e&&"transaction"===e.type){let{data:t}=e;return{transactionId:String(t.id),type:"TRANSACTION",status:this.parseStatus(t.status)}}}async withdraw(e){throw Error("Method not implemented.")}getWithdraw(e){throw Error("Method not implemented.")}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}static parseWithdrawStatus(e){switch(e){case"WAITING_CONFIRMATION":case"WAITING_PAYMENT":case"WAITING_WITHDRAW":case"WITHDRAW_REQUEST":return"PENDING";case"WITHDRAW_PAID":case"PAID":case"APPROVED":return"APPROVED";default:return"REJECTED"}}static parseStatus(e){switch(e){case"waiting_payment":case"authorized":case"processing":return"PENDING";case"paid":return"APPROVED";case"refunded":case"chargedback":return"CHARGEBACK";default:return"REJECTED"}}async createCardToken(e){let t=new CardEncryption("unicopay-secret-public-secret-shddkzawdh2-lzswkwzhsd"),a=t.encryptCardData(e);return a}async createCardId(e){return e.cardToken}async createTransaction(e){let t=i()().add(1,"days").format("YYYY-MM-DD"),a=[{title:e.items[0].title,unitPrice:e.amount,quantity:1,tangible:!0}];if("PIX"===e.paymentMethod){let r=await this.api.post("/transactions",{postbackUrl:e.webhookUrl,paymentMethod:"pix",amount:e.amount,currency:"BRL",customer:{name:e.customer.name,email:e.customer.email,phone:e.customer.phone,document:{number:e.customer.document,type:"cpf"}},pix:{expiresInDays:1},items:a});return{paymentMethod:"PIX",transactionId:String(r.data.id),pixQrCode:await s.toDataURL(r.data.pix.qrcode),expiresAt:i()(t).toDate(),pixCode:r.data.data.pix.qrcode,status:"PENDING",amount:e.amount}}if("CREDIT_CARD"===e.paymentMethod){let t=new CardEncryption("unicopay-secret-public-secret-shddkzawdh2-lzswkwzhsd"),{cardNumber:r,cvv:n,expMonth:o,expYear:i,holderName:s}=t.decryptCardData(e.cardId),d=await this.api.post("/transactions",{postbackUrl:e.webhookUrl,paymentMethod:"credit_card",currency:"BRL",amount:e.amount,customer:{name:e.customer.name,email:e.customer.email,phone:e.customer.phone,document:{number:e.customer.document,type:"cpf"}},card:{number:r,holderName:s,expirationMonth:Number(o),expirationYear:Number("20".concat(i)),cvv:n},installments:e.installments,items:a});return{paymentMethod:"CREDIT_CARD",transactionId:String(d.data.id),status:UnicoPayPaymentProvider.parseStatus(d.data.status),amount:e.amount}}throw Error("Method not implemented.")}async getTransaction(e,t){let a=await this.api.get("/transactions/".concat(e)),r=a.data.data;if("pix"===r.paymentMethod)return{paymentMethod:"PIX",transactionId:String(r.id),pixQrCode:await s.toDataURL(r.pix.qrcode),pixCode:r.pix.qrcode,status:UnicoPayPaymentProvider.parseStatus(r.status),amount:r.amount};if("credit_card"===r.paymentMethod)return{paymentMethod:"CREDIT_CARD",transactionId:String(r.id),status:UnicoPayPaymentProvider.parseStatus(r.status),amount:r.amount};throw Error("Method not implemented.")}async refoundTransaction(e,t){let{data:a}=await this.api.post("/transactions/".concat(e,"/refund"),{amount:t});return{refundId:e,status:!0}}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://api.unicopay.com.br/v1",headers:{"Content-Type":"application/json",Authorization:"Basic ".concat(er.from(this.secretKey.trim()+":x").toString("base64"))}})}};UnicoPayPaymentProvider.providerName="UNICOPAY";var en=a(58192).Buffer;let GatywayAcquiringProvider=class GatywayAcquiringProvider extends BasePaymentProvider{static async processWebhook(e){if("transaction"===e.type)return{type:"TRANSACTION",transactionId:String(e.data.id),status:this.parseStatus(e.data.status)}}async withdraw(e){let t={authorization:"Basic "+en.from(this.secretKey+":x").toString("base64")};if("PIX"===e.paymentMethod){let a={amount:e.amount,pixKey:e.pixKey},r=await this.api.post("/transfers",a,{headers:t});return{amount:r.data.amount,withdrawId:r.data.id,status:r.data.status}}if("BANK_ACCOUNT"===e.paymentMethod){let a={amount:e.amount,bankAccount:{bankCode:e.bankCode,agencyNumber:e.branchNumber,accountNumber:e.accountNumber,accountDigit:e.accountNumber,type:"conta_corrente",legalName:e.accountHolder,documentNumber:e.accountDocument,documentType:11===e.accountDocument.length?"cpf":"cnpj"}},r=await this.api.post("/transfers",a,{headers:t});return{amount:r.data.amount,withdrawId:r.data.id,status:r.data.status}}{let a={amount:e.amount,recipientId:e.receiverId},r=await this.api.post("/transfers",a,{headers:t});return{amount:r.data.amount,withdrawId:r.data.id,status:r.data.status}}}static parseStatus(e){switch(e){case"processing":case"authorized":case"waiting_payment":case"partially_paid":return"PENDING";case"paid":return"APPROVED";case"refunded":case"in_protest":case"chargedback":return"CHARGEBACK";default:return"REJECTED"}}async getWithdraw(e){throw Error("Method not implemented.")}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}async createCardToken(e){let t=await this.api.post("/card-token?publicKey="+this.publicKey,{number:parseInt(e.cardNumber.replace(/\D/g,"")),holderName:e.holderName,expirationMonth:parseInt(e.expMonth),expirationYear:parseInt("20"+e.expYear),cvv:e.cvv});return t.data}async createCardId(e){return e.cardToken}async createTransaction(e){let t=i()().add(1,"days").format("YYYY-MM-DD");if("PIX"===e.paymentMethod){let a=await this.api.post("/transactions",{paymentMethod:"pix",amount:e.amount,customer:{name:e.customer.name,email:e.customer.email,document:{number:e.customer.document,type:"cpf"}},phone:e.customer.phone,items:[{title:e.description,unitPrice:e.amount,quantity:1,tangible:!1}],pix:{expiresInDays:1},postbackUrl:e.webhookUrl});return{paymentMethod:"PIX",transactionId:String(a.data.id),expiresAt:i()(t).toDate(),pixCode:a.data.pix.qrcode,status:GatywayAcquiringProvider.parseStatus(a.data.status),pixQrCode:await s.toDataURL(a.data.pix.qrcode),amount:e.amount}}throw Error("Unsupported payment method")}async getTransaction(e){let t=await this.api.get("/transactions/".concat(e)),a=t.data;if("PIX"===a.operation.method)return{paymentMethod:"PIX",transactionId:String(a.id),pixQrCode:await s.toDataURL(a.pix.qrcode),pixCode:a.pix.qrcode,expiresAt:i()(a.createdAt).add(1,"day").toDate(),status:GatywayAcquiringProvider.parseStatus(a.status),amount:a.amount};throw Error("Unsupported payment method")}async refoundTransaction(e){let t=await this.api.post("/transactions/".concat(e,"/refund"),{});return{refundId:String(t.data.id),status:t.data.amount}}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://api.gatyway.com/v1",headers:{"Content-Type":"application/json",authorization:"Basic "+en.from("".concat(this.secretKey,":x")).toString("base64")}})}};GatywayAcquiringProvider.providerName="GATYWAY";let RapdynAcquiringProvider=class RapdynAcquiringProvider extends BasePaymentProvider{static async processWebhook(e){if(e&&"transaction"===e.notification_type)return{transactionId:String(e.id),status:RapdynAcquiringProvider.parseStatus(e.status),type:"TRANSACTION"}}async withdraw(e){if("PIX"===e.paymentMethod){var t;let a,r=e.pixKey;(t=a||(a={})).CPF="cpf",t.CNPJ="cnpj",t.PHONE="phone",t.EMAIL="email",t.RANDOM="randomkey","CPF"===e.pixType?r=(e=>{let t=e.replace(/[^\d]/g,"");if(11!==t.length)throw Error("CPF inv\xe1lido, deve conter 11 d\xedgitos.");return t.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4")})(r):"CNPJ"===e.pixType?r=(e=>{let t=e.replace(/[^\d]/g,"");if(14!==t.length)throw Error("CNPJ inv\xe1lido, deve conter 14 d\xedgitos.");return t.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/,"$1.$2.$3/$4-$5")})(r):"PHONE"===e.pixType&&(r=(e=>{let t=e.replace(/[^\d]/g,"");if(11===t.length)return t.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3");if(10===t.length)return t.replace(/(\d{2})(\d{4})(\d{4})/,"($1) $2-$3");throw Error("Telefone inv\xe1lido, n\xfamero de d\xedgitos incorreto.")})(r));let n=await this.api.post("/transfers/out",{pix_key_type:a[e.pixType],pix_key:r,value:e.amount});if("ERROR"===n.data.status)throw Error("Houve um erro ao tentar realizar o saque - ".concat(JSON.stringify(n.data)));return{amount:e.amount,withdrawId:n.data.transfer_id,status:RapdynAcquiringProvider.parseWithdrawStatus(n.data.status)}}throw Error("M\xe9todo de pagamento n\xe3o suportado")}static parseWithdrawStatus(e){switch(e){case"PENDING":case"PROCESSING":return"PENDING";case"COMPLETED":return"APPROVED";default:return"REJECTED"}}static parseStatus(e){switch(e){case"pending":case"processing":return"PENDING";case"paid":return"APPROVED";case"med":case"blocked":case"returned":return"REFUNDED";default:return"REJECTED"}}async getWithdraw(e){throw Error("Method not implemented.")}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}async createCardToken(e){let t=await this.api.post("/card-token?publicKey="+this.publicKey,{number:parseInt(e.cardNumber.replace(/\D/g,"")),holderName:e.holderName,expirationMonth:parseInt(e.expMonth),expirationYear:parseInt("20"+e.expYear),cvv:e.cvv});return t.data}async createCardId(e){return e.cardToken}async createTransaction(e){let t=i()().add(1,"days").format("YYYY-MM-DD");if("PIX"===e.paymentMethod){let a=await this.api.post("/payments",{amount:e.amount,method:"pix",customer:{name:e.customer.name,email:e.customer.email,phone:e.customer.phone,document:{type:"CPF",value:e.customer.document}},products:[{name:e.description,price:e.amount,quantity:"1",type:"digital"}]});return{paymentMethod:"PIX",transactionId:String(a.data.id),expiresAt:i()(t).toDate(),pixCode:a.data.pix.copypaste,status:RapdynAcquiringProvider.parseStatus(a.data.status),pixQrCode:a.data.pix.qrcode,amount:e.amount}}throw Error("Unsupported payment method")}async getTransaction(e){let t=await this.api.get("/transactions/".concat(e)),a=t.data.data;if("pix"===a.method)return{paymentMethod:"PIX",transactionId:String(e),pixCode:a.pix.copypaste,expiresAt:i()(a.createdAt).add(1,"day").toDate(),status:RapdynAcquiringProvider.parseStatus(a.status),amount:a.total,pixQrCode:t.data.pix.qrcode};throw Error("Unsupported payment method")}async refoundTransaction(e){return await this.api.put("/payments/refund/".concat(e)),{refundId:e,status:!0}}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://app.rapdyn.io/api",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.secretKey)}})}};RapdynAcquiringProvider.providerName="RAPDYN";let mapAddress=e=>{if(e)return{addr_street:e.address,addr_number:e.number,addr_neighborhood:e.district,addr_city:e.city,addr_state:e.state,addr_zip:e.zipCode,addr_country:"BR"}},mapCustomer=e=>({payer_name:e.name,payer_email:e.email,payer_document:e.document,payer_phone:e.phone});let BravivePaymentProvider=class BravivePaymentProvider extends BasePaymentProvider{static async processWebhook(e){if(console.log("Received Bravive Webhook Data:",e),e&&e.id&&e.status&&"PAYMENT"===e.type)return{transactionId:String(e.id),type:"TRANSACTION",status:this.parseStatus(e.status)};console.error("Could not parse Bravive webhook data:",e)}static parseStatus(e){switch(e){case"PENDING":return"PENDING";case"APPROVED":return"APPROVED";case"REJECTED":case"CANCELED":return"REJECTED";case"REFUNDED":return"REFUNDED";case"CHARGEBACK":case"IN_DISPUTE":return"CHARGEBACK";default:return console.warn("Unknown Bravive transaction status received: ".concat(e)),"PENDING"}}static parseWithdrawStatus(e){let t=null==e?void 0:e.toLowerCase();switch(t){case"pending":return"PENDING";case"approved":return"APPROVED";case"rejected":return"REJECTED";case"canceled":return"CANCELED";case"refunded":case"chargeback":case"in_dispute":return console.warn("Unexpected status '".concat(e,"' received for Bravive withdraw, mapping to PENDING/REJECTED.")),"in_dispute"===t?"PENDING":"REJECTED";default:return console.warn("Unknown Bravive withdraw status received: ".concat(e)),"PENDING"}}async createTransaction(e){var t,a,r,n;let o={amount:e.amount,currency:"BRL",description:e.description||(null===(t=e.items[0])||void 0===t?void 0:t.title)||"Transaction",...mapCustomer(e.customer),...mapAddress(e.address),webhook_url:e.webhookUrl};switch(e.paymentMethod){case"PIX":o.method="PIX";break;case"BILLET":o.method="BILLET";break;case"CREDIT_CARD":throw o.method="CREDIT_CARD",Error("Bravive Credit Card payment requires handling raw card details - Implementation needed.");default:throw console.error("Unsupported payment method type encountered in Bravive provider",e),Error("Unsupported payment method type for Bravive.")}try{let t=await this.api.post("/payments",o),a=t.data,r={transactionId:String(a.id||a.payment_id),status:BravivePaymentProvider.parseStatus(a.status),amount:a.amount};if("PIX"===e.paymentMethod)return{...r,paymentMethod:"PIX",pixQrCode:await s.toDataURL(a.pix_qr_code||""),pixCode:a.pix_qr_code||"",expiresAt:a.pix_expires_at?i()(a.pix_expires_at).toDate():void 0};if("BILLET"===e.paymentMethod)return{...r,paymentMethod:"BILLET",billetCode:a.billet_barcode||"",billetUrl:a.billet_url||"",expiresAt:a.billet_expires_at?i()(a.billet_expires_at).toDate():void 0};return{...r,paymentMethod:"CREDIT_CARD"}}catch(e){throw console.error("Bravive createTransaction error:",(null===(a=e.response)||void 0===a?void 0:a.data)||e.message),Error("Bravive API Error: ".concat((null===(n=e.response)||void 0===n?void 0:null===(r=n.data)||void 0===r?void 0:r.message)||e.message))}}async getTransaction(e,t){var a,r,n,o;try{let t=await this.api.get("/payments/".concat(e)),r=t.data,n=BravivePaymentProvider.parseStatus(r.status),o=null===(a=r.method)||void 0===a?void 0:a.toUpperCase(),s={transactionId:String(r.id||r.payment_id),status:n,amount:r.amount};switch(o){case"PIX":return{...s,paymentMethod:"PIX",pixQrCode:r.pix_qr_code||"",pixCode:r.pix_code||"",expiresAt:r.pix_expires_at?i()(r.pix_expires_at).toDate():void 0};case"BILLET":case"BANK_SLIP":return{...s,paymentMethod:"BILLET",billetCode:r.billet_barcode||"",billetUrl:r.billet_url||"",expiresAt:r.billet_expires_at?i()(r.billet_expires_at).toDate():void 0};case"CREDIT_CARD":return{...s,paymentMethod:"CREDIT_CARD"};default:return console.warn("Unknown payment method received from Bravive for transaction ".concat(e)),{...s,paymentMethod:"CREDIT_CARD",status:"PENDING"}}}catch(e){throw console.error("Bravive getTransaction error:",(null===(r=e.response)||void 0===r?void 0:r.data)||e.message),Error("Bravive API Error: ".concat((null===(o=e.response)||void 0===o?void 0:null===(n=o.data)||void 0===n?void 0:n.message)||e.message))}}async createCardToken(e){throw console.warn("Bravive createCardToken called - Functionality depends on Bravive API capabilities."),Error("Bravive card tokenization flow not implemented/specified.")}async createCardId(e){throw console.warn("Bravive createCardId called - Functionality depends on Bravive API capabilities."),Error("Bravive save card (createCardId) flow not implemented/specified.")}async refoundTransaction(e,t,a){throw console.warn("refoundTransaction called for Bravive (ID: ".concat(e,") - Not Implemented")),Error("Method not implemented.")}async withdraw(e){let t={amount:e.amount,currency:"BRL",description:e.description||"Withdrawal Request"};if("PIX"===e.paymentMethod)throw t.method="PIX",console.error("Bravive withdraw payload is missing PIX destination details! Requires Bravive docs."),Error("Bravive withdraw implementation incomplete: Missing PIX destination details.");if("BANK_ACCOUNT"===e.paymentMethod)throw t.method="BANK_TRANSFER",console.error("Bravive withdraw payload is missing Bank Account destination details! Requires Bravive docs."),Error("Bravive withdraw implementation incomplete: Missing Bank Account destination details.");if("RECEIVER"===e.paymentMethod)throw console.error("Bravive does not support 'RECEIVER' withdrawal method directly via this implementation."),Error("Unsupported withdrawal method for Bravive: RECEIVER");throw console.error("Unknown withdrawal method encountered."),Error("Unknown withdrawal method type.")}async getWithdraw(e){try{let t=await this.api.get("/withdraws/".concat(e)),a=t.data;return{withdrawId:String(a.id||a.withdraw_id),status:BravivePaymentProvider.parseWithdrawStatus(a.status),amount:a.amount,approvedAt:a.approved_at?i()(a.approved_at).toDate():void 0}}catch(e){var t,a,r;throw console.error("Bravive getWithdraw error:",(null===(t=e.response)||void 0===t?void 0:t.data)||e.message),Error("Bravive API Error (Get Withdraw): ".concat((null===(r=e.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.message)||e.message))}}async createReceiver(e){throw console.warn("createReceiver called for Bravive - Not Implemented"),Error("Method not implemented.")}async getReceiver(e){throw console.warn("getReceiver called for Bravive (ID: ".concat(e,") - Not Implemented")),Error("Method not implemented.")}constructor(e,t){if(super(e,t,"https://app.bravive.com/api/v1"),!t)throw Error("Bravive secretKey is required");this.api=n.default.create({baseURL:this.baseUrl,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.secretKey)}})}};BravivePaymentProvider.providerName="BRAVIVE";var eo=a(58192).Buffer;let HunterPaymentProvider=class HunterPaymentProvider extends BasePaymentProvider{static async processWebhook(e){if(e)return{transactionId:String(e.data.id),type:"TRANSACTION",status:this.parseStatus(e.data.status)}}async withdraw(e){throw Error("Method not implemented.")}getWithdraw(e){throw Error("Method not implemented.")}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}static parseWithdrawStatus(e){switch(e){case"WITHDRAW_INFORMATION":case"WITHDRAW_REQUEST":return"PENDING";case"WITHDRAW_APPROVED":return"APPROVED";default:return"REJECTED"}}static parseStatus(e){switch(e){case"waiting_payment":return"PENDING";case"paid":case"infraction":case"in_protest":return"APPROVED";case"refunded":case"chargedback":return"CHARGEBACK";case"refused":case"failed":return"REJECTED";default:return}}async createCardToken(e){let t=new CardEncryption("axisbank-secret-public-secret-shddkzawdh2-lzswkwzhsd"),a=t.encryptCardData(e);return a}async createCardId(e){return e.cardToken}async createTransaction(e){let t=i()().add(1,"days").format("YYYY-MM-DD");if("PIX"===e.paymentMethod){let a=await this.api.post("/transactions/v2/purchase",{paymentMethod:"PIX",pix:{expiresInDays:1},customer:{name:e.customer.name,phone:e.customer.phone,email:e.customer.email,document:{type:"CPF",number:e.customer.document}},items:[{title:e.items[0].title,quantity:1,unitPrice:e.amount}],amount:e.amount,postbackUrl:e.webhookUrl,description:e.items[0].title});return{paymentMethod:"PIX",transactionId:String(a.data.id),pixQrCode:await s.toDataURL(a.data.pix.qrcode),pixCode:a.data.pix.qrcode,expiresAt:i()(t).toDate(),status:HunterPaymentProvider.parseStatus(a.data.status),amount:e.amount}}if("CREDIT_CARD"===e.paymentMethod){let t=new CardEncryption("axisbank-secret-public-secret-shddkzawdh2-lzswkwzhsd"),{cardNumber:a,cvv:r,expMonth:n,expYear:o,holderName:i}=t.decryptCardData(e.cardId),s=await this.api.post("/transactions/v2/purchase",{paymentMethod:"CARD",customer:{name:e.customer.name,phone:e.customer.phone,email:e.customer.email,document:{type:"CPF",number:e.customer.document}},items:[{title:e.items[0].title,quantity:1,unitPrice:e.amount}],card:{number:a,holderName:i,expirationMonth:n,expirationYear:o,cvv:r},amount:e.amount,postbackUrl:e.webhookUrl,description:e.items[0].title});return{paymentMethod:"CREDIT_CARD",transactionId:String(s.data.id),status:HunterPaymentProvider.parseStatus(s.data.status),amount:e.amount}}throw Error("Method not implemented.")}async getTransaction(e){let t=await this.api.get("/transactions/".concat(e)),a=t.data;return"CARD"===a.paymentMethod?{paymentMethod:"CREDIT_CARD",transactionId:String(a.id),status:HunterPaymentProvider.parseStatus(a.status),amount:a.amount}:{paymentMethod:"PIX",transactionId:String(a.id),pixQrCode:await s.toDataURL(a.pix.qrcode),pixCode:a.pix.qrcode,expiresAt:i()(a.createdAt).add(1,"day").toDate(),status:HunterPaymentProvider.parseStatus(a.status),amount:a.amount}}async refoundTransaction(e,t){return await this.api.delete("/transactions/".concat(e)),{refundId:e,status:!0}}constructor(...e){super(...e),this.api=n.default.create({baseURL:"https://api.huntersub.com.br/functions/v1",headers:{"Content-Type":"application/json",Authorization:"Basic "+eo.from(this.secretKey+":"+this.publicKey).toString("base64")}})}};HunterPaymentProvider.providerName="HUNTERPAY";var ei=a(58192).Buffer;let PodpayPaymentProvider=class PodpayPaymentProvider extends BasePaymentProvider{async getAuthorization(e){let t=await fetch(e),a=await t.arrayBuffer(),r=ei.from(a),n=new T.Agent({cert:this.cert,key:this.key,pfx:r,passphrase:"infopago@9TrQ4zNp",rejectUnauthorized:!1});this.agent=n;let o=await this.api.post("/oauth/token",{grant_type:"client_credentials",client_id:this.publicKey,client_secret:this.secretKey},{httpsAgent:n});return console.log(o.data),"Bearer ".concat(o.data.access_token)}async getCashOutAuthorization(e){let t=await fetch(e),a=await t.arrayBuffer(),r=ei.from(a),o=new T.Agent({cert:this.certOut,key:this.keyOut,pfx:r,passphrase:"infopago7Xk$2vLm",rejectUnauthorized:!1});this.agent=o;let i=await n.default.post("https://cashout.infopago.com.br/api/v2/oauth/token",{grant_type:"client_credentials",client_id:this.publicKey,client_secret:this.secretKey},{httpsAgent:o});return"Bearer ".concat(i.data.access_token)}static async processWebhook(e){if("RECEIVE"===e.type||"REFUND"===e.type){if("CANCELED"===e.data.status)return;let t="PENDING";return"REFUND"===e.type&&(t="CHARGEBACK"),"RECEIVE"===e.type&&"LIQUIDATED"===e.data.status&&(t="APPROVED"),{transactionId:String(e.data.txId),type:"TRANSACTION",status:t}}}async withdraw(e){if("PIX"===e.paymentMethod){let t=await h.platform.findUnique({where:{id:e.receiverId}});if(!t)throw Error("Unauthorized.");"PHONE"===e.pixType&&(e.pixKey="+55".concat(e.pixKey));let a=await this.getCashOutAuthorization(this.certCashOutPFXUrl),r=await n.default.post("https://cashout.infopago.com.br/api/v2/pix/payments/dict",{pixKey:e.pixKey,payment:{currency:"BRL",amount:e.amount/100}},{headers:{Authorization:a,"x-idempotency-key":(0,x.Z)()},httpsAgent:this.agent});return{amount:100*r.data.payment.amount,withdrawId:r.data.endToEndId,status:"APPROVED"}}throw Error("Method not implemented.")}getWithdraw(e){throw Error("Method not implemented.")}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}static parseStatus(e){switch(e){case"ATIVA":case"REMOVIDA_PELO_PSP":return"PENDING";case"LIQUIDATED":case"CONCLUIDA":return"APPROVED";case"REFUND":return"CHARGEBACK";default:return"REJECTED"}}async createCardToken(e){throw Error("Method not implemented.")}async createCardId(e){throw Error("Method not implemented.")}async createTransaction(e){let t=await h.user.findFirstOrThrow({where:{id:e.userId},include:{platform:!0}}),a=await this.getAuthorization(this.certCashInPFXUrl);if("PIX"===e.paymentMethod){let r={devedor:{nome:e.customer.name,cpf:e.customer.document},valor:{original:e.amount/100,modalidadeAlteracao:0},chave:t.platform.defaultReceiverId},n=await this.api.post("/cob",r,{headers:{Authorization:a},httpsAgent:this.agent});return{paymentMethod:"PIX",transactionId:String(n.data.txid),expiresAt:i()().add("1","days").toDate(),pixQrCode:await s.toDataURL(n.data.pixCopiaECola),pixCode:n.data.pixCopiaECola,status:PodpayPaymentProvider.parseStatus(n.data.status),amount:100*Number(n.data.valor.original)}}throw Error("Method not implemented.")}async getTransaction(e,t){let a=await h.payment.findFirstOrThrow({where:{transactionId:e},include:{createdByUser:{include:{platform:!0}}}});if(!a.createdByUser.platform.certCashInUrl)throw Error("Method not implemented.");let r=await this.getAuthorization(a.createdByUser.platform.certCashInUrl),n=await this.api.get("/cob/".concat(e),{headers:{Authorization:r},httpsAgent:this.agent}),o=n.data;return{paymentMethod:"PIX",transactionId:String(o.txid),pixQrCode:"",pixCode:"",status:PodpayPaymentProvider.parseStatus(o.status),amount:100*Number(o.valor.original)}}async refoundTransaction(e,t){let a={authorization:"Basic "+ei.from(this.secretKey+":x").toString("base64")},r=await this.api.post("/sells/".concat(e,"/refund"),{},{headers:a});return{refundId:r.data.id,status:200===r.status}}constructor(e,t,a){super(e,t,a),this.publicKey=e,this.secretKey=t,this.baseUrl=a,this.cert=ei.from("-----BEGIN CERTIFICATE-----\nMIIFFTCCAv0CFHZG29YVgyqxViRs3QlH7QQEo1tPMA0GCSqGSIb3DQEBCwUAMEgx\nCzAJBgNVBAYTAkJSMQswCQYDVQQIDAJTQzEVMBMGA1UECgwMT05aIFNvZnR3YXJl\nMRUwEwYDVQQDDAxvbnouc29mdHdhcmUwHhcNMjUwMzIxMTQ1NzE0WhcNMzUwMzE5\nMTQ1NzE0WjBGMQswCQYDVQQGEwJCUjELMAkGA1UECAwCU0MxFTATBgNVBAoMDE9O\nWiBTb2Z0d2FyZTETMBEGA1UEAwwKSU5GT1BBR09fMTCCAiIwDQYJKoZIhvcNAQEB\nBQADggIPADCCAgoCggIBALCERfutEDCIcvOCjmpis5lA7tM/ae0hfpLFVSFZojo5\n2qAORrI8gFrh8oNcrRY5S9y9kLnAOrt7Sh1idur+Ub/aD5liJRsSbGX9rgMJTDOB\nBP1nOaaNQ2bl6gBCZRSBnp7/o3WP6O/M0KP99vZte0hGXitePalDhY6yacqlQTSL\nzU9Tb48AMGRoVETczQ9NCpSQ/CpoJS+tPzHniEoKCpCqJCSQDX+ednALMrzqbSMR\nCz5Xu5yc9dSV9IofEU0psXIuckgvY+6zygwuV84yinAlsgD3/4xUXkKjr3eDJGIi\n4nOMjKYjsGPYebt7OTDZXuGsX4pFTtKExFbFCtHYc1j3iTjy07xOeok8wzKDJriR\nEebbUo8j7lgapMbQJDTHzsrA99DuA2MIT4p94PYyY0OAJ3y/HPZNiPttO0+gtOFD\njOYdx0r5mbLPOpMl4SE+uSOviI6BkUcRFQtGOzn7edPfB7IJ3CMhDW4bGcoLniS/\n9F4xGyeEVLWC1xjZZZmT7z8V/SkgH6VGeaBIzEYbXDDl8T2r5LM6ghtQFZnne0h4\ntU2TSdq+iF4t3kvvi23mcTHI98/nsIvKw9fhQMocpjQKDBIDTOO3AoAyPN6+/vwk\n0Yhyp1pVCSvH5KXtbMiQOWwz3ypmDXaTaQYUReHwfTU+0pCf8VRCcKbncZVNQ8/D\nAgMBAAEwDQYJKoZIhvcNAQELBQADggIBAFgwqr45P/QzwwNPr4TMJ84OTS7p9jzn\njFzdO8T7sni075F3nXOisk9chtyFbXX6ACzIxorESSV/XaFiryFAY7SzKnUvKCJt\n6Auy1y1XqY7pVnohmp5x7PDeZ63jiuDoipqEXhlVymT9C73OhsUP2h5tT6Aj0ICJ\n9D9TiHM+GRe3UMZrpfu25EkfGFI2KkoQOh+5OGvQuvrVwh4sJgsCrfFIOhvBDpZ0\nRSP2gGKcmLg108oH6p0RPWLFdbwTkKeE9ST+DGrPNIwV/XPqeAg4NAfkIL2tfB1s\nJlpjGXkRu077IvGbIT7I6EiW3WHnGlTdtlLwPxGWWAQjM6plsLiCZ4zv6NoMJa4j\nVoTw5vDOXhW/YExaXe8BkKh+DD8UjC8/GkYMGeXe2WRoeTQU7FzG2mpjuI9FIN+e\npZgnky69vitDfxrGmyhd/brQTaEQ9fFh1ksSD0e3+f7zfYNX2BgHbCxacEZfWBxu\nRTy7ji8bi3QQoIL/BwqQ/fi6+4TS6CV7nvi4mYD4Z5BUTVub8+hMj6zqgLq0zQpf\nkMPil4WMcVw31Q9KhoDvQ2u/TsnBIy500xndvpjTQXbCkuvDTxVg0aeasQ2uwA9Z\n2URJ7XGUg4yK/11BEx8Teb8rf3LJPq1blJwr07pnSV4wAaXwgqbn5PLwe8BjXMxk\n9ZCL7x6kURiz\n-----END CERTIFICATE-----","utf-8"),this.key=ei.from("-----BEGIN PRIVATE KEY-----\nMIIJQgIBADANBgkqhkiG9w0BAQEFAASCCSwwggkoAgEAAoICAQCwhEX7rRAwiHLz\ngo5qYrOZQO7TP2ntIX6SxVUhWaI6OdqgDkayPIBa4fKDXK0WOUvcvZC5wDq7e0od\nYnbq/lG/2g+ZYiUbEmxl/a4DCUwzgQT9ZzmmjUNm5eoAQmUUgZ6e/6N1j+jvzNCj\n/fb2bXtIRl4rXj2pQ4WOsmnKpUE0i81PU2+PADBkaFRE3M0PTQqUkPwqaCUvrT8x\n54hKCgqQqiQkkA1/nnZwCzK86m0jEQs+V7ucnPXUlfSKHxFNKbFyLnJIL2Pus8oM\nLlfOMopwJbIA9/+MVF5Co693gyRiIuJzjIymI7Bj2Hm7ezkw2V7hrF+KRU7ShMRW\nxQrR2HNY94k48tO8TnqJPMMygya4kRHm21KPI+5YGqTG0CQ0x87KwPfQ7gNjCE+K\nfeD2MmNDgCd8vxz2TYj7bTtPoLThQ4zmHcdK+ZmyzzqTJeEhPrkjr4iOgZFHERUL\nRjs5+3nT3weyCdwjIQ1uGxnKC54kv/ReMRsnhFS1gtcY2WWZk+8/Ff0pIB+lRnmg\nSMxGG1ww5fE9q+SzOoIbUBWZ53tIeLVNk0navoheLd5L74tt5nExyPfP57CLysPX\n4UDKHKY0CgwSA0zjtwKAMjzevv78JNGIcqdaVQkrx+Sl7WzIkDlsM98qZg12k2kG\nFEXh8H01PtKQn/FUQnCm53GVTUPPwwIDAQABAoICAAENZoqNbku062cX9pf3fT7n\np3u0W4IGQ89X6PlNyH9iXle7Xg6H+PNa5llfkVt1j7PLDhkdZmn0Au3RoggmDNuT\nPM6SAV0yqxAzdIsgYFl+1CHJeeanlKjch3flNpTFt1epU1u4yFiWyUqA/4haACu6\nR6txqay7X+Sbd2f+4IGkHpXxxPgQ2qa3vIMpuvjzqnzpHYMs7KGLa5V1S8UkFnhS\nm1n74U1LC46TKV+Pz/DBb6+Uv79yR4oOfIYFta37X8tOVHBgTaqlE3gCQ90ssoiX\nMzoLriuhSkck24jNTBCpJEueDwks0QJAhWyy24LbeOZWrAck3KK5hVYjGAXZGzgS\nt8KTQ32ijuL00IrXN7RzxCJAIKsgrPP2d/5ji4kTlB6hn0iRpN5XfCc1rXPnCTIM\nuMkwdgWKatAGF490G8nROcAHBgF6U84XFlUv25O8asZicv/oUtOB8VuBfPOg+1pG\nASLuj0QR8kih6sJNX7J6hQYlevXVlIG9C6lLgpaUrJeMf+zVmLfYtwQpNN4Pul2K\np+kW4WAPno0UMkj4HcQUzQRaxm8qi8UpbFE7AcL8AbGYMCzONY6FJs5+0ECYMeQV\nAoraRSMQMbjUieff+EQdzpFKIx0tXZQBj5LPAu94istB3LfeoN8NY12zJAvjJJTi\nIEB4hR1X5lAnPj40KtPRAoIBAQD1qSIiNrHxPEKjyE7TBCMCwHMaxSzyKYqVY0WS\n5s8yySVe5yNxJaHekgnlIrStNcRLRVjyzsRNVh9r3N7+Yywnne6y1eE9hjdp4PvG\nLXvU00SC6bBmX1og2MsZy9VKk3T+5i4QOm5zcXU/LtUrKseN/toBAYbim7oY0Jz4\nuzc86Z919pgsLnQoT2mk+NqzbiAA6TwoWbJEFcW4kgMKRMOZYbdwvoiUkQ70Inzv\nfCGXb7oeKAFIxJyDPi6zxJK0f1TYn9ePmVVmlkr/jSZy+0QYkkeLKwVaz4dQtwnz\n6z7+Pven40qVd433mEK3QQ/jYDMB3JB/3RMr6QcEAGiZd2LrAoIBAQC38iY+XV1D\nWS09fEkHS4RmJ1ISUceGzLcPiKREfypx4vgzycotZIzLoJej0nfdAVrBlJo6teeU\nsy3IK4mnxtn6nS4iwSkeXAfGaxoyjaEcn20dTIueaVrKakoaWeHJP5e9CufcHHkC\nLiw1VN0D1RZKVyye8quaep86ro5kWIRVIV7i68O3rNpwn8O9FGP+6QWmBaVEJrOO\nx5s1pjT5j3+KRaGwxQSUzpjbWakRAbtI2gqy6zyJt7H5bn3m40j94H1B3KPgYSfK\nbrgRuXbbgb5da17E9o6CS3bKYnBw7AVHfDmFuodqQv/uwMsUvNKVFwBG40N7DPMD\n2O32RvLGZ6CJAoIBAQDOYYMtnymq8udBVXzzRlxraWbKLLBv2Xp1umqu2X1kuxvM\nOP7LhcQRijsJ5zhG9A6u9dmeUxsTpbDMG0i0CnkD52irkYei+mj/aGXcvkV0LPE3\n0j/CIYVEZx1p1JaiCnOV2acFNzGnhr/rjtrDYzM3Fc3sXm4FXrLfOhNF23Kyl8rB\nfaOmKninjN/CGtcROwlj+o3xkDl1fZ0YTIKFU/PHnhJQg6GWvq8DZx3yzCQkZ1bD\nEvTRP2wFzm3J1PEy9m4/dznPiA/5GXZ0bw7INlOlGO9F+aSMACE8LCoOY6oOSrQg\ntZDpNQFt6trRvbUtXpo7jCNRaFc84o5kTDuUAnp1AoIBABEoXBrbGJTsn4SpsCIn\nEB17M3OT/zl6pOSlCTV+axYeZqpl+x7Kzzs7KonUWuvZcX62/r/VMdmz8ORH81ob\n+T8gJCqHu+8iBHOkj9gBT/LciBAAkNFg4GAbE/hrQ91CukOe3cuxODRU3DjJRqhR\n2vdqNDZLSmhpYarWl1+Sxh0utKwT87iRPfrdXCOp4D3pvGYlBqpZtcvuoHKboztY\nADyEjDVx2yCKOMXVEikM8Uw1UmQn/wiVgttSTBoaPze3Fdfr3blTNqPyOeclVonZ\nC0mpdziGCvrqURVFo1lVGpT1aGQp5vGpeDfr8cVoa3gOoi76idPTfGNye5fKPGD3\nT4kCggEAGsVB4qPEg+3UnIKmzh21OPU/Zn6UEKMasVPGaabPF/qOf5F7U0akJ+Us\nlJcaMkX2Xz3UQDjHL481vTiBRx/W38vUttVnH8B0PZZ1CSrClX82ogt1hpbX0l8C\nKClMiVVV4qkT8Z+waodp3xv0PdGt6oBr6nB5zFoUb7fdzGF4GC8jnQtLrs/zq/7A\nnyiGjOR8Vm726TKLZ2USO6kwZaeN7L8S0Nh7p3SPARjQl/HuJvcVX0F8NZGVA2bh\nBGsLA6xpkC1rFJb1WINFiYOG8XwiR3j39eXPdiglwJsjoMh+/4nsAzhk0LqhV10K\nYRi5vJamja6U5/oUCZRRjR1A8QUm0Q==\n-----END PRIVATE KEY-----","utf-8"),this.certOut=ei.from("-----BEGIN CERTIFICATE-----\nMIID7TCCAtUCFDDWD4Bpt0BlCBWNryDpN6STOKJIMA0GCSqGSIb3DQEBCwUAMCAx\nHjAcBgNVBAMMFU9OWi1TRUNVUkUtQVJFQS1JTkZPUDAeFw0yNTAzMjExNDU1NTNa\nFw0zNTAzMTkxNDU1NTNaMEYxCzAJBgNVBAYTAkJSMQswCQYDVQQIDAJTQzEVMBMG\nA1UECgwMT05aIFNvZnR3YXJlMRMwEQYDVQQDDApJTkZPUEFHT18xMIICIjANBgkq\nhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAwoMROhqeMhSVGpwtmzjFPZMJ7SLtPhov\n59kXnOGxe093GHRTNsNskOiXfMoit9TVNRpC+LKG5MMx7fV/w3PFQlHRdjzvATeq\nxzZzJSW5dR2AAxqhSYw2mWVHXvNednrGdDTrlrl92mChyKA6swhPauz/YxZUnNeE\ntvhYNz+PFCqDQscJUQQGYig7k2jtiQntyrpnQVwyYQlkWqtn/PB4KrcTS0z5+KWe\nnLL1fb61FVgDsVuUBkM1S6daF+sQp2FwkC13VVwx+pBiGZ+JEMyhrDwew77BFERP\nh6406atq3sp/jRtiBqBQLM+QvDc7mA/nE4KtURW237LDegLAymAVLK4IM38HYSgR\nWkS7dEYAK9/s1vNlMBdJP9UM0AogyFo0yJHYyhjC6qAZOqemGiUpcv335gLLho/8\naW6Clv11zwA42WrAUqM89dW21RvKKpbWrfLCCUUvI+L8RfPk/5f8gL2Ifh7bD+d3\ntCdZkNWl49s1lo4hBmZbiG7xm14Qs9mm9wtO5E96yC6ZV0hSXB17gnqWMdszp9v1\nbzu1+GyKESxuvTy/47dukqp98VseMFna8wv4NOL7k+LnKmgtwbjMeNn4eRjHUUNi\nbLzoJTh70o2HRJO4gSg8+piA+KFrxEPEQlKUa1fTh4um7VCLtKYGCqy9M4bn9B5g\nspaOR3m/PSECAwEAATANBgkqhkiG9w0BAQsFAAOCAQEAX4fh01LAjCJ8I8weaoJu\n616Tnmasfu1QUnFUEaeKf8nDPrizIoGc8dYa1fiv8xcmu0R+WGWilFMI1EJ2Vaia\nh7spcMFZEm05MfhTqUpRLFU+KODFJsn/yH+vykZwUahrAjlZyfZM8B5LmqUnWbpw\nAi04suDKRw6mDJCQKPxCI4+D0eRcncUvlEFaxtf3XyhpGONxTvjjIlWuIeWeuo53\nn/OVmm2OF9W9Tt9zHq0QmTW899U2GiSL6hO8aSJU9N5TM8vCcBfy0YhqUXH5+QpX\nAMvXqygokzmpdGOCa1GDBu3CmG0nTi3GpjhWDTu+ZiZIyRSvkQz4CZ3es9ZNY/8O\nMg==\n-----END CERTIFICATE-----","utf-8"),this.keyOut=ei.from("-----BEGIN PRIVATE KEY-----\nMIIJQQIBADANBgkqhkiG9w0BAQEFAASCCSswggknAgEAAoICAQDCgxE6Gp4yFJUa\nnC2bOMU9kwntIu0+Gi/n2Rec4bF7T3cYdFM2w2yQ6Jd8yiK31NU1GkL4sobkwzHt\n9X/Dc8VCUdF2PO8BN6rHNnMlJbl1HYADGqFJjDaZZUde8152esZ0NOuWuX3aYKHI\noDqzCE9q7P9jFlSc14S2+Fg3P48UKoNCxwlRBAZiKDuTaO2JCe3KumdBXDJhCWRa\nq2f88HgqtxNLTPn4pZ6csvV9vrUVWAOxW5QGQzVLp1oX6xCnYXCQLXdVXDH6kGIZ\nn4kQzKGsPB7DvsEURE+HrjTpq2reyn+NG2IGoFAsz5C8NzuYD+cTgq1RFbbfssN6\nAsDKYBUsrggzfwdhKBFaRLt0RgAr3+zW82UwF0k/1QzQCiDIWjTIkdjKGMLqoBk6\np6YaJSly/ffmAsuGj/xpboKW/XXPADjZasBSozz11bbVG8oqltat8sIJRS8j4vxF\n8+T/l/yAvYh+HtsP53e0J1mQ1aXj2zWWjiEGZluIbvGbXhCz2ab3C07kT3rILplX\nSFJcHXuCepYx2zOn2/VvO7X4bIoRLG69PL/jt26Sqn3xWx4wWdrzC/g04vuT4ucq\naC3BuMx42fh5GMdRQ2JsvOglOHvSjYdEk7iBKDz6mID4oWvEQ8RCUpRrV9OHi6bt\nUIu0pgYKrL0zhuf0HmCylo5Heb89IQIDAQABAoICAELNmOEHu0Uf5IWbFd61hKg9\nE6+pyykE/Wb3HDD5ImdjR1fSu7GXNHYgK8bj9UCFjCQMvOuFBOcUUtWS9yo9XIYG\na5XcH4mfgLuia7FaX3Nlik2Gm9YSnb3ZFsX5d3vhdr76Xd8KHbsebPHmdcJ/HCdw\n9dUmGjEzo5Tjfgibf5xBbYtFqGF2rGqRvsRFyS7DhjOWCVhdPcAt5ZVuQOyR+fNR\npQK7kS5gUzUmEUH6eV63N6118kSkWG1/MGX+iV2zDWG2+8EJRPD1HXwHWp+2Z+Ar\nVbWMketP+rBymCGYib+ydFQWD3iPHnoFX4QExCbZb1c4DiZG+uOhFZmV0HiwvxRb\n47zJFKO7kqF+U38nwkJMeQdqpVq/c9Vupbw9JRtiD+o4uYg7bHosWsQKEmGrXdAj\n7FoK7Dl10pY1xfreYMP4sRkOK9kooZR7/3HQ6BHsP5ucK0Cw+clU22FIkcpJV9tN\nnN+eIRKuaqdObDs+wPYSiuO3vGku5PR5PswOLgARGj1eaUUoaVXaQJ+fQ263MoRb\npCpPUtbE10czi6b7ASMO3VZ45vWNO6kMuqtBVLbpVSGgvi/M8beCI3/Qbi0iMv1V\n9nwerwtn6rUtSkhYUoGZrEI7eyIdBG3jcVyXFxssvpXDFSzYxd9O36fPO5dIaiGk\npUW/D7xg5BBgK7lcINZxAoIBAQDmvASUzLatt/obGATl73ZMiKNdXrqihjDMrCMK\nZqXewULsqpResNBzByx+TYjlzO/Dbi2Q9j4bcIzUhWYOm3G1AgPTnH01LtQbl1YX\np+yBdV8/Jlo3mAv2wqzgR67J44EGXde00EzBsJZcySOlqZkgWK5h1UhBxIb7vX6P\ni892XP2FUIhbR8I0kMFxz+HD1+SJ/EuL5o8HXVpG6dLNvu+8fqfHrXiZmxB0X9kd\nShwkaLkjpVEmRjZM9ddBwajmw89xyD+Aqr1qSvvb2a3nuMfXFyqKyzELhzj/mOav\n0mttdH/iapsn5ZcIWO3xL4yMk5/FoMBjGugcVH3PzMNFpqiLAoIBAQDXz6fsFAgO\n/+ujpQKyQi8yuOoR5i/imlSoQZ2LG7cfpoTGB9jFEon+Pt0Ed7BYnfCfzdl7c8h0\naMjl6vxh3ku3V+9Np8bSEUIZ+06bBN24vCmUjEv2Z7T8mFbtdG2/7KJMNLxmTbi8\nKzsrM17SlQJOwYnsVBp1xiVGZjuvyWHIN0st7k3sHkwic0uLxbJqXgPHSStgfDS4\n9JKUxUtCh0YyeDwl5PyPxvi4pU5KHMbvYi2l5z4N8fWtSvkdzRMJzylT8fbW/sEs\nO3XiMzUXOU6LJqyIEd9rYyZeuh6tXC0SnioOf299Ay9JlVk81g3wk49brnYX3UuD\nBVJvuRUbRrqDAoIBACHwdhwNILHc5gUmO1I3LweC8cTCMmHFq1fv2helkbB6bQWy\n8bAcAg1peLn7Xa+vvXTZuAoirnAK1ixMkv6DDu65JSbzVdeE095bHGbOZJOGWERJ\nt+uFifz6FcPHx4Ya2Ne+5gPKv/+dogBz9bJgiA2h/cSWQtKpvdE5xmwG/LVEaGY7\nulLy8zYYNNww39yW3R8O5W3mtBM5QBY+PqvU8h6f4r4UXjD6BimYD6+nPwx7+v+r\nSYx/t20KnGcnvVh0ZQcvlWevtbz02qc0FciH/Z094xwXV1eCxHeUXhpusS6gfE8p\nrzjnJJgtvJJFlD75V/8R7jqlso64PulaDT8pjJECggEAN5oLxJpAnUS4fFgGQtEk\ngef8fpIU4kgq6ZLGOVHxs1jeunrJEbU+EmA153HC4IIIvdN2ZgUlr0BUClCpp7lz\nPpCMWjCQ3AyQQEtsLCprya3I9LnU1G5Rxgal1tX5dMpN4l5v79e0cd6dhvrcQlsb\n1hitJVNh4dgkQGgUlqzG4aPFXdcZAm2n5fRYkXFlD1ybkpu6bkhx+PkiTuwqAMED\nh/tMW+MMYyq7aC9G5XdWldRwuF7EsSkWyAgZ+OCeOBfEqRkdJLVMJc5IB/hzhEFC\niD11lDUun+dSunMvdjDaeAKCCWwx2D6az1WIQVFRFBuggtmHGYztaJtVau1/j6CA\nawKCAQAEM0k77eA/vhmKY93b0mXB+RmGsK4VB7YdBc3qSiZSbtfAObuVDlfCoaMJ\nWgtv7nInRhm7u4EdMpodYVCkaDlF1PRa2PrEN15cWSACoCkFDTx8Dx/K/7Ln6dz1\nAo3gOaKr/Ses9zKkDl9QX6d39C3lgiROxqtIkzMqy+GOJEIxbwB/6ZQH8DVSTPSZ\n0Bvk8+voVDXtwr+50yrdKmoqlz++mlc8/Fja39geH+vkLJWSJCKzu11h/KOd8Kvl\n1+fJCuXst5FQp7w4T6tEzWia1n2uRQnRMtgB/768ElyvDZLRUhmTR1Z5VKJvWtAI\nLIJsvJRSi0QpR0C5ESpB+umQtsOn\n-----END PRIVATE KEY-----","utf-8"),this.certCashInPFXUrl="https://paymaker-bucket.nyc3.cdn.digitaloceanspaces.com/certs/podpay_cashin.pfx",this.certCashOutPFXUrl="https://paymaker-bucket.nyc3.cdn.digitaloceanspaces.com/certs/podpay_cashout.pfx",this.agent=new T.Agent,this.api=n.default.create({baseURL:"https://api.pix.infopago.com.br",headers:{"Content-Type":"application/json"}})}};PodpayPaymentProvider.providerName="PODPAY";var es=a(58192).Buffer;let OnzPaymentProvider=class OnzPaymentProvider extends BasePaymentProvider{async getAuthorization(e){var t;let a=await fetch(e),r=await a.arrayBuffer(),n=es.from(r),o=new T.Agent({cert:this.cert,key:this.key,pfx:n,passphrase:"infopago@9TrQ4zNp",rejectUnauthorized:!1});this.agent=o;let i=await this.api.post("/oauth/token",{grant_type:"client_credentials",client_id:null===(t=this.publicKey)||void 0===t?void 0:t.split("|")[1],client_secret:this.secretKey.split("|")[1]},{httpsAgent:o});return"Bearer ".concat(i.data.access_token)}async getCashOutAuthorization(e){var t;let a=await fetch(e),r=await a.arrayBuffer(),o=es.from(r),i=new T.Agent({cert:this.cert,key:this.key,pfx:o,passphrase:"infopago7Xk$2vLm",rejectUnauthorized:!1});this.agent=i;let s=await n.default.post("https://cashout.infopago.com.br/api/v2/oauth/token",{grant_type:"client_credentials",client_id:null===(t=this.publicKey)||void 0===t?void 0:t.split("|")[1],client_secret:this.secretKey.split("|")[1]},{httpsAgent:i});return"Bearer ".concat(s.data.access_token)}static async processWebhook(e){if("RECEIVE"===e.type||"REFUND"===e.type){if("CANCELED"===e.data.status)return;let t="PENDING";return"REFUND"===e.type&&(t="CHARGEBACK"),"RECEIVE"===e.type&&"LIQUIDATED"===e.data.status&&(t="APPROVED"),{transactionId:String(e.data.txId),type:"TRANSACTION",status:t}}}async withdraw(e){if("PIX"===e.paymentMethod){let t=await h.platform.findUnique({where:{id:e.receiverId}});if(!t||!t.certCashOutUrl)throw Error("Unauthorized.");"PHONE"===e.pixType&&(e.pixKey="+55".concat(e.pixKey));let a=t.certCashOutUrl,r=await this.getCashOutAuthorization(a),o=await n.default.post("https://accounts.infopago.com.br/api/v2/pix/payments/dict",{pixKey:e.pixKey,payment:{currency:"BRL",amount:e.amount/100}},{headers:{Authorization:r,"x-idempotency-key":(0,x.Z)()},httpsAgent:this.agent});return{amount:100*o.data.payment.amount,withdrawId:o.data.endToEndId,status:"APPROVED"}}throw Error("Method not implemented.")}getWithdraw(e){throw Error("Method not implemented.")}createReceiver(e){throw Error("Method not implemented.")}getReceiver(e){throw Error("Method not implemented.")}static parseStatus(e){switch(e){case"ATIVA":case"REMOVIDA_PELO_PSP":return"PENDING";case"LIQUIDATED":case"CONCLUIDA":return"APPROVED";case"REFUND":return"CHARGEBACK";default:return"REJECTED"}}async createCardToken(e){throw Error("Method not implemented.")}async createCardId(e){throw Error("Method not implemented.")}async createTransaction(e){let t=await h.user.findFirstOrThrow({where:{id:e.userId},include:{platform:!0}});if(!t.platform.certCashInUrl)throw Error("Unauthorized.");let a=await this.getAuthorization(t.platform.certCashInUrl);if("PIX"===e.paymentMethod){let r={devedor:{nome:e.customer.name,cpf:e.customer.document},valor:{original:e.amount/100,modalidadeAlteracao:0},chave:t.platform.defaultReceiverId},n=await this.api.post("/cob",r,{headers:{Authorization:a},httpsAgent:this.agent});return{paymentMethod:"PIX",transactionId:String(n.data.txid),expiresAt:i()().add("1","days").toDate(),pixQrCode:await s.toDataURL(n.data.pixCopiaECola),pixCode:n.data.pixCopiaECola,status:OnzPaymentProvider.parseStatus(n.data.status),amount:100*Number(n.data.valor.original)}}throw Error("Method not implemented.")}async getTransaction(e){let t=await h.payment.findFirstOrThrow({where:{transactionId:e},include:{offer:{include:{product:{include:{platform:!0}}}}}});if(!t.offer.product.platform.certCashInUrl)throw Error("Method not implemented.");let a=await this.getAuthorization(t.offer.product.platform.certCashInUrl),r=await this.api.get("/cob/".concat(e),{headers:{Authorization:a},httpsAgent:this.agent}),n=r.data;return{paymentMethod:"PIX",transactionId:String(n.txid),pixQrCode:"",pixCode:"",status:OnzPaymentProvider.parseStatus(n.status),amount:Math.round(100*Number(n.valor.original))}}async refoundTransaction(e,t){let a={authorization:"Basic "+es.from(this.secretKey+":x").toString("base64")},r=await this.api.post("/sells/".concat(e,"/refund"),{},{headers:a});return{refundId:r.data.id,status:200===r.status}}constructor(e,t,a){var r;super(e,t,a),this.publicKey=e,this.secretKey=t,this.baseUrl=a;let o=String(null===(r=this.publicKey)||void 0===r?void 0:r.split("|")[0].replace(/\\n/g,"\n")),i=this.secretKey.split("|")[0].replace(/\\n/g,"\n"),s="-----BEGIN CERTIFICATE-----\n".concat(o,"\n-----END CERTIFICATE-----"),d="-----BEGIN RSA PRIVATE KEY-----\n".concat(i,"\n-----END RSA PRIVATE KEY-----\n");this.cert=es.from(s,"utf-8"),this.key=es.from(d,"utf-8"),this.agent=new T.Agent,this.api=n.default.create({baseURL:"https://api.pix.infopago.com.br",headers:{"Content-Type":"application/json"}})}};OnzPaymentProvider.providerName="ONZ";let ed=[AbmexPaymentProvider,AsaasPaymentProvider,PagarmePaymentProvider,PagoPaymentProvider,TransfeeraPaymentProvider,UltragatePaymentProvider,IuguPaymentProvider,SaqpayPaymentProvider,AxisBankingPaymentProvider,PrimePagProvider,SuitpayPaymentProvider,MercadoPagoPaymentProvider,SpacefyPaymentProvider,PagstarPaymentProvider,WalletzPaymentProvider,SimPayPaymentProvider,FirebankPaymentProvider,PayupPaymentProvider,AktapayPaymentProvider,EzzebankPaymentProvider,ViatechPaymentProvider,AbmexPayPaymentProvider,OwenPayPaymentProvider,ZenetPaymentProvider,ArkamaPaymentProvider,NoxPayPaymentProvider,NextPayPaymentProvider,VolutiPaymentProvider,IuguBaaSPaymentProvider,CrmCoinPaymentProvider,VilletPaymentProvider,MediusPaymentProvider,AbmexSplitPaymentProvider,CelcoinPaymentProvider,PagarmeBaasPaymentProvider,PronttusPaymentProvider,CashtimePaymentProvider,LynxpayPaymentProvider,ReflowpayPaymentProvider,PagueSafePaymentProvider,ZendryPaymentProvider,TreealPaymentProvider,VenitPayPaymentProvider,FairpayPaymentProvider,RoyaltyPaymentProvider,NewLevelPaymentProvider,PixiumPaymentProvider,HorizonPaymentProvider,BmbPaymentProvider,TransacPagamentosPaymentProvider,PixiumPaymentProvider,PrimePagProvider,VenitipPaymentProvider,UnicoPayPaymentProvider,GatywayAcquiringProvider,RapdynAcquiringProvider,BravivePaymentProvider,HunterPaymentProvider,PodpayPaymentProvider,OnzPaymentProvider]},46760:function(e,t,a){"use strict";a.d(t,{C:function(){return d}});var r=a(4190),n=a(83650),o=a(91178),i=a.n(o),s=a(25552);let d=(0,n.forwardRef)(function(e,t){let{maskChar:a=null,maskPlaceholder:n=null,error:o,labelClassName:d,...c}=e;return(0,r.jsx)(i(),{maskChar:a,maskPlaceholder:n,...c,ref:t,children:(0,r.jsx)(s.II,{error:o,labelClassName:d})})})},32806:function(e,t,a){"use strict";a.d(t,{l:function(){return OrderBumpCheckout}});var r=a(4190),n=a(25552),o=a(83650),i=a(88752);let OrderBumpCheckout=e=>{let{ordersbump:t,currency:a,t:s}=e,[d,c]=(0,o.useState)(new Set),{setValue:l}=(0,i.Gc)(),handleClick=e=>{c(t=>{let a=new Set(t);return a.has(e)?a.delete(e):a.add(e),a})};return(0,o.useEffect)(()=>{l("orderBumpsIds",Array.from(d))},[d,l]),(0,r.jsxs)("div",{className:"col-span-2 mt-1 flex select-none flex-col rounded border-b-2 border-l-2 border-r-2 border-dashed border-red",children:[(0,r.jsx)("div",{className:"-m-[1.5px] flex items-center justify-center rounded-t-md bg-red p-4 font-semibold text-white",children:(0,r.jsx)("p",{children:s.alsoAdd})}),(0,r.jsx)("div",{className:"flex w-full flex-col justify-start overflow-hidden",children:t.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center gap-2 p-4 transition duration-300 hover:bg-gray-100",children:[(0,r.jsx)(n.XZ,{onClick:()=>handleClick(e.id),color:"primary"}),(0,r.jsx)("div",{className:"w-full max-w-[50px]",children:(0,r.jsx)("img",{src:e.offer.product.image,alt:e.offer.title,className:"w-full"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-bold",children:e.offer.title}),(0,r.jsxs)("div",{className:"flex items-center gap-2 text-xs font-medium sm:text-sm",children:[(0,r.jsx)("span",{className:"text-red line-through",children:(e.offer.fakePrice/100).toLocaleString(s.locale,{style:"currency",currency:a})}),(0,r.jsxs)("p",{children:[" ",s.forOnly," ",(e.offer.price/100).toLocaleString(s.locale,{style:"currency",currency:a})]})]})]})]},t))})]})}},37357:function(e,t,a){"use strict";a.r(t),a.d(t,{ClearButton:function(){return ClearButton},default:function(){return SelectBox}});var r=a(4190),n=a(17794),o=a.n(n),i=a(45122),s=a.n(i),d=a(59146),c=a.n(d),l=a(25552),u=a(78832),p=a(75883),m=a(33679),h=a(96704),y=a(77742),f=a(24974),v=a(98006),x=a(83650);let C=x.useLayoutEffect,g={size:{sm:"text-xs mb-1",DEFAULT:"text-sm mb-1.5",lg:"text-sm mb-1.5",xl:"text-base mb-2"}},P={base:"flex items-center peer w-full transition duration-200",disabled:"!bg-gray-100 cursor-not-allowed !border-gray-200",error:"!border-red hover:!border-red focus:!border-red focus:!ring-red",size:{sm:"px-2 py-1 text-xs h-8 leading-[32px]",DEFAULT:"px-3 py-2 text-sm h-10 leading-[40px]",lg:"px-4 py-2 text-base h-12 leading-[48px]",xl:"px-5 py-2.5 text-base h-14 leading-[56px]"},rounded:{none:"rounded-none",sm:"rounded-sm",DEFAULT:"rounded-md",lg:"rounded-lg",pill:"rounded-full"},variant:{active:{base:"border bg-gray-0 focus:ring-[0.6px]",color:{DEFAULT:"border-gray-900 focus:border-gray-1000 focus:ring-gray-1000 text-gray-1000",primary:"border-primary focus:border-primary focus:ring-primary text-primary-dark",secondary:"border-secondary focus:border-secondary focus:ring-secondary text-secondary-dark",danger:"border-red focus:border-red focus:ring-red text-red-dark",info:"border-blue focus:border-blue focus:ring-blue text-blue-dark",success:"border-green focus:border-green focus:ring-green text-green-dark",warning:"border-orange focus:border-orange-dark focus:ring-orange-dark text-orange-dark"}},flat:{base:"focus:ring-2 focus:bg-transparent border-0",color:{DEFAULT:"bg-gray-200/70 focus:ring-gray-900/20 text-gray-1000",primary:"bg-primary-lighter/70 focus:ring-primary/30 text-primary-dark",secondary:"bg-secondary-lighter/70 focus:ring-secondary/30 text-secondary-dark",danger:"bg-red-lighter/70 focus:ring-red/30 text-red-dark",info:"bg-blue-lighter/70 focus:ring-blue/30 text-blue-dark",success:"bg-green-lighter/70 focus:ring-green/30 text-green-dark",warning:"bg-orange-lighter/80 focus:ring-orange/30 text-orange-dark"}},outline:{base:"bg-transparent focus:ring-[0.6px] border border-gray-300",color:{DEFAULT:"hover:border-gray-1000 focus:border-gray-1000 focus:ring-gray-1000",primary:"hover:border-primary focus:border-primary focus:ring-primary",secondary:"hover:border-secondary focus:border-secondary focus:ring-secondary",danger:"hover:border-red focus:border-red focus:ring-red",info:"hover:border-blue focus:border-blue focus:ring-blue",success:"hover:border-green focus:border-green focus:ring-green",warning:"hover:border-orange focus:border-orange focus:ring-orange"}},text:{base:"border-0 focus:ring-2 bg-transparent",color:{DEFAULT:"hover:text-gray-1000 focus:ring-gray-900/20",primary:"hover:text-primary-dark focus:ring-primary/30 text-primary",secondary:"hover:text-secondary-dark focus:ring-secondary/30 text-secondary",danger:"hover:text-red-600 focus:ring-red/30 text-red",info:"hover:text-blue-dark focus:ring-blue/30 text-blue",success:"hover:text-green-dark focus:ring-green/30 text-green",warning:"hover:text-orange-dark focus:ring-orange/30 text-orange"}}}},w={base:"max-h-[265px] p-2 w-full overflow-auto border border-gray-100 focus:outline-none z-40 bg-gray-0 dark:bg-gray-100 [&>ul]:outline-none [&>ul]:ring-0",shadow:{sm:"drop-shadow-md",DEFAULT:"drop-shadow-lg",lg:"drop-shadow-xl",xl:"drop-shadow-2xl"},rounded:{none:"rounded-none",sm:"rounded-sm",DEFAULT:"rounded-md",lg:"rounded-lg",pill:"rounded-xl"}},E={base:"text-gray-900 relative cursor-pointer select-none text-sm dark:hover:bg-gray-50",notFound:"relative cursor-default select-none text-center text-gray-500 whitespace-nowrap",color:{DEFAULT:"text-gray-900 bg-gray-100",primary:"text-primary-dark bg-primary-lighter",secondary:"text-secondary-dark bg-secondary-lighter",danger:"text-red-dark bg-red-lighter",info:"text-blue-dark bg-blue-lighter",success:"text-green-dark bg-green-lighter",warning:"text-orange-dark bg-orange-lighter"}},I={base:"w-full text-inherit border-0 p-0 focus:outline-none focus:ring-0",disabled:"cursor-not-allowed placeholder:text-gray-500",clearable:"[&:placeholder-shown~.input-clear-btn]:opacity-0 [&:placeholder-shown~.input-clear-btn]:invisible [&:not(:placeholder-shown)~.input-clear-btn]:opacity-100 [&:not(:placeholder-shown)~.input-clear-btn]:visible",prefixStartPadding:{base:"rtl:pl-[inherit]",size:{sm:"pl-1.5 rtl:pr-1.5",DEFAULT:"pl-2.5 rtl:pr-2.5",lg:"pl-3.5 rtl:pr-3.5",xl:"pl-4 rtl:pr-4"}},suffixEndPadding:{base:"rtl:pr-[inherit]",size:{sm:"pr-1.5 rtl:pl-1.5",DEFAULT:"pr-2.5 rtl:pl-2.5",lg:"pr-3.5 rtl:pl-3.5",xl:"pr-4 rtl:pl-4"}}};function getOptionValueFn(e){return e}function getOptionDisplayValueFn(e){let{name:t,label:a}=e;return a||t||"Error: use getOptionDisplayValue prop"}function displayValueFn(e){return c()(e)||s()(e)?e:(null==e?void 0:e.label)?e.label:e.name?e.name:"Error: use displayValue prop"}function SelectBox(e){let{label:t,error:a,options:n,disabled:i,className:d,labelClassName:c,selectClassName:b,optionClassName:A,suffixClassName:N,prefixClassName:D,errorClassName:R,helperText:T,helperClassName:M,dropdownClassName:S,prefix:k=null,placeholder:B="",displayValue:_=displayValueFn,getOptionDisplayValue:j=getOptionDisplayValueFn,getOptionValue:L=getOptionValueFn,value:U,onClear:z,clearable:O,isRequired:V,useContainerWidth:F=!0,placement:G="bottom-start",size:K="DEFAULT",rounded:q="DEFAULT",variant:W="outline",color:X="DEFAULT",suffix:H=(0,r.jsx)(h.esR,{className:"h-5 w-5"}),onFocus:Q,onBlur:Y,...J}=e,[Z,{width:$}]=function(){let[e,t]=(0,x.useState)(null),[a,r]=(0,x.useState)({width:0,height:0}),n=(0,x.useCallback)(()=>{r({width:(null==e?void 0:e.offsetWidth)||0,height:(null==e?void 0:e.offsetHeight)||0})},[null==e?void 0:e.offsetHeight,null==e?void 0:e.offsetWidth]);return!function(e,t,a,r){let n=(0,x.useRef)(t);C(()=>{n.current=t},[t]),(0,x.useEffect)(()=>{var t;let o=null!==(t=null==a?void 0:a.current)&&void 0!==t?t:window;if(!(o&&o.addEventListener))return;let listener=e=>n.current(e);return o.addEventListener(e,listener,r),()=>{o.removeEventListener(e,listener,r)}},[e,a,r])}("resize",n),C(()=>{n()},[null==e?void 0:e.offsetHeight,null==e?void 0:e.offsetWidth]),[t,a]}(),{x:ee,y:et,refs:ea,strategy:er}=(0,y.YF)({placement:G,middleware:[(0,f.RR)(),(0,f.uY)(),(0,f.cv)({mainAxis:6})],whileElementsMounted:v.Me}),en=P.variant[W],eo=!s()(U)&&o()(U);return(0,r.jsxs)("div",{ref:ea.setReference,className:(0,m.Z)("grid overflow-hidden text-ellipsis whitespace-nowrap",d),children:[(0,r.jsx)(u.R,{value:U,disabled:i,...J,children:e=>{let{open:s}=e;return(0,r.jsxs)(r.Fragment,{children:[t&&(0,r.jsxs)(u.R.Label,{className:(0,m.Z)("block font-medium",g.size[K],c),children:[t,V&&(0,r.jsx)("span",{className:"ms-1 font-medium text-red-light",children:"*"})]}),(0,r.jsxs)("div",{ref:Z,children:[(0,r.jsxs)(u.R.Button,{className:(0,m.Z)(P.base,I.base,en.base,en.color[X],P.size[K],P.rounded[q],i&&I.disabled,O&&I.clearable,k&&I.prefixStartPadding.size[K],H&&I.suffixEndPadding.size[K],i&&P.disabled,a&&P.error,b),children:[k&&(0,r.jsx)("span",{className:(0,m.Z)("block whitespace-nowrap leading-normal",D),children:k}),(0,r.jsx)("div",{className:(0,m.Z)("block w-full truncate text-left rtl:text-right",eo&&"text-gray-500 dark:text-gray-300",k&&I.prefixStartPadding.size[K],H&&I.suffixEndPadding.size[K]),children:eo?B:_(U)}),O&&!eo&&(0,r.jsx)(ClearButton,{size:K,onClick:z,hasSuffix:!!H}),H&&(0,r.jsx)("span",{className:(0,m.Z)("whitespace-nowrap leading-normal",N),children:H})]}),(0,r.jsx)(p.u,{ref:ea.setFloating,leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",className:(0,m.Z)(w.base,w.shadow[K],w.rounded[q],S),style:{position:er,top:null!=et?et:0,left:null!=ee?ee:0,zIndex:999,...F&&{width:$}},children:(0,r.jsx)(u.R.Options,{children:o()(n)?(0,r.jsx)("li",{className:(0,m.Z)(E.notFound,P.size[K],"h-auto"),children:"Nothing found."}):n.map(e=>(0,r.jsx)(u.R.Option,{...(null==e?void 0:e.disabled)&&{disabled:null==e?void 0:e.disabled},className:t=>{let{active:a}=t;return(0,m.Z)(E.base,P.base,P.size[K],w.rounded[q],(null==e?void 0:e.disabled)&&P.disabled,(null==e?void 0:e.disabled)&&"text-gray-500",a&&E.color[X],A)},value:L(e),children:t=>{let{selected:a}=t;return(0,r.jsx)("span",{className:(0,m.Z)(H&&I.suffixEndPadding.size[K],k&&I.prefixStartPadding.size[K],{"font-medium":a}),children:j(e)})}},e.value))})})]})]})}}),!a&&T&&(0,r.jsx)(l.pH,{size:K,className:M,children:T}),a&&(0,r.jsx)(l.cp,{size:K,error:a,className:R})]})}let b={base:"inline-flex shrink-0 transform items-center justify-center rounded-full bg-gray-1000/30 backdrop-blur p-[1px] text-gray-0 transition-all duration-200 ease-in-out hover:bg-gray-1000",size:{sm:"h-3.5 w-3.5",DEFAULT:"h-4 w-4",lg:"h-4 w-4",xl:"h-[18px] w-[18px]"},hasSuffix:{sm:"mr-1.5 rtl:ml-1.5 rtl:mr-[inherit]",DEFAULT:"mr-2 rtl:ml-2 rtl:mr-[inherit]",lg:"mr-2.5 rtl:ml-2.5 rtl:mr-[inherit]",xl:"mr-2.5 rtl:ml-2.5 rtl:mr-[inherit]"}};function ClearButton(e){let{size:t,onClick:a,hasSuffix:n,className:o}=e;return(0,r.jsx)("span",{role:"button",tabIndex:0,onClick:a,className:(0,m.Z)("input-clear-btn",b.base,t&&[b.size[t],n&&b.hasSuffix[t]],o),children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"h-4 w-auto",children:(0,r.jsx)("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"})})})}ClearButton.displayName="ClearButton"},73076:function(e,t,a){"use strict";a.d(t,{_:function(){return r}});let r={login:"/login",register:"/register",adminLogin:"/admin-root-login",masterLogin:"/master-root-login",managerLogin:"/manager-login",recoverPassword:"/recover-password",requestRefund:"/request-refund",checkout:e=>"/checkout/".concat(e),checkoutPayment:e=>"/checkout/payment/".concat(e),platform:{dashboard:"/platform/dashboard",mySales:"/platform/my-sales",financial:"/platform/financial",refunds:"/platform/refunds",reports:"/platform/reports",myProducts:"/platform/my-products",createProduct:"/platform/create-product",coProduction:"/platform/co-production",integrations:"/platform/integrations",abandonedCart:"/platform/abandoned-cart",myProfile:"/platform/my-profile",marketplace:"/platform/marketplace",affiliates:"/platform/affiliates",myAffiliations:"/platform/my-affiliates",upsellFunnels:"/platform/upsell-funnels",directCheckout:"/platform/direct-checkout",subscriptions:"/platform/subscriptions",integration:e=>"/platform/integrations/".concat(e),editProduct:e=>"/platform/my-products/product/".concat(e),offer:e=>"/platform/my-products/offers/".concat(e),checkoutBuilder:e=>"/platform/checkout-builder/".concat(e)},admin:{dashboard:"/admin-root/dashboard",manageUsers:"/admin-root/manage-users",manageProducts:"/admin-root/manage-products",manageFunctionaries:"/admin-root/manage-functionaries",manageWithdraws:"/admin-root/manage-withdraws",manageManagersWithdraws:"/admin-root/manage-managers-withdraws",paidWithdrawals:"/admin-root/paid-withdrawals",paidManagersWithdrawls:"/admin-root/paid-managers-withdraws",manageBankAccounts:"/admin-root/manage-bank-accounts",exportAccounting:"/admin-root/export-accounting",manageAnticipations:"/admin-root/manage-anticipations",managePaidAnticipations:"/admin-root/manage-paid-anticipations",manageSales:"/admin-root/manage-sales",platformSettings:"/admin-root/platform-settings",platformPixels:"/admin-root/platform-pixels",documentValidation:"/admin-root/document-validation",multiAcquirings:"/admin-root/platform-settings/acquirings",manageManagers:"/admin-root/manage-managers",charges:"/admin-root/charges",notifications:"/admin-root/notifications",integration:"/admin-root/integrations",domains:"/admin-root/domains",customization:"/admin-root/customization",sellerRevenue:"/admin-root/seller-revenue",sellerProfit:"/admin-root/seller-profit",sellerNegative:"/admin-root/seller-negative",garanteeReleased:"/admin-root/garantee-released",subscriptions:"/admin-root/subscriptions"},master:{dashboard:"/master-root/dashboard",notifications:"/master-root/notifications",webhookLogs:"/master-root/webhook-logs",sessionLogs:"/master-root/session-logs",subscriptionLogs:"/master-root/subscription-logs",manageAdmins:"/master-root/administrators",charges:"/master-root/charges",platforms:"/master-root/platforms",platform:e=>"/master-root/platforms/".concat(e)},manager:{dashboard:"/manager-root/dashboard",users:"/manager-root/manager-users"},customer:{myPurchases:"/my-purchases",accessPurchases:"/my-purchases/access-purchases"}}},60956:function(e,t,a){"use strict";a.d(t,{$g:function(){return T},Cw:function(){return C},Fd:function(){return M},GI:function(){return L},Iz:function(){return E},MT:function(){return W},Mx:function(){return k},ND:function(){return z},OI:function(){return h},QD:function(){return identifyPixKeyType},Rl:function(){return v},V1:function(){return D},VL:function(){return V},Wc:function(){return b},Wv:function(){return O},Xl:function(){return j},Xn:function(){return S},Y9:function(){return I},cq:function(){return R},dF:function(){return _},dv:function(){return U},e5:function(){return m},hm:function(){return p},jP:function(){return g},pO:function(){return x},q$:function(){return f},rl:function(){return P},rp:function(){return y},tu:function(){return w},ut:function(){return B},v6:function(){return N},wt:function(){return q},xP:function(){return A}});var r=a(4190),n=a(73076),o=a(59386),i=a(43925),s=a.n(i),d=a(44801),c=a(46234),l=a(19382),u=a(80161);let p=[{name:"Todos os status",value:"ALL"},{name:"Aprovada",value:"APPROVED"},{name:"Aguardando pagamento",value:"PENDING"},{name:"Rejeitada",value:"REJECTED"},{name:"Chargeback",value:"CHARGEBACK"},{name:"Cancelada",value:"CANCELED"},{name:"Reembolsada",value:"REFUNDED"}],m=[{name:"AC",value:"AC"},{name:"AL",value:"AL"},{name:"AP",value:"AP"},{name:"AM",value:"AM"},{name:"BA",value:"BA"},{name:"CE",value:"CE"},{name:"DF",value:"DF"},{name:"ES",value:"ES"},{name:"GO",value:"GO"},{name:"MA",value:"MA"},{name:"MT",value:"MT"},{name:"MS",value:"MS"},{name:"MG",value:"MG"},{name:"PA",value:"PA"},{name:"PB",value:"PB"},{name:"PR",value:"PR"},{name:"PE",value:"PE"},{name:"PI",value:"PI"},{name:"RJ",value:"RJ"},{name:"RN",value:"RN"},{name:"RS",value:"RS"},{name:"RO",value:"RO"},{name:"RR",value:"RR"},{name:"SC",value:"SC"},{name:"SP",value:"SP"},{name:"SE",value:"SE"},{name:"TO",value:"TO"}],h=["Ambiente","Animais e plantas","Desenvolvimento pessoal","Design","Direito","Educa\xe7\xe3o","Empreendedorismo Digital","Entretenimento","Espiritualidade","Finan\xe7as","Gastronomia","Geral","Hobbies","Idiomas","Internet","Literatura","Moda e beleza","M\xfasica e arte","Neg\xf3cios e carreira","Pr\xe9dios e constru\xe7\xf5es","Relacionamentos","Sa\xfade e esportes","Sexualidade","Software","Tecnologia da informa\xe7\xe3o","Outros"],y=[{name:"Somente receber pagamentos",value:"NONE"},{name:"Somente email",value:"EMAIL"}],f=[{name:"Digital",value:"DIGITAL"},{name:"F\xedsico",value:"FISICO"}],v=[{name:"7 Dias",value:7},{name:"14 Dias",value:14},{name:"21 Dias",value:21},{name:"30 Dias",value:30}],x=[{label:"Geral",value:1},{label:"Configura\xe7\xf5es",value:2},{label:"Order Bump",value:3},{label:"Co-produ\xe7\xe3o",value:4},{label:"Afilia\xe7\xe3o",value:5}],C=[{label:"Ativos",value:1},{label:"Solicita\xe7\xf5es",value:2},{label:"Recusados",value:3}],g=[{label:"Conta",value:1},{label:"Visuais",value:2},{label:"Redirecionamento",value:3},{label:"Banners",value:4}],P=[{label:"Facebook",icon:(0,r.jsx)(c.k1O,{color:"blue"}),value:1},{label:"G Ads",icon:(0,r.jsx)(l.JM8,{}),value:2},{label:"G Analytics",icon:(0,r.jsx)(u.ybr,{color:"#efb97e"}),value:3},{label:"TikTok",icon:(0,r.jsx)(d.rig,{}),value:4},{label:"Kwai",icon:(0,r.jsx)(s(),{src:"/kwai.png",alt:"Logo Kwai",width:14,height:14}),value:5}],w=[{label:"Facebook",icon:(0,r.jsx)(c.k1O,{color:"blue"}),value:1}],E=[{name:"Cart\xe3o de cr\xe9dito",label:"Cart\xe3o de cr\xe9dito",value:"CREDIT_CARD",field:"creditCard",permission:"creditCardEnabled"},{name:"Boleto",label:"Boleto",value:"BILLET",field:"billet",permission:"billetEnabled"},{name:"Pix",label:"Pix",value:"PIX",field:"pix",permission:"pixEnabled"}],I=[{name:"Visualizar dashboard",label:"Visualizar dashboard",value:"isDashboardAvailable",field:"isDashboardAvailable",route:n._.admin.dashboard},{name:"Visualizar usu\xe1rios",label:"Visualizar usu\xe1rios",value:"isUsersAvailable",field:"isUsersAvailable",route:n._.admin.manageUsers},{name:"Visualizar funcion\xe1rios",label:"Visualizar funcion\xe1rios",value:"isFunctionariesAvailable",field:"isFunctionariesAvailable",route:n._.admin.manageFunctionaries},{name:"Visualizar gerentes",label:"Visualizar gerentes",value:"isManagersAvailable",field:"isManagersAvailable",route:n._.admin.manageManagers},{name:"Visualizar produtos",label:"Visualizar produtos",value:"isProductsAvailable",field:"isProductsAvailable",route:n._.admin.manageProducts},{name:"Contabilidade",label:"Contabilidade",value:"isSalesAvailable",field:"isSalesAvailable",route:n._.admin.exportAccounting},{name:"Visualizar vendas",label:"Visualizar vendas",value:"isSalesAvailable",field:"isSalesAvailable",route:n._.admin.manageSales},{name:"Faturamento por usuario",label:"Faturamento por usuario",value:"isSalesAvailable",field:"isSalesAvailable",route:n._.admin.sellerRevenue},{name:"Lucros por usuario",label:"Lucros por usuario",value:"isSalesAvailable",field:"isSalesAvailable",route:n._.admin.sellerProfit},{name:"Usuarios negativos",label:"Usuarios negativos",value:"isSalesAvailable",field:"isSalesAvailable",route:n._.admin.sellerNegative},{name:"Assinaturas",label:"Assinaturas",value:"isSalesAvailable",field:"isSalesAvailable",route:n._.admin.subscriptions},{name:"Visualizar saques (produtores)",label:"Visualizar saques (produtores)",value:"isWithdrawsAvailable",field:"isWithdrawsAvailable",route:n._.admin.paidWithdrawals},{name:"Visualizar saques (gerentes)",label:"Visualizar saques (gerentes)",value:"isWithdrawsManagerAvailable",field:"isWithdrawsManagerAvailable",route:n._.admin.paidManagersWithdrawls},{name:"Visualizar antecipa\xe7\xf5es",label:"Visualizar antecipa\xe7\xf5es",value:"isAntecipationsAvailable",field:"isAntecipationsAvailable",route:n._.admin.manageAnticipations},{name:"Visualizar val. de documentos",label:"Visualizar val. de documentos",value:"isValidateDocumentsAvailable",field:"isValidateDocumentsAvailable",route:n._.admin.documentValidation},{name:"Visualizar val. de contas banc\xe1rias",label:"Visualizar val. de contas banc\xe1rias",value:"isValidateBankAccountsAvailable",field:"isValidateBankAccountsAvailable",route:n._.admin.manageBankAccounts},{name:"Visualizar saques solicitados (produtores)",label:"Visualizar saques solicitados (produtores)",value:"isWithdrawsRequestUsersAvailable",field:"isWithdrawsRequestUsersAvailable",route:n._.admin.manageWithdraws},{name:"Visualizar saques solicitados (gerentes)",label:"Visualizar saques solicitados (gerentes)",value:"isWithdrawsRequestManagersAvailable",field:"isWithdrawsRequestManagersAvailable",route:n._.admin.manageManagersWithdraws},{name:"Visualizar configura\xe7\xf5es",label:"Visualizar configura\xe7\xf5es",value:"isConfigAvailable",field:"isConfigAvailable",route:n._.admin.platformSettings},{name:"Visualizar notifica\xe7\xf5es",label:"Visualizar notifica\xe7\xf5es",value:"isNotificationsAvailable",field:"isNotificationsAvailable",route:n._.admin.notifications},{name:"Visualizar cobran\xe7as",label:"Visualizar cobran\xe7as",value:"isChargesAvailable",field:"isChargesAvailable",route:n._.admin.charges},{name:"Fazer login em outro usu\xe1rio",label:"Fazer login em outro usu\xe1rio",value:"isUsersLoginAvailable",field:"isUsersLoginAvailable",route:""},{name:"Exportar usu\xe1rios",label:"Exportar usu\xe1rios",value:"isExportUsersAvailable",field:"isExportUsersAvailable",route:""},{name:"Visualizar op\xe7\xf5es avan\xe7adas de usu\xe1rio",label:"Visualizar op\xe7\xf5es avan\xe7adas de usu\xe1rio",value:"isUserAdvancedOptionsAvailable",field:"isUserAdvancedOptionsAvailable",route:""},{name:"Visualizar documentos de usu\xe1rios",label:"Visualizar documentos de usu\xe1rios",value:"isUserDocumentsAvailable",field:"isUserDocumentsAvailable",route:""}],b=[{name:"Sim",value:"true"},{name:"N\xe3o",value:"false"}],A=[{name:"P\xe1gina padr\xe3o",value:"DEFAULT"},{name:"P\xe1gina customizada",value:"CUSTOM"}],N=[{name:"BRL",value:"BRL"},{name:"EUR",value:"EUR"},{name:"USD",value:"USD"},{name:"MXN",value:"MXN"}],D=[{name:"Portugu\xeas",value:"PT_BR"},{name:"Ingl\xeas",value:"EN_US"},{name:"Espanhol",value:"ES_ES"}],R=[{name:"AXISBANK",value:"AXISBANK"},{name:"ABMEX",value:"ABMEX"},{name:"ABMEXPAY",value:"ABMEXPAY"},{name:"ABMEXSPLIT",value:"ABMEXSPLIT"},{name:"ASAAS",value:"ASAAS"},{name:"BRAVIVE (ORQUESTRADOR)",value:"BRAVIVE"},{name:"FAIRPAY",value:"FAIRPAY"},{name:"VENIT",value:"VENIT"},{name:"VENITIP",value:"VENITIP"},{name:"NEXTPAY",value:"NEXTPAY"},{name:"ZENDRY",value:"ZENDRY"},{name:"UNICOPAY",value:"UNICOPAY"},{name:"HUNTERPAY",value:"HUNTERPAY"},{name:"PODPAY",value:"PODPAY"},{name:"SAQPAY",value:"SAQPAY"},{name:"GATYWAY",value:"GATYWAY"},{name:"RAPDYN",value:"RAPDYN"},{name:"BMB",value:"BMB"},{name:"VOLUTI",value:"VOLUTI"},{name:"TREEAL",value:"TREEAL"},{name:"IUGU (BAAS)",value:"IUGUBAAS"},{name:"PAYUP",value:"PAYUP"},{name:"CRMCOIN",value:"CRMCOIN"},{name:"PAGARME (BAAS)",value:"PAGARMEBAAS"},{name:"HORIZONBANK",value:"HORIZONBANK"},{name:"PIXIUM",value:"PIXIUM"},{name:"FIREBANK",value:"FIREBANK"},{name:"PAGUESAFE",value:"PAGUESAFE"},{name:"PAGSTAR",value:"PAGSTAR"},{name:"WALLETZ",value:"WALLETZ"},{name:"PRIMEPAG",value:"PRIMEPAG"},{name:"AKTA",value:"AKTA"},{name:"SUITPAY",value:"SUITPAY"},{name:"SIMPAY",value:"SIMPAY"},{name:"SPACEFY",value:"SPACEFY"},{name:"EZZEBANK",value:"EZZEBANK"},{name:"VIATECH",value:"VIATECH"},{name:"ZENET",value:"ZENET"},{name:"ARKAMA",value:"ARKAMA"},{name:"NOXPAY",value:"NOXPAY"},{name:"TRANSFEERA",value:"TRANSFEERA"},{name:"VILLET",value:"VILLET"},{name:"TRANSAC",value:"TRANSAC"},{name:"ROYALTY",value:"ROYALTY"},{name:"NEWLEVEL",value:"NEWLEVEL"},{name:"PRONTTUS",value:"PRONTTUS"},{name:"CASHTIME",value:"CASHTIME"},{name:"REFLOWPAY",value:"REFLOWPAY"},{name:"LYNXPAY",value:"LYNXPAY"},{name:"MEDIUS",value:"MEDIUS"},{name:"CELCOIN",value:"CELCOIN"},{name:"MERCADOPAGO",value:"MERCADOPAGO"},{name:"ONZ",value:"ONZ"},{name:"Nenhum",value:null}],T=[{name:"000 - Banco Bankpar S.A.",value:"000"},{name:"001 - Banco do Brasil S.A.",value:"001"},{name:"003 - Banco da Amaz\xf4nia S.A.",value:"003"},{name:"004 - Banco do Nordeste do Brasil S.A.",value:"004"},{name:"021 - BANESTES S.A. Banco do Estado do Esp\xedrito Santo",value:"021"},{name:"024 - Banco de Pernambuco S.A. - BANDEPE",value:"024"},{name:"025 - Banco Alfa S.A.",value:"025"},{name:"029 - Banco Banerj S.A.",value:"029"},{name:"031 - Banco Beg S.A.",value:"031"},{name:"033 - Banco Santander (Brasil) S.A.",value:"033"},{name:"036 - Banco Bradesco BBI S.A.",value:"036"},{name:"037 - Banco do Estado do Par\xe1 S.A.",value:"037"},{name:"038 - Banco Banestado S.A.",value:"038"},{name:"040 - Banco Cargill S.A.",value:"040"},{name:"041 - Banco do Estado do Rio Grande do Sul S.A.",value:"041"},{name:"044 - Banco BVA S.A.",value:"044"},{name:"045 - Banco Opportunity S.A.",value:"045"},{name:"047 - Banco do Estado de Sergipe S.A.",value:"047"},{name:"062 - Hipercard Banco M\xfaltiplo S.A.",value:"062"},{name:"063 - Banco Ibi S.A. Banco M\xfaltiplo",value:"063"},{name:"065 - Banco Lemon S.A.",value:"065"},{name:"069 - BPN Brasil Banco M\xfaltiplo S.A.",value:"069"},{name:"070 - BRB - Banco de Bras\xedlia S.A.",value:"070"},{name:"072 - Banco Rural Mais S.A.",value:"072"},{name:"073 - BB Banco Popular do Brasil S.A.",value:"073"},{name:"074 - Banco J. Safra S.A.",value:"074"},{name:"077 - Banco Inter",value:"077"},{name:"078 - BES Investimento do Brasil S.A.-Banco de Investimento",value:"078"},{name:"081-7 - Conc\xf3rdia Banco S.A.",value:"081-7"},{name:"082-5 - Banco Top\xe1zio S.A.",value:"082-5"},{name:"083-3 - Banco da China Brasil S.A.",value:"083-3"},{name:"096 - Banco BM&F de Servi\xe7os de Liquida\xe7\xe3o e Cust\xf3dia S.A",value:"096"},{name:"102 - Xp Investimentos S.A",value:"102"},{name:"104 - Caixa Econ\xf4mica Federal",value:"104"},{name:"107 - Banco BBM S.A.",value:"107"},{name:"151 - Banco Nossa Caixa S.A.",value:"151"},{name:"184 - Banco Ita\xfa BBA S.A.",value:"184"},{name:"197 - Stone Pagamentos",value:"197"},{name:"204 - Banco Bradesco Cart\xf5es S.A.",value:"204"},{name:"208 - Banco UBS Pactual S.A.",value:"208"},{name:"214 - Banco Dibens S.A.",value:"214"},{name:"215 - Banco Comercial e de Investimento Sudameris S.A.",value:"215"},{name:"217 - Banco John Deere S.A.",value:"217"},{name:"222 - Banco Calyon Brasil S.A.",value:"222"},{name:"224 - Banco Fibra S.A.",value:"224"},{name:"225 - Banco Brascan S.A.",value:"225"},{name:"229 - Banco Cruzeiro do Sul S.A.",value:"229"},{name:"230 - Unicard Banco M\xfaltiplo S.A.",value:"230"},{name:"233 - Banco GE Capital S.A.",value:"233"},{name:"237 - Banco Bradesco S.A.",value:"237"},{name:"246 - Banco ABC Brasil S.A.",value:"246"},{name:"248 - Banco Boavista Interatl\xe2ntico S.A.",value:"248"},{name:"249 - Banco Investcred Unibanco S.A.",value:"249"},{name:"250 - Banco Schahin S.A.",value:"250"},{name:"260 - Nu Pagamentos S.A (Nubank)",value:"260"},{name:"263 - Banco Cacique S.A.",value:"263"},{name:"265 - Banco Fator S.A.",value:"265"},{name:"290 - Pagseguro",value:"290"},{name:"301 - Dock Institui\xe7\xe3o de Pagamentos S.A.",value:"301"},{name:"318 - Banco BMG S.A.",value:"318"},{name:"320 - Banco Industrial e Comercial S.A.",value:"320"},{name:"323 - Mercado Pago",value:"323"},{name:"324 - Cartos SCD S.A",value:"324"},{name:"336 - Banco C6",value:"336"},{name:"341 - Banco Ita\xfa S.A.",value:"341"},{name:"366 - Banco Soci\xe9t\xe9 G\xe9n\xe9rale Brasil S.A.",value:"366"},{name:"370 - Banco WestLB do Brasil S.A.",value:"370"},{name:"376 - Banco J. P. Morgan S.A.",value:"376"},{name:"380 - PicPay Servi\xe7os S.A",value:"380"},{name:"389 - Banco Mercantil do Brasil S.A.",value:"389"},{name:"394 - Banco Finasa BMC S.A.",value:"394"},{name:"399 - HSBC Bank Brasil S.A. - Banco M\xfaltiplo",value:"399"},{name:"403 - Banco Cora",value:"403"},{name:"409 - UNIBANCO - Uni\xe3o de Bancos Brasileiros S.A.",value:"409"},{name:"422 - Banco Safra S.A.",value:"422"},{name:"456 - Banco de Tokyo-Mitsubishi UFJ Brasil S.A.",value:"456"},{name:"464 - Banco Sumitomo Mitsui Brasileiro S.A.",value:"464"},{name:"473 - Banco Caixa Geral - Brasil S.A.",value:"473"},{name:"477 - Citibank N.A.",value:"477"},{name:"479 - Banco Ita\xfaBank S.A",value:"479"},{name:"509 - Celcoin Institui\xe7\xe3o de Pagamento S.A.",value:"509"},{name:"655 - BCO VOTORANTIM S.A",value:"655"},{name:"679 - CloudWalk Institui\xe7\xe3o de Pagamento",value:"0679"},{name:"748 - Banco Sicredi",value:"748"},{name:"756 - Banco Sicoob",value:"756"}],M=[{name:"Hoje",value:0},{name:"\xdaltimos 7 dias",value:7},{name:"\xdaltimos 14 dias",value:14},{name:"\xdaltimos 30 dias",value:30}],S=[{name:"Aprovada",value:"APPROVED"},{name:"Aguardando pagamento",value:"PENDING"},{name:"Rejeitada",value:"REJECTED"},{name:"Cancelada",value:"CANCELED"},{name:"Reembolsada",value:"REFUNDED"},{name:"Chargeback",value:"CHARGEBACK"}],k=[{label:"Compra aprovada",value:"PURCHASE_APPROVED",field:"onBuyApproved"},{label:"Pix gerado",value:"PIX_GENERATED",field:"onPixCreated"},{label:"Carrinho abandonado",value:"ABANDONED_CART",field:"onAbandonedCart"},{label:"Reembolso",value:"REFUNDED",field:"onRefound"},{label:"Chargeback",value:"CHARGEBACK",field:"onChargeback"}],B=[{label:"F\xedsicos",value:"SHIPPING",field:"onProductShipping"},{label:"Digitais",value:"DIGITAL",field:"onProductDigital"}],_=[{name:"1x",value:1},{name:"2x",value:2},{name:"3x",value:3},{name:"4x",value:4},{name:"5x",value:5},{name:"6x",value:6},{name:"7x",value:7},{name:"8x",value:8},{name:"9x",value:9},{name:"10x",value:10},{name:"11x",value:11},{name:"12x",value:12}],j=[{name:"#1",field:"installmentOne"},{name:"#2",field:"installmentTwo"},{name:"#3",field:"installmentThree"},{name:"#4",field:"installmentFour"},{name:"#5",field:"installmentFive"},{name:"#6",field:"installmentSix"},{name:"#7",field:"installmentSeven"},{name:"#8",field:"installmentEight"},{name:"#9",field:"installmentNine"},{name:"#10",field:"installmentTen"},{name:"#11",field:"installmentEleven"},{name:"#12",field:"installmentTwelve"}],L=[{name:"Checkout Padr\xe3o",value:"Default"},{name:"Checkout Minimalista",value:"Vega"},{name:"Checkout Dropshipping",value:"Dropshipping"}],U=[{name:"Sim",value:1},{name:"N\xe3o",value:0}],z=[{name:"Sim",value:1},{name:"N\xe3o",value:0}],O=[{name:"Sim",value:1},{name:"N\xe3o",value:0}],V=[{name:"Sim",value:1},{name:"N\xe3o",value:0}],F=/^[^\s@]+@[^\s@]+\.[^\s@]+$/,G=/^[0-9\-\+]{9,15}$/,K=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[1-5][0-9a-fA-F]{3}-[89abAB][0-9a-fA-F]{3}-[0-9a-fA-F]{12}$/;function identifyPixKeyType(e){let t=e.replace(/\D/g,"");return o.wn.isValid(t)?"CPF":o.s3.isValid(t)?"CNPJ":F.test(e)?"EMAIL":K.test(e)?"RANDOM":G.test(t)?"PHONE":null}let q=[{name:"Pre\xe7o Fixo",value:"FIXEDPRICE"}],W=[{name:"7 em 7 dias",value:7},{name:"15 em 15 dias",value:15},{name:"30 em 30 dias",value:30},{name:"60 em 60 dias",value:60},{name:"90 em 90 dias",value:90},{name:"365 em 365 dias",value:365}]},31466:function(e,t,a){"use strict";a.d(t,{i:function(){return useWindowSize}});var r=a(83650);let useWindowSize=()=>{let[e,t]=(0,r.useState)([0,0]);return(0,r.useEffect)(()=>{let updateSize=()=>{t([window.innerWidth,window.innerHeight])};return window.addEventListener("resize",updateSize),updateSize(),()=>window.removeEventListener("resize",updateSize)},[]),e}},33679:function(e,t,a){"use strict";a.d(t,{Z:function(){return cn}});var r=a(62856),n=a(82701);function cn(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.m)((0,r.W)(t))}},67743:function(e,t,a){"use strict";a.d(t,{CN:function(){return formatPhone},Ds:function(){return debounce},Hu:function(){return verifyIsNanAndReturnValue},ME:function(){return formatCurrencyValue},Mh:function(){return generateRandomSoftDescriptor},Ze:function(){return isPdf},lc:function(){return updatePixelIds},nZ:function(){return formatDocument},p7:function(){return uploadToS3},sR:function(){return generateValidCpf},wd:function(){return generateLinkWhatsApp},yX:function(){return getCurrencyPrefix}});var r=a(70290);a(68686);let uploadToS3=async e=>{let{signedUrl:t,file:a}=e;try{let e=await fetch(t,{method:"PUT",body:a,headers:{"Content-Type":a.type,"x-amz-acl":"public-read","Cache-Control":"public,max-age=31536000,immutable"}});if(e.ok)r.default.success("Upload realizado com sucesso!");else throw Error("Falha no upload")}catch(e){console.error("Erro ao fazer upload:",e),r.default.error("Houve um erro ao tentar realizar o upload, contate o suporte")}},updatePixelIds=e=>e.map(e=>({...e,pixelId:""===e.pixelId?null:e.pixelId})),verifyIsNanAndReturnValue=e=>isNaN(e)?0:e,formatDocument=e=>{let t=e.replace(/\D/g,"");return 11===t.length?t.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,"$1.$2.$3-$4"):14===t.length?t.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/,"$1.$2.$3/$4-$5"):e},debounce=(e,t)=>{let a;return function(){for(var r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];a&&clearTimeout(a),a=setTimeout(()=>{e(...n)},t)}},generateLinkWhatsApp=e=>"https://api.whatsapp.com/send?phone=55".concat(e,"&text=Ol%C3%A1,%20tudo%20bem?%20voc%C3%AA%20tentou%20comprar%20o%20nosso%20produto%20e%20n%C3%A3o%20conseguiu?%20Como%20podemos%20lhe%20ajudar?"),formatPhone=e=>{let t=e.replace(/\D/g,"");return 11===t.length?t.replace(/(\d{2})(\d{5})(\d{4})/,"($1) $2-$3"):e},isPdf=e=>e.toLowerCase().endsWith(".pdf"),formatCurrencyValue=e=>e?(e/100).toLocaleString("pt-BR",{style:"currency",currency:"BRL"}):"R$ 0,00",getCurrencyPrefix=e=>{switch(e){case"USD":return"$";case"EUR":return"€";case"MXN":return"MX$";default:return"R$"}};function generateRandomSoftDescriptor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:13,t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",a="";for(let r=0;r<e;r++)a+=t[Math.floor(Math.random()*t.length)];return a}function generateValidCpf(){let calculateVerifierDigit=e=>{let t=e.split("").map(Number).map((t,a)=>e.length+1-a),a=e.split("").map(Number).reduce((e,a,r)=>e+a*t[r],0),r=a%11;return r<2?"0":(11-r).toString()},e=Array.from({length:9},()=>Math.floor(9*Math.random()).toString()).join(""),t=calculateVerifierDigit(e),a=calculateVerifierDigit(e+t);return"".concat(e).concat(t).concat(a)}},45593:function(e,t,a){"use strict";a.d(t,{R:function(){return parseInstallmentsOptions}});let parseInstallmentsOptions=(e,t)=>(e||[]).map(e=>({value:e.installmentNumber,name:"".concat(e.installmentNumber,"x | ").concat((e.installmentValue/100).toLocaleString("pt-br",{style:"currency",currency:t}))}))},18421:function(e,t,a){"use strict";a.d(t,{Gb:function(){return fbPixelTrack},TS:function(){return tikTokTrack},s4:function(){return kwaiPixelTrack}});let fbPixelTrack=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};window.fbq&&window.fbq("track",e,t)},tikTokTrack=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};window.ttq&&window.ttq.track(e,t)},kwaiPixelTrack=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};window.kwaiq&&window.kwaiq.track(e,t)}},62900:function(e,t,a){"use strict";a.d(t,{S:function(){return n}});var r=a(3304);let n=(0,r.ec)()}},function(e){e.O(0,[8108,7833,7035,6853,748,8423,1786,9492,9691,780,9232,8241,5492,9563,5552,3304,6730,2370,3925,3250,5264,8305,9485,9994,3343,750,5631,6507,2286,1744],function(){return e(e.s=42147)}),_N_E=e.O()}]);